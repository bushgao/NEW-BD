# 趋势图表 - 快速使用指南

## 🚀 快速开始

### 1. 启动后端服务
```bash
cd packages/backend
npm run dev
```

### 2. 启动前端服务
```bash
cd packages/frontend
npm run dev
```

### 3. 访问 Dashboard
打开浏览器访问: http://localhost:5173/app/dashboard

使用工厂老板账号登录:
- 邮箱: `owner@test.com`
- 密码: `owner123`

---

## 📊 功能说明

### 趋势图表位置
登录后，在 Dashboard 页面的关键指标卡片下方，可以看到三个趋势图表：
1. **GMV 趋势** - 显示销售额趋势（绿色）
2. **成本趋势** - 显示成本趋势（红色）
3. **ROI 趋势** - 显示投资回报率趋势（蓝色）

### 时间周期切换
每个图表右上角有时间周期选择器：
- **7天** - 显示最近7天的数据，横轴显示周一、周二...
- **30天** - 显示最近30天的数据，横轴显示日期（MM/DD）
- **90天** - 显示最近90天的数据，横轴显示日期（MM/DD）

三个图表共享同一个时间周期选择器，切换时会同时更新所有图表。

### 环比对比
每个图表标题右侧显示环比变化：
- 🟢 **绿色向上箭头** - 环比增长
- 🔴 **红色向下箭头** - 环比下降
- 显示具体的变化百分比

图表中：
- **实线** - 当前周期数据
- **虚线** - 上一周期数据（用于对比）

### 交互功能
- **鼠标悬停** - 显示该数据点的详细数值
- **图例点击** - 可以隐藏/显示某条数据线

---

## 🧪 测试功能

### 运行测试脚本
```bash
node test-trend-charts.js
```

测试脚本会验证：
- ✅ 趋势数据 API 是否正常工作
- ✅ 不同时间周期的数据是否正确
- ✅ 环比计算是否准确
- ✅ 数据结构是否完整

---

## 📱 移动端适配

趋势图表支持响应式布局：
- **桌面端** - 三个图表横向排列
- **平板端** - 三个图表横向排列（稍窄）
- **手机端** - 三个图表纵向堆叠

---

## 🎨 视觉设计

### 颜色方案
- **GMV** - #52c41a（绿色）- 代表收入
- **成本** - #ff4d4f（红色）- 代表支出
- **ROI** - #1890ff（蓝色）- 代表效率

### 图表样式
- 折线宽度：2px
- 数据点大小：4px（普通）/ 6px（激活）
- 网格线：虚线样式
- 圆角卡片：8px

---

## 💡 使用技巧

### 1. 快速查看趋势
- 选择 **7天** 查看短期趋势
- 选择 **30天** 查看月度趋势
- 选择 **90天** 查看季度趋势

### 2. 对比分析
- 观察实线和虚线的差距，了解业绩变化
- 查看环比百分比，快速判断增长或下降

### 3. 数据钻取
- 鼠标悬停在数据点上，查看具体数值
- 结合下方的管道分布和商务排行榜，进行深度分析

---

## 🔧 故障排查

### 图表不显示数据
1. 检查是否有合作结果数据（需要有已发布的合作）
2. 检查后端服务是否正常运行
3. 打开浏览器控制台查看是否有错误信息

### 加载很慢
1. 检查数据库连接是否正常
2. 90天数据量较大，首次加载可能需要几秒钟
3. 后续切换会使用缓存，速度会更快

### 环比数据不准确
1. 确保有足够的历史数据（至少两个周期）
2. 检查合作结果的 `publishedAt` 字段是否正确

---

## 📞 需要帮助？

如果遇到问题或有改进建议，请：
1. 查看完成报告：`Day1-趋势图表功能完成报告.md`
2. 运行测试脚本验证后端功能
3. 检查浏览器控制台的错误信息
4. 联系开发团队

---

## 🎉 享受数据可视化！

趋势图表让您可以：
- 📈 直观了解业务趋势
- 📊 快速发现问题和机会
- 🎯 做出数据驱动的决策

祝您使用愉快！
