import{r as l,j as e,e as L,S as E}from"./index-CT9F3akh.js";import{F}from"./FactoryList-BTZF9aZX.js";import{l as C,g as D,a as $,u as B,c as M,d as q,b as z}from"./platform.service-DL6LgE4V.js";import{F as r}from"./index-gbW5J2sR.js";import{B as y}from"./button-BCSOJgfZ.js";import{R as A}from"./PlusOutlined-oMbGAVrA.js";import{F as O}from"./Table-pvERNZVb.js";import{f as V}from"./money-DMHcC8uu.js";import{M as K}from"./index-CxrQydPb.js";import{S as N}from"./index-DfnzXlZl.js";import{I as w}from"./index-htVVH06X.js";import{T as g}from"./index-CGanNrki.js";import{s as o}from"./index-DBkC0DaV.js";import{T as I}from"./index-DnlS8_jt.js";import{S as U}from"./index-B4IHrhqI.js";import{R as G,T as H}from"./index-WSGRBNKI.js";import{P as _}from"./index-C7D5ByUV.js";import{R as J}from"./DeleteOutlined-TK3JP8uX.js";import{I as Q}from"./InfluencerManagement-B7y96HeD.js";import{I as W}from"./InfluencerStatsPanel-CuyS3ueU.js";import X from"./IndependentBusinessList-CzsSXdSr.js";import{a as Y,B as a}from"./Bento-rP_dPwTG.js";import{R as Z}from"./ShopOutlined-CjbywNU0.js";import{R as ee}from"./ClockCircleOutlined-DAoco557.js";import{R as te}from"./CheckCircleOutlined-eJc7nheY.js";import{R as se}from"./UserOutlined-C5ACOCTv.js";import{R as ie}from"./TeamOutlined-Bai9oLhN.js";import{R as ae}from"./ProjectOutlined-CBcPNtE6.js";import{T as re}from"./index-DiUoGV2L.js";import"./Card-D9YXdlEe.js";import"./index-BIA-WqSn.js";import"./useBreakpoint--6XYT0_e.js";import"./TextArea-Dl3y1VrD.js";import"./row-DVjUYxl3.js";import"./index-BoArUKpt.js";import"./index-C_yDWHqX.js";import"./UnstableContext-DKFbPjPy.js";import"./Skeleton-DdNqplha.js";import"./TrophyOutlined-Bu28ol1a.js";import"./CalendarOutlined-6RDrkSku.js";import"./PurePanel-DcW2x34y.js";import"./Overflow-Gz7ZFAqv.js";import"./SearchOutlined-CyHaylvE.js";import"./index-N65tUqUy.js";import"./GiftOutlined-B6rzlFEA.js";import"./index-DVFXVRcq.js";import"./index-2ffhpgky.js";import"./index-Do9OUhYv.js";import"./LockOutlined-DjHtpiEB.js";import"./UnlockOutlined-DSEY7w_e.js";import"./api-W_2ufh2E.js";import"./Input-UrGHJeeK.js";import"./QuestionCircleOutlined-CZssou_a.js";import"./index-Dd1FzYQF.js";import"./index-BndKrrhJ.js";import"./LeftOutlined-DGEyRIvL.js";import"./EllipsisOutlined-Bv641ndy.js";import"./Pagination-6AhiOKxV.js";import"./extendsObject-78o_rR5W.js";import"./ActionButton-DPGDuFxb.js";import"./fade-pCPugiYp.js";import"./index-DTiWaDVa.js";import"./global-influencer.service-DgptB4Yw.js";import"./CloseCircleOutlined-D2hdQaev.js";import"./SafetyCertificateOutlined-DItUwWUC.js";const{Option:v}=N,{TextArea:le}=w,ne=()=>{const[u,h]=l.useState(!1),[j,s]=l.useState([]),[b,d]=l.useState(!1),[c,p]=l.useState(null),[m]=r.useForm(),n=async()=>{h(!0);try{const t=await C();s(t)}catch(t){o.error("加载套餐配置失败"),console.error(t)}finally{h(!1)}};l.useEffect(()=>{n()},[]);const R=()=>{p(null),m.resetFields(),d(!0)},k=t=>{p(t),m.setFieldsValue({...t,price:t.price/100,features:t.features.join(`
`)}),d(!0)},T=async()=>{try{const t=await m.validateFields(),x=t.features?t.features.split(`
`).filter(f=>f.trim()):[],i={...t,price:Math.round(t.price*100),features:x};if(c){const f={name:i.name,staffLimit:i.staffLimit,influencerLimit:i.influencerLimit,dataRetentionDays:i.dataRetentionDays,price:i.price,features:i.features};await B(c.planType,f),o.success("更新成功")}else{const f={planType:i.planType,name:i.name,staffLimit:i.staffLimit,influencerLimit:i.influencerLimit,dataRetentionDays:i.dataRetentionDays,price:i.price,features:i.features};await M(f),o.success("创建成功")}d(!1),n()}catch(t){o.error("操作失败"),console.error(t)}},S=async t=>{try{await q(t),o.success("删除成功"),n()}catch(x){o.error("删除失败"),console.error(x)}},P=[{title:"套餐类型",dataIndex:"planType",key:"planType",width:120,render:t=>e.jsx(I,{color:$(t),children:D(t)})},{title:"套餐名称",dataIndex:"name",key:"name",width:150},{title:"商务账号上限",dataIndex:"staffLimit",key:"staffLimit",width:120,align:"right"},{title:"达人数量上限",dataIndex:"influencerLimit",key:"influencerLimit",width:120,align:"right"},{title:"数据保留天数",dataIndex:"dataRetentionDays",key:"dataRetentionDays",width:120,align:"right",render:t=>`${t} 天`},{title:"价格（元/月）",dataIndex:"price",key:"price",width:120,align:"right",render:t=>`¥${V(t)}`},{title:"功能特性",dataIndex:"features",key:"features",ellipsis:!0,render:t=>t.join("、")},{title:"操作",key:"actions",width:120,fixed:"right",render:(t,x)=>e.jsxs(U,{size:"small",children:[e.jsx(y,{size:"small",icon:e.jsx(G,{}),onClick:()=>k(x),children:"编辑"}),e.jsx(_,{title:"确定删除此套餐配置吗？",description:"如果有品牌正在使用此套餐，将无法删除",onConfirm:()=>S(x.planType),children:e.jsx(y,{size:"small",danger:!0,icon:e.jsx(J,{}),children:"删除"})})]})}];return e.jsxs("div",{children:[e.jsx("div",{style:{marginBottom:16},children:e.jsx(y,{type:"primary",icon:e.jsx(A,{}),onClick:R,children:"新建套餐"})}),e.jsx(O,{columns:P,dataSource:j,rowKey:"id",loading:u,scroll:{x:1e3},pagination:!1}),e.jsx(K,{title:c?"编辑套餐":"新建套餐",open:b,onOk:T,onCancel:()=>d(!1),okText:"保存",cancelText:"取消",width:600,children:e.jsxs(r,{form:m,layout:"vertical",children:[!c&&e.jsx(r.Item,{name:"planType",label:"套餐类型",rules:[{required:!0,message:"请选择套餐类型"}],children:e.jsxs(N,{placeholder:"请选择套餐类型",children:[e.jsx(v,{value:"FREE",children:"免费版"}),e.jsx(v,{value:"PROFESSIONAL",children:"专业版"}),e.jsx(v,{value:"ENTERPRISE",children:"企业版"})]})}),e.jsx(r.Item,{name:"name",label:"套餐名称",rules:[{required:!0,message:"请输入套餐名称"}],children:e.jsx(w,{placeholder:"请输入套餐名称"})}),e.jsx(r.Item,{name:"staffLimit",label:"商务账号上限",rules:[{required:!0,message:"请输入商务账号上限"}],children:e.jsx(g,{min:1,style:{width:"100%"},placeholder:"请输入商务账号上限"})}),e.jsx(r.Item,{name:"influencerLimit",label:"达人数量上限",rules:[{required:!0,message:"请输入达人数量上限"}],children:e.jsx(g,{min:1,style:{width:"100%"},placeholder:"请输入达人数量上限"})}),e.jsx(r.Item,{name:"dataRetentionDays",label:"数据保留天数",rules:[{required:!0,message:"请输入数据保留天数"}],children:e.jsx(g,{min:1,style:{width:"100%"},placeholder:"请输入数据保留天数"})}),e.jsx(r.Item,{name:"price",label:"价格（元/月）",rules:[{required:!0,message:"请输入价格"}],children:e.jsx(g,{min:0,precision:2,style:{width:"100%"},placeholder:"请输入价格",prefix:"¥"})}),e.jsx(r.Item,{name:"features",label:"功能特性",extra:"每行一个功能特性",children:e.jsx(le,{rows:4,placeholder:"请输入功能特性，每行一个"})})]})})]})},{Title:oe}=H,yt=()=>{const{theme:u}=L(),[h,j]=l.useState(!1),[s,b]=l.useState(null),[d,c]=l.useState("overview"),p=async()=>{j(!0);try{const n=await z();b(n)}catch(n){o.error("加载统计数据失败"),console.error(n)}finally{j(!1)}};l.useEffect(()=>{p()},[]);const m=[{key:"overview",label:"数据概览",children:e.jsx(W,{})},{key:"factories",label:"品牌管理",children:e.jsx(F,{onRefresh:p})},{key:"independent",label:"独立商务",children:e.jsx(X,{})},{key:"influencers",label:"达人管理",children:e.jsx(Q,{})},{key:"plans",label:"套餐配置",children:e.jsx(ne,{})}];return e.jsx(E,{spinning:h,children:e.jsxs("div",{style:{minHeight:"100vh",background:`linear-gradient(135deg, ${u.colors.background.secondary} 0%, ${u.colors.background.tertiary} 100%)`,position:"relative",padding:"24px",margin:"-24px"},children:[e.jsx("div",{style:{position:"absolute",top:"10%",left:"5%",width:"400px",height:"400px",background:"linear-gradient(135deg, rgba(90, 200, 250, 0.08), rgba(191, 90, 242, 0.08))",borderRadius:"50%",filter:"blur(80px)",pointerEvents:"none",zIndex:0}}),e.jsx("div",{style:{position:"absolute",top:"40%",right:"10%",width:"500px",height:"500px",background:"linear-gradient(135deg, rgba(255, 107, 107, 0.08), rgba(255, 217, 61, 0.08))",borderRadius:"50%",filter:"blur(100px)",pointerEvents:"none",zIndex:0}}),e.jsxs("div",{style:{position:"relative",zIndex:1},children:[e.jsxs("div",{className:"mb-4 flex items-center justify-between",children:[e.jsx(oe,{level:4,style:{margin:0},children:"平台管理"}),e.jsx(I,{color:"geekblue",children:new Date().toLocaleDateString()})]}),e.jsxs(Y,{children:[e.jsx(a,{span:1,className:"h-full",children:e.jsxs("div",{className:"flex flex-col h-full justify-between gap-4",children:[e.jsx("div",{className:"flex justify-between items-start",children:e.jsx("div",{className:"p-2.5 rounded-xl bg-blue-50 text-blue-600 flex items-center justify-center text-lg shadow-sm",children:e.jsx(Z,{})})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-neutral-500 text-xs font-bold uppercase tracking-wider mb-1",children:"品牌总数"}),e.jsx("div",{className:"text-2xl font-bold text-neutral-800",children:(s==null?void 0:s.totalFactories)||0})]})]})}),e.jsx(a,{span:1,className:"h-full",children:e.jsxs("div",{className:"flex flex-col h-full justify-between gap-4",children:[e.jsx("div",{className:"flex justify-between items-start",children:e.jsx("div",{className:"p-2.5 rounded-xl bg-amber-50 text-amber-500 flex items-center justify-center text-lg shadow-sm",children:e.jsx(ee,{})})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-neutral-500 text-xs font-bold uppercase tracking-wider mb-1",children:"待审核"}),e.jsx("div",{className:"text-2xl font-bold text-amber-500",children:(s==null?void 0:s.pendingFactories)||0})]})]})}),e.jsx(a,{span:1,className:"h-full",children:e.jsxs("div",{className:"flex flex-col h-full justify-between gap-4",children:[e.jsx("div",{className:"flex justify-between items-start",children:e.jsx("div",{className:"p-2.5 rounded-xl bg-emerald-50 text-emerald-500 flex items-center justify-center text-lg shadow-sm",children:e.jsx(te,{})})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-neutral-500 text-xs font-bold uppercase tracking-wider mb-1",children:"已通过"}),e.jsx("div",{className:"text-2xl font-bold text-emerald-500",children:(s==null?void 0:s.approvedFactories)||0})]})]})}),e.jsx(a,{span:1,className:"h-full",children:e.jsxs("div",{className:"flex flex-col h-full justify-between gap-4",children:[e.jsx("div",{className:"flex justify-between items-start",children:e.jsx("div",{className:"p-2.5 rounded-xl bg-indigo-50 text-indigo-500 flex items-center justify-center text-lg shadow-sm",children:e.jsx(se,{})})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-neutral-500 text-xs font-bold uppercase tracking-wider mb-1",children:"用户总数"}),e.jsx("div",{className:"text-2xl font-bold text-neutral-800",children:(s==null?void 0:s.totalUsers)||0})]})]})}),e.jsx(a,{span:1,className:"h-full",children:e.jsxs("div",{className:"flex flex-col h-full justify-between gap-4",children:[e.jsx("div",{className:"flex justify-between items-start",children:e.jsx("div",{className:"p-2.5 rounded-xl bg-purple-50 text-purple-500 flex items-center justify-center text-lg shadow-sm",children:e.jsx(ie,{})})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-neutral-500 text-xs font-bold uppercase tracking-wider mb-1",children:"达人总数"}),e.jsx("div",{className:"text-2xl font-bold text-neutral-800",children:(s==null?void 0:s.totalInfluencers)||0})]})]})}),e.jsx(a,{span:1,className:"h-full",children:e.jsxs("div",{className:"flex flex-col h-full justify-between gap-4",children:[e.jsx("div",{className:"flex justify-between items-start",children:e.jsx("div",{className:"p-2.5 rounded-xl bg-rose-50 text-rose-500 flex items-center justify-center text-lg shadow-sm",children:e.jsx(ae,{})})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-neutral-500 text-xs font-bold uppercase tracking-wider mb-1",children:"合作总数"}),e.jsx("div",{className:"text-2xl font-bold text-neutral-800",children:(s==null?void 0:s.totalCollaborations)||0})]})]})}),s&&e.jsxs(e.Fragment,{children:[e.jsx(a,{title:"免费版品牌",span:2,children:e.jsxs("div",{className:"flex items-end gap-2 mt-2",children:[e.jsx("span",{className:"text-4xl font-bold text-neutral-800",children:s.factoriesByPlan.FREE||0}),e.jsx("span",{className:"text-neutral-400 mb-1.5",children:"家"})]})}),e.jsx(a,{title:"专业版品牌",span:2,children:e.jsxs("div",{className:"flex items-end gap-2 mt-2",children:[e.jsx("span",{className:"text-4xl font-bold text-blue-600",children:s.factoriesByPlan.PROFESSIONAL||0}),e.jsx("span",{className:"text-neutral-400 mb-1.5",children:"家"})]})}),e.jsx(a,{title:"企业版品牌",span:1,children:e.jsxs("div",{className:"flex items-end gap-2 mt-2",children:[e.jsx("span",{className:"text-4xl font-bold text-amber-500",children:s.factoriesByPlan.ENTERPRISE||0}),e.jsx("span",{className:"text-neutral-400 mb-1.5",children:"家"})]})}),e.jsx(a,{title:"独立商务",span:1,children:e.jsxs("div",{className:"flex items-end gap-2 mt-2",children:[e.jsx("span",{className:"text-4xl font-bold text-purple-600",children:s.independentBusinessUsers||0}),e.jsx("span",{className:"text-neutral-400 mb-1.5",children:"人"})]})})]}),e.jsx(a,{span:6,children:e.jsx(re,{activeKey:d,onChange:c,items:m})})]})]})]})})};export{yt as default};
