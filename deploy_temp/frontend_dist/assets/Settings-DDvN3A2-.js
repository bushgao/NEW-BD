import{e as w,r as l,ae as L,j as e,S as z,af as B}from"./index-CT9F3akh.js";import{e as N,f as P,r as $}from"./influencer-portal.service-6g17WHCp.js";import{C as b,a as S}from"./Card-D9YXdlEe.js";import{F as a}from"./index-gbW5J2sR.js";import{s as o}from"./index-DBkC0DaV.js";import{T as D}from"./index-WSGRBNKI.js";import{D as h}from"./index-BIA-WqSn.js";import{S as g}from"./index-B4IHrhqI.js";import{R as u}from"./MobileOutlined-D0OPZNfE.js";import{B as d}from"./button-BCSOJgfZ.js";import{R as M}from"./PlusOutlined-oMbGAVrA.js";import{F as H}from"./Table-pvERNZVb.js";import{M as O}from"./index-CxrQydPb.js";import{I as T}from"./index-htVVH06X.js";import{R as q}from"./UserOutlined-C5ACOCTv.js";import{S as G}from"./index-DfnzXlZl.js";import{P as V}from"./index-C7D5ByUV.js";import{R as K}from"./DeleteOutlined-TK3JP8uX.js";import{T as _}from"./index-DnlS8_jt.js";import"./TextArea-Dl3y1VrD.js";import"./Input-UrGHJeeK.js";import"./row-DVjUYxl3.js";import"./index-BoArUKpt.js";import"./useBreakpoint--6XYT0_e.js";import"./QuestionCircleOutlined-CZssou_a.js";import"./UnstableContext-DKFbPjPy.js";import"./index-Do9OUhYv.js";import"./index-Dd1FzYQF.js";import"./index-BndKrrhJ.js";import"./LeftOutlined-DGEyRIvL.js";import"./EllipsisOutlined-Bv641ndy.js";import"./Overflow-Gz7ZFAqv.js";import"./PurePanel-DcW2x34y.js";import"./Pagination-6AhiOKxV.js";import"./extendsObject-78o_rR5W.js";import"./SearchOutlined-CyHaylvE.js";import"./ActionButton-DPGDuFxb.js";import"./Skeleton-DdNqplha.js";import"./fade-pCPugiYp.js";import"./index-DTiWaDVa.js";const{Title:J,Text:i}=D,Q=[{label:"本人",value:"SELF"},{label:"助理",value:"ASSISTANT"},{label:"经纪人",value:"AGENT"},{label:"其他",value:"OTHER"}],Ne=()=>{const{theme:f}=w(),[v,y]=l.useState(!0),[s,I]=l.useState(null),[C,c]=l.useState(!1),[k,j]=l.useState(!1),[m]=a.useForm(),{contact:p}=L();l.useEffect(()=>{x()},[]);const x=async()=>{var t;y(!0);try{const r=await N();r.success&&r.data?I(r.data):o.error(((t=r.error)==null?void 0:t.message)||"加载失败")}catch{o.error("加载失败，请稍后重试")}finally{y(!1)}},A=async t=>{var r;j(!0);try{const n=await P(t);n.success?(o.success("联系人添加成功"),c(!1),m.resetFields(),x()):o.error(((r=n.error)==null?void 0:r.message)||"添加失败")}catch{o.error("添加失败，请稍后重试")}finally{j(!1)}},R=async t=>{var r;try{const n=await $(t);n.success?(o.success("联系人已移除"),x()):o.error(((r=n.error)==null?void 0:r.message)||"移除失败")}catch{o.error("移除失败，请稍后重试")}},E=t=>{const r={SELF:"purple",ASSISTANT:"blue",AGENT:"green",OTHER:"default"};return e.jsx(_,{color:r[t]||"default",children:B(t)})},F=[{title:"手机号",dataIndex:"phone",key:"phone",render:t=>e.jsxs(g,{children:[e.jsx(u,{}),e.jsx("span",{children:t})]})},{title:"姓名",dataIndex:"name",key:"name",render:t=>t||e.jsx(i,{type:"secondary",children:"未设置"})},{title:"类型",dataIndex:"contactType",key:"contactType",render:t=>E(t)},{title:"最后登录",dataIndex:"lastLoginAt",key:"lastLoginAt",render:t=>t?new Date(t).toLocaleString("zh-CN"):e.jsx(i,{type:"secondary",children:"从未登录"})},{title:"操作",key:"action",render:(t,r)=>r.id===(p==null?void 0:p.id)?e.jsx(i,{type:"secondary",children:"当前登录"}):r.contactType==="SELF"&&r.phone===(s==null?void 0:s.primaryPhone)?e.jsx(i,{type:"secondary",children:"主账号"}):e.jsx(V,{title:"确定要移除该联系人吗？",description:"移除后该联系人将无法再登录查看数据",onConfirm:()=>R(r.id),okText:"确定",cancelText:"取消",children:e.jsx(d,{type:"link",danger:!0,icon:e.jsx(K,{}),children:"移除"})})}];return v?e.jsx("div",{style:{textAlign:"center",padding:100},children:e.jsx(z,{size:"large"})}):e.jsxs("div",{style:{minHeight:"100vh",background:`linear-gradient(135deg, ${f.colors.background.secondary} 0%, ${f.colors.background.tertiary} 100%)`,position:"relative",padding:"24px",margin:"-24px"},children:[e.jsx("div",{style:{position:"absolute",top:"10%",left:"5%",width:"400px",height:"400px",background:"linear-gradient(135deg, rgba(90, 200, 250, 0.08), rgba(191, 90, 242, 0.08))",borderRadius:"50%",filter:"blur(80px)",pointerEvents:"none",zIndex:0}}),e.jsx("div",{style:{position:"absolute",top:"40%",right:"10%",width:"500px",height:"500px",background:"linear-gradient(135deg, rgba(255, 107, 107, 0.08), rgba(255, 217, 61, 0.08))",borderRadius:"50%",filter:"blur(100px)",pointerEvents:"none",zIndex:0}}),e.jsxs("div",{style:{position:"relative",zIndex:1},children:[e.jsx(J,{level:4,style:{marginBottom:24},children:"账号设置"}),e.jsx(b,{variant:"elevated",style:{marginBottom:16},children:e.jsxs(S,{children:[e.jsx("div",{style:{marginBottom:16},children:e.jsx(i,{strong:!0,style:{fontSize:16},children:"账号信息"})}),e.jsxs(h,{column:{xs:1,sm:2},children:[e.jsx(h.Item,{label:"主手机号",children:e.jsxs(g,{children:[e.jsx(u,{}),s==null?void 0:s.primaryPhone]})}),e.jsx(h.Item,{label:"创建时间",children:s!=null&&s.createdAt?new Date(s.createdAt).toLocaleDateString("zh-CN"):"-"})]})]})}),e.jsx(b,{variant:"elevated",children:e.jsxs(S,{children:[e.jsxs("div",{style:{marginBottom:16,display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsx(i,{strong:!0,style:{fontSize:16},children:"联系人管理"}),e.jsx(d,{type:"primary",icon:e.jsx(M,{}),onClick:()=>c(!0),style:{background:"#722ed1",borderColor:"#722ed1"},children:"添加联系人"})]}),e.jsx(i,{type:"secondary",style:{display:"block",marginBottom:16},children:"您可以添加助理或经纪人的手机号，让他们也能登录查看您的样品和合作信息。"}),e.jsx(H,{dataSource:(s==null?void 0:s.contacts)||[],columns:F,rowKey:"id",pagination:!1})]})}),e.jsx(O,{title:"添加联系人",open:C,onCancel:()=>{c(!1),m.resetFields()},footer:null,children:e.jsxs(a,{form:m,layout:"vertical",onFinish:A,children:[e.jsx(a.Item,{name:"phone",label:"手机号",rules:[{required:!0,message:"请输入手机号"},{pattern:/^1[3-9]\d{9}$/,message:"手机号格式不正确"}],children:e.jsx(T,{prefix:e.jsx(u,{}),placeholder:"请输入手机号",maxLength:11})}),e.jsx(a.Item,{name:"name",label:"姓名",children:e.jsx(T,{prefix:e.jsx(q,{}),placeholder:"请输入姓名（选填）"})}),e.jsx(a.Item,{name:"contactType",label:"联系人类型",rules:[{required:!0,message:"请选择联系人类型"}],children:e.jsx(G,{placeholder:"请选择联系人类型",options:Q})}),e.jsx(a.Item,{style:{marginBottom:0,textAlign:"right"},children:e.jsxs(g,{children:[e.jsx(d,{onClick:()=>c(!1),children:"取消"}),e.jsx(d,{type:"primary",htmlType:"submit",loading:k,style:{background:"#722ed1",borderColor:"#722ed1"},children:"添加"})]})})]})})]})]})};export{Ne as default};
