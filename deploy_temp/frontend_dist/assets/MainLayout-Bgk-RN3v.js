import{r as n,_ as W,u as oe,j as e,S as V,b as xe,a as je,c as ge,O as ye}from"./index-CT9F3akh.js";import{g as ve,a as be,m as Se,b as Re,R as re}from"./notification.service-DYG9haj_.js";import{T as q}from"./index-WSGRBNKI.js";import{B as C}from"./button-BCSOJgfZ.js";import{E as B}from"./index-DfnzXlZl.js";import{L as O}from"./index-B-vfV2rY.js";import{S}from"./index-B4IHrhqI.js";import{T as G}from"./index-DnlS8_jt.js";import{D as ie,M as we}from"./index-BndKrrhJ.js";import{B as Ce}from"./index-6l5o2ZFH.js";import{R as F}from"./BellOutlined-Byee07wo.js";import{R as le}from"./FileTextOutlined-D1SgpYty.js";import{R as D}from"./GiftOutlined-B6rzlFEA.js";import{R as Ie}from"./ClockCircleOutlined-DAoco557.js";import{g as ce,a as ke,r as Ne,d as ze,b as Ee}from"./invitation.service-CM1HH-Kp.js";import{M as Te}from"./index-CxrQydPb.js";import{R as M}from"./TeamOutlined-Bai9oLhN.js";import{A as Y}from"./index-C7lyzjCv.js";import{C as P}from"./index-DSHlf2Aa.js";import{D as Q}from"./index-N65tUqUy.js";import{I as Me}from"./index-htVVH06X.js";import{R as X,C as N}from"./row-DVjUYxl3.js";import{S as T}from"./index-C_yDWHqX.js";import{R as $}from"./UserOutlined-C5ACOCTv.js";import{R as Le}from"./SendOutlined-be91IxK6.js";import{R as Ae}from"./MessageOutlined-Y6IUBdfm.js";import{R as $e}from"./DownloadOutlined-uTWihTI_.js";import{R as _}from"./index-Dd1FzYQF.js";import{R as De}from"./CheckCircleOutlined-eJc7nheY.js";import{s as w}from"./index-DBkC0DaV.js";import{L as J,R as Be,a as Oe,b as Pe}from"./MenuUnfoldOutlined-DerW4lH3.js";import{R as _e}from"./SyncOutlined-B7gjisF2.js";import{A as Ue}from"./index-C0uBpE0j.js";import{I as K}from"./TextArea-Dl3y1VrD.js";import{R as Z}from"./ShopOutlined-CjbywNU0.js";import{R as He}from"./ProjectOutlined-CBcPNtE6.js";import{R as Ve}from"./TrophyOutlined-Bu28ol1a.js";import{R as Ge}from"./CalculatorOutlined-Jy3W85f7.js";import{R as ee}from"./ChromeOutlined-Dt0pAK2_.js";import{R as U}from"./BarChartOutlined-DdaTVtk6.js";import"./api-W_2ufh2E.js";import"./index-Do9OUhYv.js";import"./UnstableContext-DKFbPjPy.js";import"./Overflow-Gz7ZFAqv.js";import"./PurePanel-DcW2x34y.js";import"./SearchOutlined-CyHaylvE.js";import"./extendsObject-78o_rR5W.js";import"./useBreakpoint--6XYT0_e.js";import"./Pagination-6AhiOKxV.js";import"./LeftOutlined-DGEyRIvL.js";import"./EllipsisOutlined-Bv641ndy.js";import"./ActionButton-DPGDuFxb.js";import"./Skeleton-DdNqplha.js";import"./index-BoArUKpt.js";import"./fade-pCPugiYp.js";import"./index-DiUoGV2L.js";import"./PlusOutlined-oMbGAVrA.js";import"./Input-UrGHJeeK.js";import"./index-DTiWaDVa.js";var Fe={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M518.3 459a8 8 0 00-12.6 0l-112 141.7a7.98 7.98 0 006.3 12.9h73.9V856c0 4.4 3.6 8 8 8h60c4.4 0 8-3.6 8-8V613.7H624c6.7 0 10.4-7.7 6.3-12.9L518.3 459z"}},{tag:"path",attrs:{d:"M811.4 366.7C765.6 245.9 648.9 160 512.2 160S258.8 245.8 213 366.6C127.3 389.1 64 467.2 64 560c0 110.5 89.5 200 199.9 200H304c4.4 0 8-3.6 8-8v-60c0-4.4-3.6-8-8-8h-40.1c-33.7 0-65.4-13.4-89-37.7-23.5-24.2-36-56.8-34.9-90.6.9-26.4 9.9-51.2 26.2-72.1 16.7-21.3 40.1-36.8 66.1-43.7l37.9-9.9 13.9-36.6c8.6-22.8 20.6-44.1 35.7-63.4a245.6 245.6 0 0152.4-49.9c41.1-28.9 89.5-44.2 140-44.2s98.9 15.3 140 44.2c19.9 14 37.5 30.8 52.4 49.9 15.1 19.3 27.1 40.7 35.7 63.4l13.8 36.5 37.8 10C846.1 454.5 884 503.8 884 560c0 33.1-12.9 64.3-36.3 87.7a123.07 123.07 0 01-87.6 36.3H720c-4.4 0-8 3.6-8 8v60c0 4.4 3.6 8 8 8h40.1C870.5 760 960 670.5 960 560c0-92.7-63.1-170.7-148.6-193.3z"}}]},name:"cloud-upload",theme:"outlined"},Je=function(d,o){return n.createElement(K,W({},d,{ref:o,icon:Fe}))},We=n.forwardRef(Je),qe={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M924.8 385.6a446.7 446.7 0 00-96-142.4 446.7 446.7 0 00-142.4-96C631.1 123.8 572.5 112 512 112s-119.1 11.8-174.4 35.2a446.7 446.7 0 00-142.4 96 446.7 446.7 0 00-96 142.4C75.8 440.9 64 499.5 64 560c0 132.7 58.3 257.7 159.9 343.1l1.7 1.4c5.8 4.8 13.1 7.5 20.6 7.5h531.7c7.5 0 14.8-2.7 20.6-7.5l1.7-1.4C901.7 817.7 960 692.7 960 560c0-60.5-11.9-119.1-35.2-174.4zM761.4 836H262.6A371.12 371.12 0 01140 560c0-99.4 38.7-192.8 109-263 70.3-70.3 163.7-109 263-109 99.4 0 192.8 38.7 263 109 70.3 70.3 109 163.7 109 263 0 105.6-44.5 205.5-122.6 276zM623.5 421.5a8.03 8.03 0 00-11.3 0L527.7 506c-18.7-5-39.4-.2-54.1 14.5a55.95 55.95 0 000 79.2 55.95 55.95 0 0079.2 0 55.87 55.87 0 0014.5-54.1l84.5-84.5c3.1-3.1 3.1-8.2 0-11.3l-28.3-28.3zM490 320h44c4.4 0 8-3.6 8-8v-80c0-4.4-3.6-8-8-8h-44c-4.4 0-8 3.6-8 8v80c0 4.4 3.6 8 8 8zm260 218v44c0 4.4 3.6 8 8 8h80c4.4 0 8-3.6 8-8v-44c0-4.4-3.6-8-8-8h-80c-4.4 0-8 3.6-8 8zm12.7-197.2l-31.1-31.1a8.03 8.03 0 00-11.3 0l-56.6 56.6a8.03 8.03 0 000 11.3l31.1 31.1c3.1 3.1 8.2 3.1 11.3 0l56.6-56.6c3.1-3.1 3.1-8.2 0-11.3zm-458.6-31.1a8.03 8.03 0 00-11.3 0l-31.1 31.1a8.03 8.03 0 000 11.3l56.6 56.6c3.1 3.1 8.2 3.1 11.3 0l31.1-31.1c3.1-3.1 3.1-8.2 0-11.3l-56.6-56.6zM262 530h-80c-4.4 0-8 3.6-8 8v44c0 4.4 3.6 8 8 8h80c4.4 0 8-3.6 8-8v-44c0-4.4-3.6-8-8-8z"}}]},name:"dashboard",theme:"outlined"},Ke=function(d,o){return n.createElement(K,W({},d,{ref:o,icon:qe}))},te=n.forwardRef(Ke),Ye={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M888 792H200V168c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v688c0 4.4 3.6 8 8 8h752c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM305.8 637.7c3.1 3.1 8.1 3.1 11.3 0l138.3-137.6L583 628.5c3.1 3.1 8.2 3.1 11.3 0l275.4-275.3c3.1-3.1 3.1-8.2 0-11.3l-39.6-39.6a8.03 8.03 0 00-11.3 0l-230 229.9L461.4 404a8.03 8.03 0 00-11.3 0L266.3 586.7a8.03 8.03 0 000 11.3l39.5 39.7z"}}]},name:"line-chart",theme:"outlined"},Qe=function(d,o){return n.createElement(K,W({},d,{ref:o,icon:Ye}))},Xe=n.forwardRef(Qe);const{Text:H,Paragraph:Ze}=q,et={DEADLINE_APPROACHING:{icon:e.jsx(Ie,{}),color:"warning"},DEADLINE_OVERDUE:{icon:e.jsx(re,{}),color:"error"},SAMPLE_NOT_RECEIVED:{icon:e.jsx(D,{}),color:"processing"},RESULT_NOT_RECORDED:{icon:e.jsx(le,{}),color:"default"}},tt=({style:i})=>{const d=oe(),[o,m]=n.useState(0),[j,g]=n.useState([]),[I,r]=n.useState(!1),[y,l]=n.useState(!1),c=n.useCallback(async()=>{try{const s=await ve();s.success&&s.data&&m(s.data.count)}catch(s){console.error("åŠ è½½æœªè¯»æ•°é‡å¤±è´¥:",s)}},[]),u=n.useCallback(async()=>{r(!0);try{const s=await be({page:1,pageSize:5,isRead:!1});s.success&&s.data&&g(s.data.data)}catch(s){console.error("åŠ è½½é€šçŸ¥å¤±è´¥:",s)}finally{r(!1)}},[]);n.useEffect(()=>{c();const s=setInterval(c,6e4);return()=>clearInterval(s)},[c]),n.useEffect(()=>{y&&u()},[y,u]);const v=async(s,f)=>{f.stopPropagation();try{(await Re(s)).success&&(g(p=>p.map(R=>R.id===s?{...R,isRead:!0}:R)),m(p=>Math.max(0,p-1)))}catch(x){console.error("æ ‡è®°å·²è¯»å¤±è´¥:",x)}},t=async()=>{try{(await Se()).success&&(g(f=>f.map(x=>({...x,isRead:!0}))),m(0))}catch(s){console.error("æ ‡è®°å…¨éƒ¨å·²è¯»å¤±è´¥:",s)}},z=()=>{l(!1),d("/notifications")},L=s=>{const f=new Date(s),p=new Date().getTime()-f.getTime(),R=Math.floor(p/6e4),A=Math.floor(p/36e5);return R<1?"åˆšåˆš":R<60?`${R}åˆ†é’Ÿå‰`:A<24?`${A}å°æ—¶å‰`:f.toLocaleDateString("zh-CN")},k=s=>et[s]||{icon:e.jsx(F,{}),color:"default"},h=e.jsxs("div",{style:{width:360,backgroundColor:"#fff",borderRadius:6,boxShadow:"0 6px 16px 0 rgba(0, 0, 0, 0.08)"},children:[e.jsxs("div",{style:{padding:"12px 16px",borderBottom:"1px solid #f0f0f0",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsx(H,{strong:!0,children:"é€šçŸ¥"}),o>0&&e.jsx(C,{type:"link",size:"small",onClick:t,children:"å…¨éƒ¨å·²è¯»"})]}),e.jsx(V,{spinning:I,children:j.length===0?e.jsx(B,{image:B.PRESENTED_IMAGE_SIMPLE,description:"æš‚æ— æœªè¯»é€šçŸ¥",style:{padding:"24px 0"}}):e.jsx(O,{dataSource:j,renderItem:s=>{const f=k(s.type);return e.jsx(O.Item,{style:{padding:"12px 16px",cursor:"pointer",backgroundColor:s.isRead?"transparent":"#f6ffed"},onClick:x=>!s.isRead&&v(s.id,x),children:e.jsx(O.Item.Meta,{avatar:e.jsx(G,{color:f.color,style:{margin:0},children:f.icon}),title:e.jsx(S,{children:e.jsx(H,{strong:!s.isRead,style:{fontSize:13},ellipsis:!0,children:s.title})}),description:e.jsxs("div",{children:[e.jsx(Ze,{style:{marginBottom:4,fontSize:12,color:"#666"},ellipsis:{rows:1},children:s.content}),e.jsx(H,{type:"secondary",style:{fontSize:11},children:L(s.createdAt)})]})})})}})}),e.jsx("div",{style:{padding:"8px 16px",borderTop:"1px solid #f0f0f0",textAlign:"center"},children:e.jsx(C,{type:"link",onClick:z,children:"æŸ¥çœ‹å…¨éƒ¨é€šçŸ¥"})})]});return e.jsx(ie,{dropdownRender:()=>h,trigger:["click"],open:y,onOpenChange:l,placement:"bottomRight",children:e.jsx(Ce,{count:o,size:"small",style:i,children:e.jsx(F,{style:{fontSize:18,cursor:"pointer"}})})})},{Text:b,Title:se,Paragraph:ne}=q,st=({visible:i,onCancel:d,onSuccess:o})=>{const[m,j]=n.useState(!1),[g,I]=n.useState([]),[r,y]=n.useState(null),[l,c]=n.useState(""),[u,v]=n.useState(!1),[t,z]=n.useState(!1),[L,k]=n.useState("list"),[h,s]=n.useState(null),[f,x]=n.useState(!1),[p,R]=n.useState(!1),A=async()=>{j(!0);try{const a=await ce();I(a)}catch(a){console.error("åŠ è½½é‚€è¯·å¤±è´¥",a)}finally{j(!1)}};n.useEffect(()=>{i&&(A(),k("list"),y(null),c(""),v(!1),s(null))},[i]);const de=async a=>{y(a),k("confirm"),x(!0);try{const E=await ke();s(E)}catch(E){console.error("åŠ è½½å¤‡ä»½æ±‡æ€»å¤±è´¥",E)}finally{x(!1)}},pe=async()=>{R(!0);try{await ze(),w.success("æ•°æ®å¤‡ä»½å·²å¼€å§‹ä¸‹è½½")}catch(a){w.error(a.message||"ä¸‹è½½å¤±è´¥")}finally{R(!1)}},me=async()=>{if(r){if(l.toUpperCase()!==r.code){w.error("é‚€è¯·ç ä¸æ­£ç¡®");return}z(!0);try{await Ee(r.code,u),w.success("æ‚¨å·²æˆåŠŸåŠ å…¥å“ç‰Œï¼æ­£åœ¨åˆ·æ–°é¡µé¢..."),setTimeout(()=>{window.location.reload()},1e3)}catch(a){w.error(a.message||"åŠ å…¥å¤±è´¥"),z(!1)}}},fe=async a=>{try{await Ne(a),w.success("å·²æ‹’ç»è¯¥é‚€è¯·"),A()}catch(E){w.error(E.message||"æ“ä½œå¤±è´¥")}},ue=()=>e.jsx(V,{spinning:m,children:g.length>0?e.jsxs(S,{direction:"vertical",style:{width:"100%"},size:"middle",children:[e.jsx(Y,{message:"æ‚¨æ”¶åˆ°äº†å“ç‰Œé‚€è¯·",description:"é€‰æ‹©ä¸€ä¸ªé‚€è¯·å¹¶ç¡®è®¤é‚€è¯·ç åŽå³å¯åŠ å…¥å¯¹åº”å“ç‰Œ",type:"info",showIcon:!0}),g.map(a=>e.jsx(P,{size:"small",hoverable:!0,onClick:()=>de(a),style:{cursor:"pointer"},children:e.jsxs(S,{direction:"vertical",style:{width:"100%"},children:[e.jsxs(S,{children:[e.jsx(M,{style:{fontSize:20,color:"#1890ff"}}),e.jsx(se,{level:5,style:{margin:0},children:a.brandName})]}),e.jsxs("div",{children:[e.jsx(b,{type:"secondary",children:"é‚€è¯·äººï¼š"}),e.jsx(b,{children:a.inviterName})]}),e.jsxs("div",{children:[e.jsx(b,{type:"secondary",children:"æœ‰æ•ˆæœŸè‡³ï¼š"}),e.jsx(b,{children:new Date(a.expiresAt).toLocaleDateString("zh-CN")}),new Date(a.expiresAt)<new Date?e.jsx(G,{color:"red",style:{marginLeft:8},children:"å·²è¿‡æœŸ"}):e.jsx(G,{color:"green",style:{marginLeft:8},children:"æœ‰æ•ˆ"})]}),e.jsxs(S,{style:{marginTop:8},children:[e.jsx(C,{type:"primary",size:"small",children:"æŸ¥çœ‹è¯¦æƒ…"}),e.jsx(C,{size:"small",danger:!0,onClick:E=>{E.stopPropagation(),fe(a.id)},children:"æ‹’ç»"})]})]})},a.id))]}):e.jsx(B,{description:"æš‚æ— æ”¶åˆ°çš„é‚€è¯·",image:B.PRESENTED_IMAGE_SIMPLE})}),he=()=>e.jsxs(S,{direction:"vertical",style:{width:"100%"},size:"middle",children:[e.jsx(C,{type:"link",onClick:()=>k("list"),style:{padding:0},children:"â† è¿”å›žåˆ—è¡¨"}),e.jsx(P,{children:e.jsxs(S,{direction:"vertical",style:{width:"100%"},children:[e.jsxs(S,{children:[e.jsx(M,{style:{fontSize:24,color:"#1890ff"}}),e.jsx(se,{level:4,style:{margin:0},children:r==null?void 0:r.brandName})]}),e.jsx(Q,{style:{margin:"12px 0"}}),e.jsxs("div",{children:[e.jsx(b,{type:"secondary",children:"é‚€è¯·äººï¼š"}),e.jsx(b,{strong:!0,children:r==null?void 0:r.inviterName})]}),e.jsxs("div",{children:[e.jsx(b,{type:"secondary",children:"é‚€è¯·æ—¶é—´ï¼š"}),e.jsx(b,{children:r&&new Date(r.createdAt).toLocaleString("zh-CN")})]})]})}),e.jsxs("div",{children:[e.jsx(b,{strong:!0,children:"è¯·è¾“å…¥é‚€è¯·ç ç¡®è®¤åŠ å…¥ï¼š"}),e.jsx(Me,{placeholder:"è¯·è¾“å…¥8ä½é‚€è¯·ç ",value:l,onChange:a=>c(a.target.value.toUpperCase()),maxLength:8,style:{marginTop:8},size:"large"})]}),e.jsx(Y,{message:"å…³äºŽæ‚¨çš„è¾¾äººæ•°æ®",description:e.jsxs("div",{children:[e.jsx(ne,{style:{marginBottom:8},children:"åŠ å…¥å“ç‰Œå‰ï¼Œå»ºè®®å…ˆä¸‹è½½æ‚¨å½“å‰å·¥ä½œåŒºçš„æ•°æ®å¤‡ä»½ï¼š"}),f?e.jsx(V,{size:"small"}):h&&e.jsxs(P,{size:"small",style:{marginBottom:12,background:"#fafafa"},children:[e.jsxs(X,{gutter:[8,8],children:[e.jsx(N,{span:6,children:e.jsx(T,{title:"æ ·å“",value:h.sampleCount,valueStyle:{fontSize:16}})}),e.jsx(N,{span:6,children:e.jsx(T,{title:"è¾¾äºº",value:h.influencerCount,prefix:e.jsx($,{}),valueStyle:{fontSize:16}})}),e.jsx(N,{span:6,children:e.jsx(T,{title:"åˆä½œ",value:h.collaborationCount,prefix:e.jsx(le,{}),valueStyle:{fontSize:16}})}),e.jsx(N,{span:6,children:e.jsx(T,{title:"åˆä½œç»“æžœ",value:h.resultCount,valueStyle:{fontSize:16}})})]}),e.jsxs(X,{gutter:[8,8],style:{marginTop:8},children:[e.jsx(N,{span:6,children:e.jsx(T,{title:"åˆ†ç»„",value:h.groupCount,valueStyle:{fontSize:16}})}),e.jsx(N,{span:6,children:e.jsx(T,{title:"å¯„æ ·",value:h.dispatchCount,prefix:e.jsx(Le,{}),valueStyle:{fontSize:16}})}),e.jsx(N,{span:6,children:e.jsx(T,{title:"è·Ÿè¿›",value:h.followUpCount,prefix:e.jsx(Ae,{}),valueStyle:{fontSize:16}})}),e.jsx(N,{span:6})]}),e.jsx(C,{type:"primary",icon:e.jsx($e,{}),onClick:pe,loading:p,style:{marginTop:12,width:"100%"},ghost:!0,children:"ä¸‹è½½å®Œæ•´æ•°æ®å¤‡ä»½ (8ä¸ªSheet)"})]}),e.jsx(Q,{style:{margin:"12px 0"}}),e.jsx(ne,{style:{marginBottom:8},children:"æ‚¨å¯ä»¥é€‰æ‹©å¦‚ä½•å¤„ç†å½“å‰ä¸ªäººå·¥ä½œåŒºçš„è¾¾äººæ•°æ®ï¼š"}),e.jsx(_.Group,{value:u,onChange:a=>v(a.target.value),children:e.jsxs(S,{direction:"vertical",children:[e.jsxs(_,{value:!0,children:["è¿ç§»åˆ°æ–°å“ç‰Œï¼ˆæŽ¨èï¼‰",e.jsx(b,{type:"secondary",style:{marginLeft:8},children:"æ‚¨çš„è¾¾äººæ•°æ®å°†è½¬ç§»åˆ°æ–°å“ç‰Œ"})]}),e.jsxs(_,{value:!1,children:["ä¸è¿ç§»",e.jsx(b,{type:"secondary",style:{marginLeft:8},children:"ä¿ç•™åœ¨ä¸ªäººå·¥ä½œåŒº"})]})]})})]}),type:"warning",showIcon:!0,icon:e.jsx(re,{})}),e.jsxs(S,{style:{width:"100%",justifyContent:"flex-end"},children:[e.jsx(C,{onClick:()=>k("list"),children:"å–æ¶ˆ"}),e.jsx(C,{type:"primary",icon:e.jsx(De,{}),loading:t,onClick:me,disabled:l.length!==8,children:"ç¡®è®¤åŠ å…¥"})]})]});return e.jsx(Te,{title:e.jsxs(S,{children:[e.jsx(M,{}),"åŠ å…¥å“ç‰Œ"]}),open:i,onCancel:d,footer:null,width:500,children:L==="list"?ue():he()})},{Header:nt,Sider:at,Content:ot}=J,{Text:ae}=q,rt=(i,d=!1,o)=>{const m=[{key:"/app/dashboard",icon:e.jsx(te,{}),label:"å·¥ä½œå°"}],j=[{key:"/app/influencer-square",icon:e.jsx(Z,{}),label:"è¾¾äººå¹¿åœº"},{key:"/app/influencers",icon:e.jsx(M,{}),label:"è¾¾äººç®¡ç†"},{key:"/app/pipeline",icon:e.jsx(He,{}),label:"åˆä½œç®¡é“"},{key:"/app/results",icon:e.jsx(Ve,{}),label:"åˆä½œç»“æžœ"},{key:"/app/follow-up-analytics",icon:e.jsx(Xe,{}),label:"è·Ÿè¿›åˆ†æž"},{key:"/app/roi-calculator",icon:e.jsx(Ge,{}),label:"ROI æµ‹ç®—"},{key:"/app/plugin",icon:e.jsx(ee,{}),label:"æ’ä»¶ä½¿ç”¨"}],g=[{key:"/app/samples",icon:e.jsx(D,{}),label:"æ ·å“ç®¡ç†"},{key:"/app/reports",icon:e.jsx(U,{}),label:"æ•°æ®æŠ¥è¡¨"},{key:"/app/team",icon:e.jsx(M,{}),label:"å›¢é˜Ÿç®¡ç†"}],I=[{key:"/app/admin",icon:e.jsx(te,{}),label:"å¹³å°ç®¡ç†"},{key:"/app/admin/overview",icon:e.jsx(U,{}),label:"æ•°æ®æ¦‚è§ˆ"},{key:"/app/admin/factories",icon:e.jsx(Z,{}),label:"å“ç‰Œç®¡ç†"},{key:"/app/admin/independent",icon:e.jsx($,{}),label:"ç‹¬ç«‹å•†åŠ¡"},{key:"/app/admin/influencers",icon:e.jsx(M,{}),label:"è¾¾äººç®¡ç†"},{key:"/app/admin/collection",icon:e.jsx(We,{}),label:"è¾¾äººå…¥åº“"},{key:"/app/admin/users",icon:e.jsx($,{}),label:"ç”¨æˆ·ç®¡ç†"},{key:"/app/admin/notification-settings",icon:e.jsx(F,{}),label:"æ¶ˆæ¯è®¾ç½®"},{key:"/app/admin/plugin",icon:e.jsx(ee,{}),label:"æ’ä»¶ä½¿ç”¨"}],r=[{key:"/app/samples",icon:e.jsx(D,{}),label:"æ ·å“ç®¡ç†"}],y=()=>{var u,v;const c=[];return(u=o==null?void 0:o.operations)!=null&&u.manageSamples&&c.push({key:"/app/samples",icon:e.jsx(D,{}),label:"æ ·å“ç®¡ç†"}),(v=o==null?void 0:o.advanced)!=null&&v.viewCostData&&c.push({key:"/app/reports",icon:e.jsx(U,{}),label:"æ•°æ®æŠ¥è¡¨"}),c};let l;switch(i){case"PLATFORM_ADMIN":l=[...I];break;case"BRAND":l=[...m,...j,...g];break;case"BUSINESS":if(d)l=[...m,...j,...r];else{const c=y();l=[...m,...j,...c]}break;default:l=m}return console.log("ðŸ” getMenuItems role:",i,"isIndependent:",d,"permissions:",o,"returning:",l),l},ms=()=>{const[i,d]=n.useState(!1),[o,m]=n.useState(!1),[j,g]=n.useState(!1),[I,r]=n.useState(0),y=oe(),l=xe(),c=l.pathname.startsWith("/app/admin"),u=je(),v=ge(),t=c?v.user:u.user,z=c?v.token:u.token,L=c?v.logout:u.logout,k=c?"/admin/login":"/login";n.useEffect(()=>{(t==null?void 0:t.role)==="BUSINESS"&&(t!=null&&t.isIndependent)&&ce().then(p=>r(p.length)).catch(()=>r(0))},[t==null?void 0:t.role,t==null?void 0:t.isIndependent]);const h=({key:p})=>{y(p)},s=()=>{L(),y(k)},f=async()=>{if(!z){w.error("æœªæ‰¾åˆ°ç™»å½•ä»¤ç‰Œ");return}m(!0);try{await navigator.clipboard.writeText(z.accessToken),w.success({content:e.jsxs("div",{children:[e.jsx("div",{children:"âœ… Token å·²å¤åˆ¶åˆ°å‰ªè´´æ¿ï¼"}),e.jsx("div",{style:{fontSize:12,marginTop:4,color:"#666"},children:'è¯·æ‰“å¼€ Chrome æ’ä»¶ â†’ ç‚¹å‡»"è®¾ç½®" â†’ ç²˜è´´åˆ°"ç™»å½•ä»¤ç‰Œ"è¾“å…¥æ¡† â†’ ä¿å­˜'})]}),duration:5}),console.log("âœ… Token å·²å¤åˆ¶ï¼Œå½“å‰ç”¨æˆ·:",t==null?void 0:t.name)}catch(p){console.error("å¤åˆ¶å¤±è´¥:",p),w.error("å¤åˆ¶å¤±è´¥ï¼Œè¯·æ‰‹åŠ¨å¤åˆ¶")}finally{m(!1)}},x=[{key:"profile",icon:e.jsx($,{}),label:"ä¸ªäººè®¾ç½®"},{type:"divider"},{key:"logout",icon:e.jsx(Pe,{}),label:"é€€å‡ºç™»å½•",onClick:s}];return e.jsxs(J,{className:"min-h-screen bg-white",children:[e.jsxs(at,{trigger:null,collapsible:!0,collapsed:i,theme:"light",className:"border-r-0 bg-transparent !fixed h-full z-20",width:200,style:{background:"transparent",borderRight:"none"},children:[e.jsx("div",{className:"flex h-16 items-center justify-start px-4",children:e.jsx(ae,{className:"text-xl font-bold tracking-tight text-neutral-900",children:i?"ICS":"NEW BD"})}),e.jsx(we,{mode:"inline",selectedKeys:[l.pathname],items:rt((t==null?void 0:t.role)||"",(t==null?void 0:t.isIndependent)||!1,t==null?void 0:t.permissions),onClick:h,className:"bg-transparent border-r-0 px-2 space-y-1"})]}),e.jsxs(J,{className:"transition-all duration-300",style:{marginLeft:i?80:200},children:[e.jsxs(nt,{className:"sticky top-0 z-50 flex h-16 w-full items-center justify-between bg-white/70 px-8 backdrop-blur-xl border-b border-neutral-200/50 shadow-sm transition-all duration-300",children:[e.jsx("div",{className:"flex h-10 w-10 cursor-pointer items-center justify-center rounded-xl bg-white shadow-soft transition-all hover:shadow-soft-lg",onClick:()=>d(!i),children:i?e.jsx(Be,{className:"text-neutral-600"}):e.jsx(Oe,{className:"text-neutral-600"})}),e.jsxs("div",{className:"flex items-center gap-6",children:[e.jsx(C,{icon:e.jsx(_e,{}),onClick:f,loading:o,className:"rounded-full border-none bg-white shadow-soft font-medium text-neutral-600 hover:text-brand-500",children:"åŒæ­¥æ’ä»¶"}),(t==null?void 0:t.role)==="BUSINESS"&&(t==null?void 0:t.isIndependent)&&e.jsxs(C,{type:"primary",icon:e.jsx(M,{}),onClick:()=>g(!0),className:"rounded-full",children:["åŠ å…¥å“ç‰Œ ",I>0&&`(${I})`]}),e.jsx("div",{className:"h-8 w-[1px] bg-neutral-200"}),e.jsx(tt,{}),e.jsx(ie,{menu:{items:x},placement:"bottomRight",children:e.jsxs("div",{className:"flex cursor-pointer items-center gap-3 rounded-full bg-white pl-1 pr-3 py-1 shadow-soft transition-all hover:shadow-soft-lg border border-neutral-100",children:[e.jsx(Ue,{className:"bg-brand-50 text-brand-500 font-bold",icon:e.jsx($,{})}),e.jsx(ae,{className:"text-neutral-700 font-medium",children:t==null?void 0:t.name})]})})]})]}),e.jsx(ot,{className:"min-h-[280px] bg-white p-6",children:e.jsx(ye,{})})]}),e.jsx(st,{visible:j,onCancel:()=>g(!1),onSuccess:()=>{window.location.reload()}})]})};export{ms as default};
