import{e as L,r as i,u as z,j as t,S as A}from"./index-CT9F3akh.js";import{g as O,b as F}from"./influencer-portal.service-6g17WHCp.js";import{C as f,a as y}from"./Card-D9YXdlEe.js";import{s as j}from"./index-DBkC0DaV.js";import{T as N}from"./index-WSGRBNKI.js";import{S as c}from"./index-B4IHrhqI.js";import{S as p,E as R}from"./index-DfnzXlZl.js";import{F as B}from"./Table-pvERNZVb.js";import{R as U}from"./TeamOutlined-Bai9oLhN.js";import{T as H}from"./index-DnlS8_jt.js";import{B as u}from"./index-6l5o2ZFH.js";import"./UnstableContext-DKFbPjPy.js";import"./TextArea-Dl3y1VrD.js";import"./Overflow-Gz7ZFAqv.js";import"./PurePanel-DcW2x34y.js";import"./SearchOutlined-CyHaylvE.js";import"./index-Dd1FzYQF.js";import"./index-Do9OUhYv.js";import"./Input-UrGHJeeK.js";import"./index-BndKrrhJ.js";import"./LeftOutlined-DGEyRIvL.js";import"./button-BCSOJgfZ.js";import"./EllipsisOutlined-Bv641ndy.js";import"./useBreakpoint--6XYT0_e.js";import"./Pagination-6AhiOKxV.js";import"./extendsObject-78o_rR5W.js";const{Title:M,Text:n}=N,b={LEAD:"线索达人",CONTACTED:"已联系",QUOTED:"已报价",SAMPLED:"已寄样",SCHEDULED:"已排期",PUBLISHED:"已发布",REVIEWED:"已复盘"},P={LEAD:"default",CONTACTED:"blue",QUOTED:"cyan",SAMPLED:"purple",SCHEDULED:"orange",PUBLISHED:"green",REVIEWED:"gold"},me=()=>{const{theme:g}=L(),[m,h]=i.useState(!0),[s,w]=i.useState(null),[C,v]=i.useState([]),[o,E]=i.useState({}),D=z();i.useEffect(()=>{S(),x()},[]);const S=async()=>{try{const e=await O();e.success&&e.data&&v(e.data)}catch(e){console.error("加载工厂列表失败",e)}},x=async e=>{var r;h(!0);try{const a=await F(e||o);a.success&&a.data?w(a.data):j.error(((r=a.error)==null?void 0:r.message)||"加载失败")}catch{j.error("加载失败，请稍后重试")}finally{h(!1)}},d=(e,r)=>{const a={...o,[e]:r};E(a),x(a)},T=(e,r)=>{if(!e)return null;const a=new Date(e),k=new Date,l=Math.ceil((a.getTime()-k.getTime())/(1e3*60*60*24));return r?t.jsx(u,{status:"error",text:t.jsxs(n,{type:"danger",children:["已超期 ",Math.abs(l)," 天"]})}):l<=3?t.jsx(u,{status:"warning",text:t.jsxs(n,{type:"warning",children:["剩余 ",l," 天"]})}):t.jsx(u,{status:"processing",text:t.jsxs(n,{children:["剩余 ",l," 天"]})})},I=[{title:"工厂",dataIndex:"factoryName",key:"factoryName",render:e=>t.jsxs(c,{children:[t.jsx(U,{style:{color:"#722ed1"}}),t.jsx("span",{children:e})]})},{title:"合作阶段",dataIndex:"stage",key:"stage",width:120,render:e=>t.jsx(H,{color:P[e]||"default",children:b[e]||e})},{title:"样品数量",dataIndex:"sampleCount",key:"sampleCount",width:100,render:e=>`${e} 件`},{title:"截止时间",key:"deadline",width:150,render:(e,r)=>r.deadline?t.jsxs(c,{direction:"vertical",size:0,children:[t.jsx(n,{children:new Date(r.deadline).toLocaleDateString("zh-CN")}),T(r.deadline,r.isOverdue)]}):t.jsx(n,{type:"secondary",children:"未设置"})},{title:"创建时间",dataIndex:"createdAt",key:"createdAt",width:120,render:e=>new Date(e).toLocaleDateString("zh-CN")},{title:"操作",key:"action",width:100,render:(e,r)=>t.jsx("a",{onClick:()=>D(`/influencer-portal/collaborations/${r.id}`),children:"查看详情"})}];return m&&!s?t.jsx("div",{style:{textAlign:"center",padding:100},children:t.jsx(A,{size:"large"})}):t.jsxs("div",{style:{minHeight:"100vh",background:`linear-gradient(135deg, ${g.colors.background.secondary} 0%, ${g.colors.background.tertiary} 100%)`,position:"relative",padding:"24px",margin:"-24px"},children:[t.jsx("div",{style:{position:"absolute",top:"10%",left:"5%",width:"400px",height:"400px",background:"linear-gradient(135deg, rgba(90, 200, 250, 0.08), rgba(191, 90, 242, 0.08))",borderRadius:"50%",filter:"blur(80px)",pointerEvents:"none",zIndex:0}}),t.jsx("div",{style:{position:"absolute",top:"40%",right:"10%",width:"500px",height:"500px",background:"linear-gradient(135deg, rgba(255, 107, 107, 0.08), rgba(255, 217, 61, 0.08))",borderRadius:"50%",filter:"blur(100px)",pointerEvents:"none",zIndex:0}}),t.jsxs("div",{style:{position:"relative",zIndex:1},children:[t.jsx(M,{level:4,style:{marginBottom:24},children:"合作进度"}),t.jsx(f,{variant:"elevated",style:{marginBottom:16},children:t.jsx(y,{children:t.jsxs(c,{wrap:!0,children:[t.jsx(p,{placeholder:"选择工厂",allowClear:!0,style:{width:200},value:o.brandId,onChange:e=>d("brandId",e),options:C.map(e=>({label:e.name,value:e.id}))}),t.jsx(p,{placeholder:"合作阶段",allowClear:!0,style:{width:120},value:o.stage,onChange:e=>d("stage",e),options:Object.entries(b).map(([e,r])=>({label:r,value:e}))}),t.jsx(p,{placeholder:"超期状态",allowClear:!0,style:{width:120},value:o.isOverdue,onChange:e=>d("isOverdue",e),options:[{label:"已超期",value:!0},{label:"未超期",value:!1}]})]})})}),t.jsx(f,{variant:"elevated",children:t.jsx(y,{children:s&&s.items.length>0?t.jsx(B,{dataSource:s.items,columns:I,rowKey:"id",loading:m,pagination:{total:s.total,showTotal:e=>`共 ${e} 条合作记录`,showSizeChanger:!0,pageSizeOptions:["10","20","50"]}}):t.jsx(R,{description:"暂无合作记录"})})})]})]})};export{me as default};
