import{aK as P,aC as F,r as n,v as E,G as H,h as y,t as x,C as N,T as U,l as V,R as g,ap as G,aj as M,W as K}from"./index-CT9F3akh.js";import{a2 as J}from"./TextArea-Dl3y1VrD.js";import{u as Q}from"./UnstableContext-DKFbPjPy.js";const X=e=>{const{componentCls:o,colorPrimary:t}=e;return{[o]:{position:"absolute",background:"transparent",pointerEvents:"none",boxSizing:"border-box",color:`var(--wave-color, ${t})`,boxShadow:"0 0 0 0 currentcolor",opacity:.2,"&.wave-motion-appear":{transition:[`box-shadow 0.4s ${e.motionEaseOutCirc}`,`opacity 2s ${e.motionEaseOutCirc}`].join(","),"&-active":{boxShadow:"0 0 0 6px currentcolor",opacity:0},"&.wave-quick":{transition:[`box-shadow ${e.motionDurationSlow} ${e.motionEaseInOut}`,`opacity ${e.motionDurationSlow} ${e.motionEaseInOut}`].join(",")}}}}},Y=P("Wave",X),W=`${F}-wave-target`;function Z(e){return e&&e!=="#fff"&&e!=="#ffffff"&&e!=="rgb(255, 255, 255)"&&e!=="rgba(255, 255, 255, 1)"&&!/rgba\((?:\d*, ){3}0\)/.test(e)&&e!=="transparent"&&e!=="canvastext"}function ee(e){var o;const{borderTopColor:t,borderColor:r,backgroundColor:a}=getComputedStyle(e);return(o=[t,r,a].find(Z))!==null&&o!==void 0?o:null}function R(e){return Number.isNaN(e)?0:e}const te=e=>{const{className:o,target:t,component:r,registerUnmount:a}=e,c=n.useRef(null),l=n.useRef(null);n.useEffect(()=>{l.current=a()},[]);const[d,C]=n.useState(null),[f,s]=n.useState([]),[v,m]=n.useState(0),[T,L]=n.useState(0),[$,O]=n.useState(0),[k,_]=n.useState(0),[A,D]=n.useState(!1),w={left:v,top:T,width:$,height:k,borderRadius:f.map(u=>`${u}px`).join(" ")};d&&(w["--wave-color"]=d);function S(){const u=getComputedStyle(t);C(ee(t));const i=u.position==="static",{borderLeftWidth:p,borderTopWidth:b}=u;m(i?t.offsetLeft:R(-Number.parseFloat(p))),L(i?t.offsetTop:R(-Number.parseFloat(b))),O(t.offsetWidth),_(t.offsetHeight);const{borderTopLeftRadius:h,borderTopRightRadius:I,borderBottomLeftRadius:q,borderBottomRightRadius:z}=u;s([h,I,z,q].map(B=>R(Number.parseFloat(B))))}if(n.useEffect(()=>{if(t){const u=E(()=>{S(),D(!0)});let i;return typeof ResizeObserver<"u"&&(i=new ResizeObserver(S),i.observe(t)),()=>{E.cancel(u),i==null||i.disconnect()}}},[t]),!A)return null;const j=(r==="Checkbox"||r==="Radio")&&(t==null?void 0:t.classList.contains(W));return n.createElement(H,{visible:!0,motionAppear:!0,motionName:"wave-motion",motionDeadline:5e3,onAppearEnd:(u,i)=>{var p,b;if(i.deadline||i.propertyName==="opacity"){const h=(p=c.current)===null||p===void 0?void 0:p.parentElement;(b=l.current)===null||b===void 0||b.call(l).then(()=>{h==null||h.remove()})}return!1}},({className:u},i)=>n.createElement("div",{ref:x(c,i),className:y(o,u,{"wave-quick":j}),style:w}))},oe=(e,o)=>{var t;const{component:r}=o;if(r==="Checkbox"&&!(!((t=e.querySelector("input"))===null||t===void 0)&&t.checked))return;const a=document.createElement("div");a.style.position="absolute",a.style.left="0px",a.style.top="0px",e==null||e.insertBefore(a,e==null?void 0:e.firstChild);const c=Q();let l=null;function d(){return l}l=c(n.createElement(te,Object.assign({},o,{target:e,registerUnmount:d})),a)},ne=(e,o,t)=>{const{wave:r}=n.useContext(N),[,a,c]=U(),l=V(f=>{const s=e.current;if(r!=null&&r.disabled||!s)return;const v=s.querySelector(`.${W}`)||s,{showEffect:m}=r||{};(m||oe)(v,{className:o,token:a,component:t,event:f,hashId:c})}),d=n.useRef(null);return f=>{E.cancel(d.current),d.current=E(()=>{l(f)})}},ie=e=>{const{children:o,disabled:t,component:r}=e,{getPrefixCls:a}=n.useContext(N),c=n.useRef(null),l=a("wave"),[,d]=Y(l),C=ne(c,y(l,d),r);if(g.useEffect(()=>{const s=c.current;if(!s||s.nodeType!==window.Node.ELEMENT_NODE||t)return;const v=m=>{!J(m.target)||!s.getAttribute||s.getAttribute("disabled")||s.disabled||s.className.includes("disabled")&&!s.className.includes("disabled:")||s.getAttribute("aria-disabled")==="true"||s.className.includes("-leave")||C(m)};return s.addEventListener("click",v,!0),()=>{s.removeEventListener("click",v,!0)}},[t]),!g.isValidElement(o))return o??null;const f=G(o)?x(M(o),c):c;return K(o,{ref:f})};export{W as T,ie as W};
