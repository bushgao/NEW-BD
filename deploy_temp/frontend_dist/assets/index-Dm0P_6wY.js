import{r as g,x as tt,y as nt,A as U,z as rt,B as $t,h as ze,M as Pt,N as Nt,P as Le,Q as De,i as $,R as A,p as At,m as at,f as kt,k as Tt,_ as Ie,S as xe,F as zt,T as Lt,C as Dt,j as e,e as Ot}from"./index-CT9F3akh.js";import{a as se}from"./api-W_2ufh2E.js";import{C as de,a as ue}from"./Card-D9YXdlEe.js";import{F as k}from"./index-gbW5J2sR.js";import{M as Me}from"./index-CxrQydPb.js";import{I as he}from"./index-htVVH06X.js";import{s as T}from"./index-DBkC0DaV.js";import{l as Bt,c as Ft,e as Vt,s as _t,f as Ut}from"./invitation.service-CM1HH-Kp.js";import{T as He}from"./index-DiUoGV2L.js";import{F as Qe,u as Ge,k as st,w as Ht,I as Ye}from"./TextArea-Dl3y1VrD.js";import{R as it}from"./UserAddOutlined-BtszauH8.js";import{D as be}from"./index-N65tUqUy.js";import{L as fe}from"./index-B-vfV2rY.js";import{S as ee}from"./index-B4IHrhqI.js";import{T as We,a as Xe}from"./index-WSGRBNKI.js";import{T as te}from"./index-DnlS8_jt.js";import{B as W}from"./button-BCSOJgfZ.js";import{P as ot}from"./index-C7D5ByUV.js";import{R as lt}from"./StopOutlined-FlFjzpVr.js";import{S as ct,E as Yt}from"./index-DfnzXlZl.js";import{R as dt}from"./ReloadOutlined-C8FTNWWf.js";import{p as Wt}from"./UnstableContext-DKFbPjPy.js";import{A as pe}from"./index-C7lyzjCv.js";import{R as Qt}from"./PhoneOutlined-CErfRUZT.js";import{C as F}from"./index-DSHlf2Aa.js";import{R as Gt}from"./SendOutlined-be91IxK6.js";import{R as Re}from"./CheckCircleOutlined-eJc7nheY.js";import{R as Xt}from"./CloseCircleOutlined-D2hdQaev.js";import{r as ut}from"./report.service-DH8L8GH2.js";import{R as Ee,C as _}from"./row-DVjUYxl3.js";import{P as _e}from"./progress-CYBat26e.js";import{S as X}from"./index-C_yDWHqX.js";import{R as Kt}from"./ClockCircleOutlined-DAoco557.js";import{R as ht}from"./DollarOutlined-CsSd3YX1.js";import{R as qt}from"./ThunderboltOutlined-A_BXyZeD.js";import{R as Zt}from"./BulbOutlined-DzSz1Ne2.js";import{bR as Jt,bY as en,bS as tn,bT as nn,bU as rn,bV as an,bW as sn,bZ as Se}from"./LineChart-5Z0oInXq.js";import{R as on}from"./RiseOutlined-BfYH29d9.js";import{R as ln}from"./FallOutlined-BrNBN5A1.js";import{i as cn,g as dn,a as un,R as hn,b as fn,d as mn,c as gn}from"./CalendarOutlined-6RDrkSku.js";import{B as Ae}from"./index-6l5o2ZFH.js";import"./Overflow-Gz7ZFAqv.js";import{G as vn,B as Ke,R as qe}from"./index-Dd1FzYQF.js";import{D as we}from"./index-BIA-WqSn.js";import{R as pn}from"./TeamOutlined-Bai9oLhN.js";import{R as xn}from"./ProjectOutlined-CBcPNtE6.js";import{R as yn}from"./GiftOutlined-B6rzlFEA.js";import{R as jn}from"./TrophyOutlined-Bu28ol1a.js";import{C as H,F as Cn}from"./Table-pvERNZVb.js";import{R as Sn}from"./WarningOutlined-L-gPvlvp.js";import{R as wn}from"./PlusOutlined-oMbGAVrA.js";import{R as bn}from"./UserOutlined-C5ACOCTv.js";import{R as Rn}from"./DeleteOutlined-TK3JP8uX.js";import"./Input-UrGHJeeK.js";import"./QuestionCircleOutlined-CZssou_a.js";import"./ActionButton-DPGDuFxb.js";import"./Skeleton-DdNqplha.js";import"./index-BoArUKpt.js";import"./fade-pCPugiYp.js";import"./PurePanel-DcW2x34y.js";import"./SearchOutlined-CyHaylvE.js";import"./EllipsisOutlined-Bv641ndy.js";import"./extendsObject-78o_rR5W.js";import"./useBreakpoint--6XYT0_e.js";import"./Pagination-6AhiOKxV.js";import"./LeftOutlined-DGEyRIvL.js";import"./index-Do9OUhYv.js";import"./index-DTiWaDVa.js";import"./index-BndKrrhJ.js";const En=10,In=20;function Mn(t){const{fullscreen:i,validRange:n,generateConfig:r,locale:a,prefixCls:s,value:l,onChange:o,divRef:d}=t,c=r.getYear(l||r.getNow());let u=c-En,x=u+In;n&&(u=r.getYear(n[0]),x=r.getYear(n[1])+1);const m=a&&a.year==="年"?"年":"",p=[];for(let h=u;h<x;h++)p.push({label:`${h}${m}`,value:h});return g.createElement(ct,{size:i?void 0:"small",options:p,value:c,className:`${s}-year-select`,onChange:h=>{let w=r.setYear(l,h);if(n){const[v,S]=n,I=r.getYear(w),P=r.getMonth(w);I===r.getYear(S)&&P>r.getMonth(S)&&(w=r.setMonth(w,r.getMonth(S))),I===r.getYear(v)&&P<r.getMonth(v)&&(w=r.setMonth(w,r.getMonth(v)))}o(w)},getPopupContainer:()=>d.current})}function $n(t){const{prefixCls:i,fullscreen:n,validRange:r,value:a,generateConfig:s,locale:l,onChange:o,divRef:d}=t,c=s.getMonth(a||s.getNow());let u=0,x=11;if(r){const[h,w]=r,v=s.getYear(a);s.getYear(w)===v&&(x=s.getMonth(w)),s.getYear(h)===v&&(u=s.getMonth(h))}const m=l.shortMonths||s.locale.getShortMonths(l.locale),p=[];for(let h=u;h<=x;h+=1)p.push({label:m[h],value:h});return g.createElement(ct,{size:n?void 0:"small",className:`${i}-month-select`,value:c,options:p,onChange:h=>{o(s.setMonth(a,h))},getPopupContainer:()=>d.current})}function Pn(t){const{prefixCls:i,locale:n,mode:r,fullscreen:a,onModeChange:s}=t;return g.createElement(vn,{onChange:({target:{value:l}})=>{s(l)},value:r,size:a?void 0:"small",className:`${i}-mode-switch`},g.createElement(Ke,{value:"month"},n.month),g.createElement(Ke,{value:"year"},n.year))}function Nn(t){const{prefixCls:i,fullscreen:n,mode:r,onChange:a,onModeChange:s}=t,l=g.useRef(null),o=g.useContext(Qe),d=g.useMemo(()=>Object.assign(Object.assign({},o),{isFormItemInput:!1}),[o]),c=Object.assign(Object.assign({},t),{fullscreen:n,divRef:l});return g.createElement("div",{className:`${i}-header`,ref:l},g.createElement(Qe.Provider,{value:d},g.createElement(Mn,Object.assign({},c,{onChange:u=>{a(u,"year")}})),r==="month"&&g.createElement($n,Object.assign({},c,{onChange:u=>{a(u,"month")}}))),g.createElement(Pn,Object.assign({},c,{onModeChange:s})))}const An=t=>{const{calendarCls:i,componentCls:n,fullBg:r,fullPanelBg:a,itemActiveBg:s}=t;return{[i]:Object.assign(Object.assign(Object.assign({},dn(t)),rt(t)),{background:r,"&-rtl":{direction:"rtl"},[`${i}-header`]:{display:"flex",justifyContent:"flex-end",padding:`${U(t.paddingSM)} 0`,[`${i}-year-select`]:{minWidth:t.yearControlWidth},[`${i}-month-select`]:{minWidth:t.monthControlWidth,marginInlineStart:t.marginXS},[`${i}-mode-switch`]:{marginInlineStart:t.marginXS}}}),[`${i} ${n}-panel`]:{background:a,border:0,borderTop:`${U(t.lineWidth)} ${t.lineType} ${t.colorSplit}`,borderRadius:0,[`${n}-month-panel, ${n}-date-panel`]:{width:"auto"},[`${n}-body`]:{padding:`${U(t.paddingXS)} 0`},[`${n}-content`]:{width:"100%"}},[`${i}-mini`]:{borderRadius:t.borderRadiusLG,[`${i}-header`]:{paddingInlineEnd:t.paddingXS,paddingInlineStart:t.paddingXS},[`${n}-panel`]:{borderRadius:`0 0 ${U(t.borderRadiusLG)} ${U(t.borderRadiusLG)}`},[`${n}-content`]:{height:t.miniContentHeight,th:{height:"auto",padding:0,lineHeight:U(t.weekHeight)}},[`${n}-cell::before`]:{pointerEvents:"none"}},[`${i}${i}-full`]:{[`${n}-panel`]:{display:"block",width:"100%",textAlign:"end",background:r,border:0,[`${n}-body`]:{"th, td":{padding:0},th:{height:"auto",paddingInlineEnd:t.paddingSM,paddingBottom:t.paddingXXS,lineHeight:U(t.weekHeight)}}},[`${n}-cell-week ${n}-cell-inner`]:{display:"block",borderRadius:0,borderTop:`${U(t.lineWidthBold)} ${t.lineType} ${t.colorSplit}`,width:"100%",height:t.calc(t.dateValueHeight).add(t.dateContentHeight).add(t.calc(t.paddingXS).div(2)).add(t.lineWidthBold).equal()},[`${n}-cell`]:{"&::before":{display:"none"},"&:hover":{[`${i}-date`]:{background:t.controlItemBgHover}},[`${i}-date-today::before`]:{display:"none"},[`&-in-view${n}-cell-selected`]:{[`${i}-date, ${i}-date-today`]:{background:s}},"&-selected, &-selected:hover":{[`${i}-date, ${i}-date-today`]:{[`${i}-date-value`]:{color:t.colorPrimary}}}},[`${i}-date`]:{display:"block",width:"auto",height:"auto",margin:`0 ${U(t.calc(t.marginXS).div(2).equal())}`,padding:`${U(t.calc(t.paddingXS).div(2).equal())} ${U(t.paddingXS)} 0`,border:0,borderTop:`${U(t.lineWidthBold)} ${t.lineType} ${t.colorSplit}`,borderRadius:0,transition:`background ${t.motionDurationSlow}`,"&-value":{lineHeight:U(t.dateValueHeight),transition:`color ${t.motionDurationSlow}`},"&-content":{position:"static",width:"auto",height:t.dateContentHeight,overflowY:"auto",color:t.colorText,lineHeight:t.lineHeight,textAlign:"start"},"&-today":{borderColor:t.colorPrimary,[`${i}-date-value`]:{color:t.colorText}}}},[`@media only screen and (max-width: ${U(t.screenXS)}) `]:{[i]:{[`${i}-header`]:{display:"block",[`${i}-year-select`]:{width:"50%"},[`${i}-month-select`]:{width:`calc(50% - ${U(t.paddingXS)})`},[`${i}-mode-switch`]:{width:"100%",marginTop:t.marginXS,marginInlineStart:0,"> label":{width:"50%",textAlign:"center"}}}}}}},kn=t=>Object.assign({fullBg:t.colorBgContainer,fullPanelBg:t.colorBgContainer,itemActiveBg:t.controlItemBgActive,yearControlWidth:80,monthControlWidth:70,miniContentHeight:256},un(t)),Tn=tt("Calendar",t=>{const i=`${t.componentCls}-calendar`,n=nt(t,cn(t),{calendarCls:i,pickerCellInnerCls:`${t.componentCls}-cell-inner`,dateValueHeight:t.controlHeightSM,weekHeight:t.calc(t.controlHeightSM).mul(.75).equal(),dateContentHeight:t.calc(t.calc(t.fontHeightSM).add(t.marginXS)).mul(3).add(t.calc(t.lineWidth).mul(2)).equal()});return An(n)},kn),ft=(t,i,n)=>{const{getYear:r}=n;return t&&i&&r(t)===r(i)},Ue=(t,i,n)=>{const{getMonth:r}=n;return ft(t,i,n)&&r(t)===r(i)},Ze=(t,i,n)=>{const{getDate:r}=n;return Ue(t,i,n)&&r(t)===r(i)},mt=t=>n=>{const{prefixCls:r,className:a,rootClassName:s,style:l,dateFullCellRender:o,dateCellRender:d,monthFullCellRender:c,monthCellRender:u,cellRender:x,fullCellRender:m,headerRender:p,value:h,defaultValue:w,disabledDate:v,mode:S,validRange:I,fullscreen:P=!0,showWeek:j,onChange:y,onPanelChange:b,onSelect:M}=n,{getPrefixCls:N,direction:f,className:R,style:D}=$t("calendar"),O=N("picker",r),z=`${O}-calendar`,[J,B,oe]=Tn(O,z),q=t.getNow(),[C,L]=Ge(()=>h||t.getNow(),{defaultValue:w,value:h}),[Z,le]=Ge("month",{value:S}),ce=g.useMemo(()=>Z==="year"?"month":"date",[Z]),Pe=g.useCallback(E=>(I?t.isAfter(I[0],E)||t.isAfter(E,I[1]):!1)||!!(v!=null&&v(E)),[v,I]),je=(E,V)=>{b==null||b(E,V)},Oe=E=>{L(E),Ze(E,C,t)||((ce==="date"&&!Ue(E,C,t)||ce==="month"&&!ft(E,C,t))&&je(E,Z),y==null||y(E))},Ne=E=>{le(E),je(C,E)},Ce=(E,V)=>{Oe(E),M==null||M(E,{source:V})},Be=g.useCallback((E,V)=>m?m(E,V):o?o(E):g.createElement("div",{className:ze(`${O}-cell-inner`,`${z}-date`,{[`${z}-date-today`]:Ze(q,E,t)})},g.createElement("div",{className:`${z}-date-value`},String(t.getDate(E)).padStart(2,"0")),g.createElement("div",{className:`${z}-date-content`},typeof x=="function"?x(E,V):d==null?void 0:d(E))),[q,O,z,m,o,x,d]),Rt=g.useCallback((E,V)=>{if(m)return m(E,V);if(c)return c(E);const Mt=V.locale.shortMonths||t.locale.getShortMonths(V.locale.locale);return g.createElement("div",{className:ze(`${O}-cell-inner`,`${z}-date`,{[`${z}-date-today`]:Ue(q,E,t)})},g.createElement("div",{className:`${z}-date-value`},Mt[t.getMonth(E)]),g.createElement("div",{className:`${z}-date-content`},typeof x=="function"?x(E,V):u==null?void 0:u(E)))},[q,O,z,m,c,x,u]),[Et]=st("Calendar",Pt),re=Object.assign(Object.assign({},Et),n.locale),It=(E,V)=>{if(V.type==="date")return Be(E,V);if(V.type==="month")return Rt(E,Object.assign(Object.assign({},V),{locale:re==null?void 0:re.lang}))};return J(g.createElement("div",{className:ze(z,{[`${z}-full`]:P,[`${z}-mini`]:!P,[`${z}-rtl`]:f==="rtl"},R,a,s,B,oe),style:Object.assign(Object.assign({},D),l)},p?p({value:C,type:Z,onChange:E=>{Ce(E,"customize")},onTypeChange:Ne}):g.createElement(Nn,{prefixCls:z,value:C,generateConfig:t,mode:Z,fullscreen:P,locale:re==null?void 0:re.lang,validRange:I,onChange:Ce,onModeChange:Ne}),g.createElement(hn,{value:C,prefixCls:O,locale:re==null?void 0:re.lang,generateConfig:t,cellRender:It,onSelect:E=>{Ce(E,ce)},mode:ce,picker:ce,disabledDate:Pe,hideHeader:!0,showWeek:j})))},gt=mt(fn);gt.generateCalendar=mt;function ve(t,i){var n=typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=Nt(t))||i){n&&(t=n);var r=0,a=function(){};return{s:a,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(c){throw c},f:a}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var s,l=!0,o=!1;return{s:function(){n=n.call(t)},n:function(){var c=n.next();return l=c.done,c},e:function(c){o=!0,s=c},f:function(){try{l||n.return==null||n.return()}finally{if(o)throw s}}}}var ye,$e;function Y(t,i,n){if(i<0||i>31||t>>>i)throw new RangeError("Value out of range");for(var r=i-1;r>=0;r--)n.push(t>>>r&1)}function ae(t,i){return(t>>>i&1)!=0}function Q(t){if(!t)throw new Error("Assertion error")}var ne=function(){function t(i,n){De(this,t),$(this,"modeBits",void 0),$(this,"numBitsCharCount",void 0),this.modeBits=i,this.numBitsCharCount=n}return Le(t,[{key:"numCharCountBits",value:function(n){return this.numBitsCharCount[Math.floor((n+7)/17)]}}]),t}();ye=ne;$(ne,"NUMERIC",new ye(1,[10,12,14]));$(ne,"ALPHANUMERIC",new ye(2,[9,11,13]));$(ne,"BYTE",new ye(4,[8,16,16]));$(ne,"KANJI",new ye(8,[8,10,12]));$(ne,"ECI",new ye(7,[0,0,0]));var K=Le(function t(i,n){De(this,t),$(this,"ordinal",void 0),$(this,"formatBits",void 0),this.ordinal=i,this.formatBits=n});$e=K;$(K,"LOW",new $e(0,1));$(K,"MEDIUM",new $e(1,0));$(K,"QUARTILE",new $e(2,3));$(K,"HIGH",new $e(3,2));var ge=function(){function t(i,n,r){if(De(this,t),$(this,"mode",void 0),$(this,"numChars",void 0),$(this,"bitData",void 0),this.mode=i,this.numChars=n,this.bitData=r,n<0)throw new RangeError("Invalid argument");this.bitData=r.slice()}return Le(t,[{key:"getData",value:function(){return this.bitData.slice()}}],[{key:"makeBytes",value:function(n){var r=[],a=ve(n),s;try{for(a.s();!(s=a.n()).done;){var l=s.value;Y(l,8,r)}}catch(o){a.e(o)}finally{a.f()}return new t(ne.BYTE,n.length,r)}},{key:"makeNumeric",value:function(n){if(!t.isNumeric(n))throw new RangeError("String contains non-numeric characters");for(var r=[],a=0;a<n.length;){var s=Math.min(n.length-a,3);Y(parseInt(n.substring(a,a+s),10),s*3+1,r),a+=s}return new t(ne.NUMERIC,n.length,r)}},{key:"makeAlphanumeric",value:function(n){if(!t.isAlphanumeric(n))throw new RangeError("String contains unencodable characters in alphanumeric mode");var r=[],a;for(a=0;a+2<=n.length;a+=2){var s=t.ALPHANUMERIC_CHARSET.indexOf(n.charAt(a))*45;s+=t.ALPHANUMERIC_CHARSET.indexOf(n.charAt(a+1)),Y(s,11,r)}return a<n.length&&Y(t.ALPHANUMERIC_CHARSET.indexOf(n.charAt(a)),6,r),new t(ne.ALPHANUMERIC,n.length,r)}},{key:"makeSegments",value:function(n){return n==""?[]:t.isNumeric(n)?[t.makeNumeric(n)]:t.isAlphanumeric(n)?[t.makeAlphanumeric(n)]:[t.makeBytes(t.toUtf8ByteArray(n))]}},{key:"makeEci",value:function(n){var r=[];if(n<0)throw new RangeError("ECI assignment value out of range");if(n<128)Y(n,8,r);else if(n<16384)Y(2,2,r),Y(n,14,r);else if(n<1e6)Y(6,3,r),Y(n,21,r);else throw new RangeError("ECI assignment value out of range");return new t(ne.ECI,0,r)}},{key:"isNumeric",value:function(n){return t.NUMERIC_REGEX.test(n)}},{key:"isAlphanumeric",value:function(n){return t.ALPHANUMERIC_REGEX.test(n)}},{key:"getTotalBits",value:function(n,r){var a=0,s=ve(n),l;try{for(s.s();!(l=s.n()).done;){var o=l.value,d=o.mode.numCharCountBits(r);if(o.numChars>=1<<d)return 1/0;a+=4+d+o.bitData.length}}catch(c){s.e(c)}finally{s.f()}return a}},{key:"toUtf8ByteArray",value:function(n){for(var r=encodeURI(n),a=[],s=0;s<r.length;s++)r.charAt(s)!="%"?a.push(r.charCodeAt(s)):(a.push(parseInt(r.substring(s+1,s+3),16)),s+=2);return a}}]),t}();$(ge,"NUMERIC_REGEX",/^[0-9]*$/);$(ge,"ALPHANUMERIC_REGEX",/^[A-Z0-9 $%*+.\/:-]*$/);$(ge,"ALPHANUMERIC_CHARSET","0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:");var ie=function(){function t(i,n,r,a){De(this,t),$(this,"size",void 0),$(this,"mask",void 0),$(this,"modules",[]),$(this,"isFunction",[]),$(this,"version",void 0),$(this,"errorCorrectionLevel",void 0);var s=a;if(this.version=i,this.errorCorrectionLevel=n,i<t.MIN_VERSION||i>t.MAX_VERSION)throw new RangeError("Version value out of range");if(s<-1||s>7)throw new RangeError("Mask value out of range");this.size=i*4+17;for(var l=[],o=0;o<this.size;o++)l.push(!1);for(var d=0;d<this.size;d++)this.modules.push(l.slice()),this.isFunction.push(l.slice());this.drawFunctionPatterns();var c=this.addEccAndInterleave(r);if(this.drawCodewords(c),s==-1)for(var u=1e9,x=0;x<8;x++){this.applyMask(x),this.drawFormatBits(x);var m=this.getPenaltyScore();m<u&&(s=x,u=m),this.applyMask(x)}Q(0<=s&&s<=7),this.mask=s,this.applyMask(s),this.drawFormatBits(s),this.isFunction=[]}return Le(t,[{key:"getModule",value:function(n,r){return 0<=n&&n<this.size&&0<=r&&r<this.size&&this.modules[r][n]}},{key:"getModules",value:function(){return this.modules}},{key:"drawFunctionPatterns",value:function(){for(var n=0;n<this.size;n++)this.setFunctionModule(6,n,n%2==0),this.setFunctionModule(n,6,n%2==0);this.drawFinderPattern(3,3),this.drawFinderPattern(this.size-4,3),this.drawFinderPattern(3,this.size-4);for(var r=this.getAlignmentPatternPositions(),a=r.length,s=0;s<a;s++)for(var l=0;l<a;l++)s==0&&l==0||s==0&&l==a-1||s==a-1&&l==0||this.drawAlignmentPattern(r[s],r[l]);this.drawFormatBits(0),this.drawVersion()}},{key:"drawFormatBits",value:function(n){for(var r=this.errorCorrectionLevel.formatBits<<3|n,a=r,s=0;s<10;s++)a=a<<1^(a>>>9)*1335;var l=(r<<10|a)^21522;Q(l>>>15==0);for(var o=0;o<=5;o++)this.setFunctionModule(8,o,ae(l,o));this.setFunctionModule(8,7,ae(l,6)),this.setFunctionModule(8,8,ae(l,7)),this.setFunctionModule(7,8,ae(l,8));for(var d=9;d<15;d++)this.setFunctionModule(14-d,8,ae(l,d));for(var c=0;c<8;c++)this.setFunctionModule(this.size-1-c,8,ae(l,c));for(var u=8;u<15;u++)this.setFunctionModule(8,this.size-15+u,ae(l,u));this.setFunctionModule(8,this.size-8,!0)}},{key:"drawVersion",value:function(){if(!(this.version<7)){for(var n=this.version,r=0;r<12;r++)n=n<<1^(n>>>11)*7973;var a=this.version<<12|n;Q(a>>>18==0);for(var s=0;s<18;s++){var l=ae(a,s),o=this.size-11+s%3,d=Math.floor(s/3);this.setFunctionModule(o,d,l),this.setFunctionModule(d,o,l)}}}},{key:"drawFinderPattern",value:function(n,r){for(var a=-4;a<=4;a++)for(var s=-4;s<=4;s++){var l=Math.max(Math.abs(s),Math.abs(a)),o=n+s,d=r+a;0<=o&&o<this.size&&0<=d&&d<this.size&&this.setFunctionModule(o,d,l!=2&&l!=4)}}},{key:"drawAlignmentPattern",value:function(n,r){for(var a=-2;a<=2;a++)for(var s=-2;s<=2;s++)this.setFunctionModule(n+s,r+a,Math.max(Math.abs(s),Math.abs(a))!=1)}},{key:"setFunctionModule",value:function(n,r,a){this.modules[r][n]=a,this.isFunction[r][n]=!0}},{key:"addEccAndInterleave",value:function(n){var r=this.version,a=this.errorCorrectionLevel;if(n.length!=t.getNumDataCodewords(r,a))throw new RangeError("Invalid argument");for(var s=t.NUM_ERROR_CORRECTION_BLOCKS[a.ordinal][r],l=t.ECC_CODEWORDS_PER_BLOCK[a.ordinal][r],o=Math.floor(t.getNumRawDataModules(r)/8),d=s-o%s,c=Math.floor(o/s),u=[],x=t.reedSolomonComputeDivisor(l),m=0,p=0;m<s;m++){var h=n.slice(p,p+c-l+(m<d?0:1));p+=h.length;var w=t.reedSolomonComputeRemainder(h,x);m<d&&h.push(0),u.push(h.concat(w))}for(var v=[],S=function(j){u.forEach(function(y,b){(j!=c-l||b>=d)&&v.push(y[j])})},I=0;I<u[0].length;I++)S(I);return Q(v.length==o),v}},{key:"drawCodewords",value:function(n){if(n.length!=Math.floor(t.getNumRawDataModules(this.version)/8))throw new RangeError("Invalid argument");for(var r=0,a=this.size-1;a>=1;a-=2){a==6&&(a=5);for(var s=0;s<this.size;s++)for(var l=0;l<2;l++){var o=a-l,d=(a+1&2)==0,c=d?this.size-1-s:s;!this.isFunction[c][o]&&r<n.length*8&&(this.modules[c][o]=ae(n[r>>>3],7-(r&7)),r++)}}Q(r==n.length*8)}},{key:"applyMask",value:function(n){if(n<0||n>7)throw new RangeError("Mask value out of range");for(var r=0;r<this.size;r++)for(var a=0;a<this.size;a++){var s=void 0;switch(n){case 0:s=(a+r)%2==0;break;case 1:s=r%2==0;break;case 2:s=a%3==0;break;case 3:s=(a+r)%3==0;break;case 4:s=(Math.floor(a/3)+Math.floor(r/2))%2==0;break;case 5:s=a*r%2+a*r%3==0;break;case 6:s=(a*r%2+a*r%3)%2==0;break;case 7:s=((a+r)%2+a*r%3)%2==0;break;default:throw new Error("Unreachable")}!this.isFunction[r][a]&&s&&(this.modules[r][a]=!this.modules[r][a])}}},{key:"getPenaltyScore",value:function(){for(var n=0,r=0;r<this.size;r++){for(var a=!1,s=0,l=[0,0,0,0,0,0,0],o=0;o<this.size;o++)this.modules[r][o]==a?(s++,s==5?n+=t.PENALTY_N1:s>5&&n++):(this.finderPenaltyAddHistory(s,l),a||(n+=this.finderPenaltyCountPatterns(l)*t.PENALTY_N3),a=this.modules[r][o],s=1);n+=this.finderPenaltyTerminateAndCount(a,s,l)*t.PENALTY_N3}for(var d=0;d<this.size;d++){for(var c=!1,u=0,x=[0,0,0,0,0,0,0],m=0;m<this.size;m++)this.modules[m][d]==c?(u++,u==5?n+=t.PENALTY_N1:u>5&&n++):(this.finderPenaltyAddHistory(u,x),c||(n+=this.finderPenaltyCountPatterns(x)*t.PENALTY_N3),c=this.modules[m][d],u=1);n+=this.finderPenaltyTerminateAndCount(c,u,x)*t.PENALTY_N3}for(var p=0;p<this.size-1;p++)for(var h=0;h<this.size-1;h++){var w=this.modules[p][h];w==this.modules[p][h+1]&&w==this.modules[p+1][h]&&w==this.modules[p+1][h+1]&&(n+=t.PENALTY_N2)}var v=0,S=ve(this.modules),I;try{for(S.s();!(I=S.n()).done;){var P=I.value;v=P.reduce(function(b,M){return b+(M?1:0)},v)}}catch(b){S.e(b)}finally{S.f()}var j=this.size*this.size,y=Math.ceil(Math.abs(v*20-j*10)/j)-1;return Q(0<=y&&y<=9),n+=y*t.PENALTY_N4,Q(0<=n&&n<=2568888),n}},{key:"getAlignmentPatternPositions",value:function(){if(this.version==1)return[];for(var n=Math.floor(this.version/7)+2,r=this.version==32?26:Math.ceil((this.version*4+4)/(n*2-2))*2,a=[6],s=this.size-7;a.length<n;s-=r)a.splice(1,0,s);return a}},{key:"finderPenaltyCountPatterns",value:function(n){var r=n[1];Q(r<=this.size*3);var a=r>0&&n[2]==r&&n[3]==r*3&&n[4]==r&&n[5]==r;return(a&&n[0]>=r*4&&n[6]>=r?1:0)+(a&&n[6]>=r*4&&n[0]>=r?1:0)}},{key:"finderPenaltyTerminateAndCount",value:function(n,r,a){var s=r;return n&&(this.finderPenaltyAddHistory(s,a),s=0),s+=this.size,this.finderPenaltyAddHistory(s,a),this.finderPenaltyCountPatterns(a)}},{key:"finderPenaltyAddHistory",value:function(n,r){var a=n;r[0]==0&&(a+=this.size),r.pop(),r.unshift(a)}}],[{key:"encodeText",value:function(n,r){var a=ge.makeSegments(n);return t.encodeSegments(a,r)}},{key:"encodeBinary",value:function(n,r){var a=ge.makeBytes(n);return t.encodeSegments([a],r)}},{key:"encodeSegments",value:function(n,r){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:40,l=arguments.length>4&&arguments[4]!==void 0?arguments[4]:-1,o=arguments.length>5&&arguments[5]!==void 0?arguments[5]:!0;if(!(t.MIN_VERSION<=a&&a<=s&&s<=t.MAX_VERSION)||l<-1||l>7)throw new RangeError("Invalid value");var d,c;for(d=a;;d++){var u=t.getNumDataCodewords(d,r)*8,x=ge.getTotalBits(n,d);if(x<=u){c=x;break}if(d>=s)throw new RangeError("Data too long")}for(var m=r,p=0,h=[K.MEDIUM,K.QUARTILE,K.HIGH];p<h.length;p++){var w=h[p];o&&c<=t.getNumDataCodewords(d,w)*8&&(m=w)}var v=[],S=ve(n),I;try{for(S.s();!(I=S.n()).done;){var P=I.value;Y(P.mode.modeBits,4,v),Y(P.numChars,P.mode.numCharCountBits(d),v);var j=ve(P.getData()),y;try{for(j.s();!(y=j.n()).done;){var b=y.value;v.push(b)}}catch(R){j.e(R)}finally{j.f()}}}catch(R){S.e(R)}finally{S.f()}Q(v.length==c);var M=t.getNumDataCodewords(d,m)*8;Q(v.length<=M),Y(0,Math.min(4,M-v.length),v),Y(0,(8-v.length%8)%8,v),Q(v.length%8==0);for(var N=236;v.length<M;N^=253)Y(N,8,v);for(var f=[];f.length*8<v.length;)f.push(0);return v.forEach(function(R,D){f[D>>>3]|=R<<7-(D&7)}),new t(d,m,f,l)}},{key:"getNumRawDataModules",value:function(n){if(n<t.MIN_VERSION||n>t.MAX_VERSION)throw new RangeError("Version number out of range");var r=(16*n+128)*n+64;if(n>=2){var a=Math.floor(n/7)+2;r-=(25*a-10)*a-55,n>=7&&(r-=36)}return Q(208<=r&&r<=29648),r}},{key:"getNumDataCodewords",value:function(n,r){return Math.floor(t.getNumRawDataModules(n)/8)-t.ECC_CODEWORDS_PER_BLOCK[r.ordinal][n]*t.NUM_ERROR_CORRECTION_BLOCKS[r.ordinal][n]}},{key:"reedSolomonComputeDivisor",value:function(n){if(n<1||n>255)throw new RangeError("Degree out of range");for(var r=[],a=0;a<n-1;a++)r.push(0);r.push(1);for(var s=1,l=0;l<n;l++){for(var o=0;o<r.length;o++)r[o]=t.reedSolomonMultiply(r[o],s),o+1<r.length&&(r[o]^=r[o+1]);s=t.reedSolomonMultiply(s,2)}return r}},{key:"reedSolomonComputeRemainder",value:function(n,r){var a=r.map(function(){return 0}),s=ve(n),l;try{var o=function(){var c=l.value,u=c^a.shift();a.push(0),r.forEach(function(x,m){a[m]^=t.reedSolomonMultiply(x,u)})};for(s.s();!(l=s.n()).done;)o()}catch(d){s.e(d)}finally{s.f()}return a}},{key:"reedSolomonMultiply",value:function(n,r){if(n>>>8||r>>>8)throw new RangeError("Byte out of range");for(var a=0,s=7;s>=0;s--)a=a<<1^(a>>>7)*285,a^=(r>>>s&1)*n;return Q(a>>>8==0),a}}]),t}();$(ie,"MIN_VERSION",1);$(ie,"MAX_VERSION",40);$(ie,"PENALTY_N1",3);$(ie,"PENALTY_N2",3);$(ie,"PENALTY_N3",40);$(ie,"PENALTY_N4",10);$(ie,"ECC_CODEWORDS_PER_BLOCK",[[-1,7,10,15,20,26,18,20,24,30,18,20,24,26,30,22,24,28,30,28,28,28,28,30,30,26,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,10,16,26,18,24,16,18,22,22,26,30,22,22,24,24,28,28,26,26,26,26,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28],[-1,13,22,18,26,18,24,18,22,20,24,28,26,24,20,30,24,28,28,26,30,28,30,30,30,30,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,17,28,22,16,22,28,26,26,24,28,24,28,22,24,24,30,28,28,26,28,30,24,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30]]);$(ie,"NUM_ERROR_CORRECTION_BLOCKS",[[-1,1,1,1,1,1,2,2,2,2,4,4,4,4,4,6,6,6,6,7,8,8,9,9,10,12,12,12,13,14,15,16,17,18,19,19,20,21,22,24,25],[-1,1,1,1,2,2,4,4,4,5,5,5,8,9,9,10,10,11,13,14,16,17,17,18,20,21,23,25,26,28,29,31,33,35,37,38,40,43,45,47,49],[-1,1,1,2,2,4,4,6,6,8,8,8,10,12,16,12,17,16,18,21,20,23,23,25,27,29,34,34,35,38,40,43,45,48,51,53,56,59,62,65,68],[-1,1,1,2,4,4,4,5,6,8,8,11,11,16,16,18,16,19,21,25,25,25,34,30,32,35,37,40,42,45,48,51,54,57,60,63,66,70,74,77,81]]);var zn={L:K.LOW,M:K.MEDIUM,Q:K.QUARTILE,H:K.HIGH},vt=128,pt="L",xt="#FFFFFF",yt="#000000",jt=!1,Ct=1,Ln=4,Dn=0,On=.1,St=function(i){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r=[];return i.forEach(function(a,s){var l=null;a.forEach(function(o,d){if(!o&&l!==null){r.push("M".concat(l+n," ").concat(s+n,"h").concat(d-l,"v1H").concat(l+n,"z")),l=null;return}if(d===a.length-1){if(!o)return;l===null?r.push("M".concat(d+n,",").concat(s+n," h1v1H").concat(d+n,"z")):r.push("M".concat(l+n,",").concat(s+n," h").concat(d+1-l,"v1H").concat(l+n,"z"));return}o&&l===null&&(l=d)})}),r.join("")},wt=function(i,n){return i.slice().map(function(r,a){return a<n.y||a>=n.y+n.h?r:r.map(function(s,l){return l<n.x||l>=n.x+n.w?s:!1})})},Bn=function(i,n,r,a){if(a==null)return null;var s=i.length+r*2,l=Math.floor(n*On),o=s/n,d=(a.width||l)*o,c=(a.height||l)*o,u=a.x==null?i.length/2-d/2:a.x*o,x=a.y==null?i.length/2-c/2:a.y*o,m=a.opacity==null?1:a.opacity,p=null;if(a.excavate){var h=Math.floor(u),w=Math.floor(x),v=Math.ceil(d+u-h),S=Math.ceil(c+x-w);p={x:h,y:w,w:v,h:S}}var I=a.crossOrigin;return{x:u,y:x,h:c,w:d,excavation:p,opacity:m,crossOrigin:I}},Fn=function(i,n){return n!=null?Math.max(Math.floor(n),0):i?Ln:Dn},Vn=function(){try{new Path2D().addPath(new Path2D)}catch{return!1}return!0}(),bt=function(i){var n=i.value,r=i.level,a=i.minVersion,s=i.includeMargin,l=i.marginSize,o=i.imageSettings,d=i.size,c=i.boostLevel,u=A.useMemo(function(){var x=Array.isArray(n)?n:[n],m=x.reduce(function(p,h){return p.push.apply(p,At(ge.makeSegments(h))),p},[]);return ie.encodeSegments(m,zn[r],a,void 0,void 0,c)},[n,r,a,c]);return A.useMemo(function(){var x=u.getModules(),m=Fn(s,l),p=x.length+m*2,h=Bn(x,d,m,o);return{cells:x,margin:m,numCells:p,calculatedImageSettings:h,qrcode:u}},[u,d,o,s,l])},_n=["value","size","level","bgColor","fgColor","includeMargin","minVersion","marginSize","style","imageSettings","boostLevel"],Un=A.forwardRef(function(t,i){var n=t.value,r=t.size,a=r===void 0?vt:r,s=t.level,l=s===void 0?pt:s,o=t.bgColor,d=o===void 0?xt:o,c=t.fgColor,u=c===void 0?yt:c,x=t.includeMargin,m=x===void 0?jt:x,p=t.minVersion,h=p===void 0?Ct:p,w=t.marginSize,v=t.style,S=t.imageSettings,I=t.boostLevel,P=at(t,_n),j=S==null?void 0:S.src,y=A.useRef(null),b=A.useRef(null),M=A.useCallback(function(C){y.current=C,typeof i=="function"?i(C):i&&(i.current=C)},[i]),N=A.useState(!1),f=kt(N,2),R=f[1],D=bt({value:n,level:l,minVersion:h,includeMargin:m,marginSize:w,imageSettings:S,size:a,boostLevel:I}),O=D.margin,z=D.cells,J=D.numCells,B=D.calculatedImageSettings;A.useEffect(function(){if(y.current){var C=y.current,L=C.getContext("2d");if(!L)return;var Z=z,le=b.current,ce=B!=null&&le!==null&&le.complete&&le.naturalHeight!==0&&le.naturalWidth!==0;ce&&B.excavation!=null&&(Z=wt(z,B.excavation));var Pe=window.devicePixelRatio||1;C.height=C.width=a*Pe;var je=a/J*Pe;L.scale(je,je),L.fillStyle=d,L.fillRect(0,0,J,J),L.fillStyle=u,Vn?L.fill(new Path2D(St(Z,O))):z.forEach(function(Oe,Ne){Oe.forEach(function(Ce,Be){Ce&&L.fillRect(Be+O,Ne+O,1,1)})}),B&&(L.globalAlpha=B.opacity),ce&&L.drawImage(le,B.x+O,B.y+O,B.w,B.h)}}),A.useEffect(function(){R(!1)},[j]);var oe=Tt({height:a,width:a},v),q=null;return j!=null&&(q=A.createElement("img",{alt:"QR-Code",src:j,key:j,style:{display:"none"},onLoad:function(){R(!0)},ref:b,crossOrigin:B==null?void 0:B.crossOrigin})),A.createElement(A.Fragment,null,A.createElement("canvas",Ie({style:oe,height:a,width:a,ref:M,role:"img"},P)),q)}),Hn=["value","size","level","bgColor","fgColor","includeMargin","minVersion","title","marginSize","imageSettings","boostLevel"],Yn=A.forwardRef(function(t,i){var n=t.value,r=t.size,a=r===void 0?vt:r,s=t.level,l=s===void 0?pt:s,o=t.bgColor,d=o===void 0?xt:o,c=t.fgColor,u=c===void 0?yt:c,x=t.includeMargin,m=x===void 0?jt:x,p=t.minVersion,h=p===void 0?Ct:p,w=t.title,v=t.marginSize,S=t.imageSettings,I=t.boostLevel,P=at(t,Hn),j=bt({value:n,level:l,minVersion:h,includeMargin:m,marginSize:v,imageSettings:S,size:a,boostLevel:I}),y=j.margin,b=j.cells,M=j.numCells,N=j.calculatedImageSettings,f=b,R=null;S!=null&&N!=null&&(N.excavation!=null&&(f=wt(b,N.excavation)),R=A.createElement("image",{href:S.src,height:N.h,width:N.w,x:N.x+y,y:N.y+y,preserveAspectRatio:"none",opacity:N.opacity,crossOrigin:N.crossOrigin}));var D=St(f,y);return A.createElement("svg",Ie({height:a,width:a,viewBox:"0 0 ".concat(M," ").concat(M),ref:i,role:"img"},P),!!w&&A.createElement("title",null,w),A.createElement("path",{fill:d,d:"M0,0 h".concat(M,"v").concat(M,"H0z"),shapeRendering:"crispEdges"}),A.createElement("path",{fill:u,d:D,shapeRendering:"crispEdges"}),R)});const Wn=A.createElement(xe,null);function Qn({prefixCls:t,locale:i,onRefresh:n,statusRender:r,status:a}){const s=A.createElement(A.Fragment,null,A.createElement("p",{className:`${t}-expired`},i==null?void 0:i.expired),n&&A.createElement(W,{type:"link",icon:A.createElement(dt,null),onClick:n},i==null?void 0:i.refresh)),l=A.createElement("p",{className:`${t}-scanned`},i==null?void 0:i.scanned),o={expired:s,loading:Wn,scanned:l};return(r??(u=>o[u.status]))({status:a,locale:i,onRefresh:n})}const Gn=t=>{const{componentCls:i,lineWidth:n,lineType:r,colorSplit:a}=t;return{[i]:Object.assign(Object.assign({},rt(t)),{display:"flex",justifyContent:"center",alignItems:"center",padding:t.paddingSM,backgroundColor:t.colorWhite,borderRadius:t.borderRadiusLG,border:`${U(n)} ${r} ${a}`,position:"relative",overflow:"hidden",[`& > ${i}-mask`]:{position:"absolute",insetBlockStart:0,insetInlineStart:0,zIndex:10,display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",width:"100%",height:"100%",color:t.colorText,lineHeight:t.lineHeight,background:t.QRCodeMaskBackgroundColor,textAlign:"center",[`& > ${i}-expired, & > ${i}-scanned`]:{color:t.QRCodeTextColor}},"> canvas":{alignSelf:"stretch",flex:"auto",minWidth:0},"&-icon":{marginBlockEnd:t.marginXS,fontSize:t.controlHeight}}),[`${i}-borderless`]:{borderColor:"transparent",padding:0,borderRadius:0}}},Xn=t=>({QRCodeMaskBackgroundColor:new zt(t.colorBgContainer).setA(.96).toRgbString()}),Kn=tt("QRCode",t=>{const i=nt(t,{QRCodeTextColor:t.colorText});return Gn(i)},Xn);var qn=function(t,i){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&i.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,r=Object.getOwnPropertySymbols(t);a<r.length;a++)i.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(t,r[a])&&(n[r[a]]=t[r[a]]);return n};const Zn=t=>{var i,n,r,a;const[,s]=Lt(),{value:l,type:o="canvas",icon:d="",size:c=160,iconSize:u,color:x=s.colorText,errorLevel:m="M",status:p="active",bordered:h=!0,onRefresh:w,style:v,className:S,rootClassName:I,prefixCls:P,bgColor:j="transparent",statusRender:y,boostLevel:b}=t,M=qn(t,["value","type","icon","size","iconSize","color","errorLevel","status","bordered","onRefresh","style","className","rootClassName","prefixCls","bgColor","statusRender","boostLevel"]),{getPrefixCls:N}=g.useContext(Dt),f=N("qrcode",P),[R,D,O]=Kn(f),z={src:d,x:void 0,y:void 0,height:typeof u=="number"?u:(i=u==null?void 0:u.height)!==null&&i!==void 0?i:40,width:typeof u=="number"?u:(n=u==null?void 0:u.width)!==null&&n!==void 0?n:40,excavate:!0,crossOrigin:"anonymous"},J=Wt(M,!0),B=Ht(M,Object.keys(J)),oe=Object.assign({value:l,size:c,level:m,bgColor:j,fgColor:x,style:{width:v==null?void 0:v.width,height:v==null?void 0:v.height},imageSettings:d?z:void 0,boostLevel:b},J),[q]=st("QRCode");if(!l)return null;const C=ze(f,S,I,D,O,{[`${f}-borderless`]:!h}),L=Object.assign(Object.assign({backgroundColor:j},v),{width:(r=v==null?void 0:v.width)!==null&&r!==void 0?r:c,height:(a=v==null?void 0:v.height)!==null&&a!==void 0?a:c});return R(A.createElement("div",Object.assign({},B,{className:C,style:L}),p!=="active"&&A.createElement("div",{className:`${f}-mask`},A.createElement(Qn,{prefixCls:f,locale:q,status:p,onRefresh:w,statusRender:y})),o==="canvas"?A.createElement(Un,Object.assign({},oe)):A.createElement(Yn,Object.assign({},oe))))};var Jn={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M574 665.4a8.03 8.03 0 00-11.3 0L446.5 781.6c-53.8 53.8-144.6 59.5-204 0-59.5-59.5-53.8-150.2 0-204l116.2-116.2c3.1-3.1 3.1-8.2 0-11.3l-39.8-39.8a8.03 8.03 0 00-11.3 0L191.4 526.5c-84.6 84.6-84.6 221.5 0 306s221.5 84.6 306 0l116.2-116.2c3.1-3.1 3.1-8.2 0-11.3L574 665.4zm258.6-474c-84.6-84.6-221.5-84.6-306 0L410.3 307.6a8.03 8.03 0 000 11.3l39.7 39.7c3.1 3.1 8.2 3.1 11.3 0l116.2-116.2c53.8-53.8 144.6-59.5 204 0 59.5 59.5 53.8 150.2 0 204L665.3 562.6a8.03 8.03 0 000 11.3l39.8 39.8c3.1 3.1 8.2 3.1 11.3 0l116.2-116.2c84.5-84.6 84.5-221.5 0-306.1zM610.1 372.3a8.03 8.03 0 00-11.3 0L372.3 598.7a8.03 8.03 0 000 11.3l39.6 39.6c3.1 3.1 8.2 3.1 11.3 0l226.4-226.4c3.1-3.1 3.1-8.2 0-11.3l-39.5-39.6z"}}]},name:"link",theme:"outlined"},er=function(i,n){return g.createElement(Ye,Ie({},i,{ref:n,icon:Jn}))},Fe=g.forwardRef(er),tr={icon:{tag:"svg",attrs:{viewBox:"0 0 1024 1024",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64L128 192v384c0 212.1 171.9 384 384 384s384-171.9 384-384V192L512 64zm312 512c0 172.3-139.7 312-312 312S200 748.3 200 576V246l312-110 312 110v330z"}},{tag:"path",attrs:{d:"M378.4 475.1a35.91 35.91 0 00-50.9 0 35.91 35.91 0 000 50.9l129.4 129.4 2.1 2.1a33.98 33.98 0 0048.1 0L730.6 434a33.98 33.98 0 000-48.1l-2.8-2.8a33.98 33.98 0 00-48.1 0L483 579.7 378.4 475.1z"}}]},name:"safety",theme:"outlined"},nr=function(i,n){return g.createElement(Ye,Ie({},i,{ref:n,icon:tr}))},rr=g.forwardRef(nr),ar={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M868 160h-92v-40c0-4.4-3.6-8-8-8H256c-4.4 0-8 3.6-8 8v40h-92a44 44 0 00-44 44v148c0 81.7 60 149.6 138.2 162C265.6 630.2 359 721.8 476 734.5v105.2H280c-17.7 0-32 14.3-32 32V904c0 4.4 3.6 8 8 8h512c4.4 0 8-3.6 8-8v-32.3c0-17.7-14.3-32-32-32H548V734.5C665 721.8 758.4 630.2 773.8 514 852 501.6 912 433.7 912 352V204a44 44 0 00-44-44zM248 439.6c-37.1-11.9-64-46.7-64-87.6V232h64v207.6zM840 352c0 41-26.9 75.8-64 87.6V232h64v120z"}}]},name:"trophy",theme:"filled"},sr=function(i,n){return g.createElement(Ye,Ie({},i,{ref:n,icon:ar}))},ir=g.forwardRef(sr);async function or(t=1,i=10){return(await se.get("/staff",{params:{page:t,pageSize:i}})).data}async function lr(){return(await se.get("/staff/quota")).data}async function cr(t){return(await se.get(`/staff/${t}`)).data}async function dr(t){return(await se.post("/staff",t)).data}async function ur(t,i){return(await se.put(`/staff/${t}/status`,{status:i})).data}async function hr(t){await se.delete(`/staff/${t}`)}async function fr(t){return(await se.get(`/staff/${t}/permissions`)).data}async function mr(t,i){return(await se.put(`/staff/${t}/permissions`,{permissions:i})).data}async function gr(){return(await se.get("/staff/permission-templates")).data.templates}const vr=({visible:t,onCancel:i,onSuccess:n})=>{const[r]=k.useForm(),[a,s]=g.useState(!1),l=async()=>{var d,c,u,x,m,p,h,w,v;try{const S=await r.validateFields();s(!0);const I={name:S.name,email:S.email||void 0,phone:S.phone,password:S.password};await dr(I),r.resetFields(),n()}catch(S){((d=S.response)==null?void 0:d.status)===403||((c=S.response)==null?void 0:c.status)===429?T.error(((m=(x=(u=S.response)==null?void 0:u.data)==null?void 0:x.error)==null?void 0:m.message)||"已达到商务账号数量上限"):((p=S.response)==null?void 0:p.status)===400?T.error(((v=(w=(h=S.response)==null?void 0:h.data)==null?void 0:w.error)==null?void 0:v.message)||"该邮箱已被注册"):S.errorFields||T.error("创建失败，请重试")}finally{s(!1)}},o=()=>{r.resetFields(),i()};return e.jsx(Me,{title:"添加商务账号",open:t,onOk:l,onCancel:o,confirmLoading:a,okText:"创建",cancelText:"取消",width:500,children:e.jsxs(k,{form:r,layout:"vertical",style:{marginTop:24},children:[e.jsx(k.Item,{label:"姓名",name:"name",rules:[{required:!0,message:"请输入姓名"},{max:50,message:"姓名不能超过50个字符"}],children:e.jsx(he,{placeholder:"请输入商务人员姓名"})}),e.jsx(k.Item,{label:"邮箱",name:"email",rules:[{type:"email",message:"请输入有效的邮箱地址"}],children:e.jsx(he,{placeholder:"可选，用于邮箱登录"})}),e.jsx(k.Item,{label:"手机号",name:"phone",rules:[{required:!0,message:"请输入手机号"},{pattern:/^1\d{10}$/,message:"请输入有效的11位手机号"}],children:e.jsx(he,{placeholder:"请输入手机号（用于登录）",maxLength:11})}),e.jsx(k.Item,{label:"初始密码",name:"password",rules:[{required:!0,message:"请输入初始密码"},{min:6,message:"密码至少6个字符"}],children:e.jsx(he.Password,{placeholder:"请设置初始密码（至少6个字符）"})}),e.jsx(k.Item,{label:"确认密码",name:"confirmPassword",dependencies:["password"],rules:[{required:!0,message:"请确认密码"},({getFieldValue:d})=>({validator(c,u){return!u||d("password")===u?Promise.resolve():Promise.reject(new Error("两次输入的密码不一致"))}})],children:e.jsx(he.Password,{placeholder:"请再次输入密码"})})]})})},{Text:G,Paragraph:ke,Title:Je}=We,pr=({visible:t,onCancel:i})=>{const[n,r]=g.useState(!1),[a,s]=g.useState(!1),[l,o]=g.useState([]),[d,c]=g.useState(null),[u,x]=g.useState("link"),[m,p]=g.useState({phone:"",searching:!1,foundUser:null,sending:!1,sentInvite:null}),h=async()=>{r(!0);try{const f=await Bt();o(f);const R=f.find(D=>D.status==="PENDING");R&&c(R)}catch(f){console.error("加载邀请列表失败",f)}finally{r(!1)}};g.useEffect(()=>{t?h():(c(null),p({phone:"",searching:!1,foundUser:null,sending:!1,sentInvite:null}))},[t]);const w=async()=>{s(!0);try{const f=await Vt();c(f),o(R=>[f,...R]),T.success("邀请链接已生成")}catch(f){T.error(f.message||"创建邀请失败")}finally{s(!1)}},v=async f=>{try{await Ft(f),T.success("邀请已撤销"),h(),(d==null?void 0:d.id)===f&&c(null)}catch(R){T.error(R.message||"撤销失败")}},S=f=>{const R=`${window.location.origin}/invite/${f}`;navigator.clipboard.writeText(R),T.success("邀请链接已复制")},I=f=>{switch(f){case"PENDING":return e.jsx(te,{color:"processing",icon:e.jsx(Fe,{}),children:"待使用"});case"USED":return e.jsx(te,{color:"success",icon:e.jsx(Re,{}),children:"已使用"});case"REVOKED":return e.jsx(te,{color:"default",icon:e.jsx(Xt,{}),children:"已撤销"});default:return e.jsx(te,{children:f})}},P=f=>new Date(f)<new Date,j=async()=>{if(!m.phone||!/^1[3-9]\d{9}$/.test(m.phone)){T.error("请输入正确的手机号");return}p(f=>({...f,searching:!0,foundUser:null,sentInvite:null}));try{const f=await _t(m.phone);p(R=>({...R,foundUser:f,searching:!1}))}catch(f){T.error(f.message||"未找到该手机号对应的独立商务"),p(R=>({...R,searching:!1}))}},y=async()=>{if(m.foundUser){p(f=>({...f,sending:!0}));try{const f=await Ut(m.phone);p(R=>({...R,sentInvite:f,sending:!1})),T.success("邀请已发送，请告知对方查看通知"),h()}catch(f){T.error(f.message||"发送邀请失败"),p(R=>({...R,sending:!1}))}}},b=()=>{p({phone:"",searching:!1,foundUser:null,sending:!1,sentInvite:null})},M=()=>e.jsx(e.Fragment,{children:d?e.jsx("div",{style:{marginBottom:24},children:e.jsxs(ee,{direction:"vertical",style:{width:"100%"},size:"middle",children:[e.jsxs("div",{style:{textAlign:"center",padding:"16px 0"},children:[e.jsx(Zn,{value:`${window.location.origin}/invite/${d.code}`,size:160,style:{margin:"0 auto"}}),e.jsx(ke,{type:"secondary",style:{marginTop:8},children:"扫描二维码或复制链接分享给商务人员"})]}),e.jsxs(he.Group,{compact:!0,children:[e.jsx(he,{style:{width:"calc(100% - 100px)"},value:`${window.location.origin}/invite/${d.code}`,readOnly:!0}),e.jsx(W,{type:"primary",icon:e.jsx(Xe,{}),onClick:()=>S(d.code),children:"复制链接"})]}),e.jsxs(ee,{children:[e.jsxs(G,{type:"secondary",children:["邀请码：",e.jsx(G,{code:!0,copyable:!0,children:d.code})]}),e.jsxs(G,{type:"secondary",children:["有效期至：",new Date(d.expiresAt).toLocaleDateString("zh-CN")]})]})]})}):e.jsxs("div",{style:{textAlign:"center",padding:"32px 0"},children:[e.jsx(Je,{level:5,children:"生成邀请链接"}),e.jsx(ke,{type:"secondary",children:"邀请链接有效期7天，商务人员通过链接可直接注册并加入您的品牌"}),e.jsx(W,{type:"primary",size:"large",icon:e.jsx(Fe,{}),loading:a,onClick:w,children:"生成邀请链接"})]})}),N=()=>{var f,R;return e.jsx("div",{style:{padding:"16px 0"},children:m.sentInvite?e.jsxs("div",{style:{textAlign:"center",padding:"32px 0"},children:[e.jsx(Re,{style:{fontSize:48,color:"#52c41a",marginBottom:16}}),e.jsx(Je,{level:4,children:"邀请已发送"}),e.jsxs(ke,{children:["已向 ",e.jsx(G,{strong:!0,children:(R=m.foundUser)==null?void 0:R.name})," 发送邀请"]}),e.jsx(F,{size:"small",style:{maxWidth:300,margin:"16px auto"},children:e.jsxs(ee,{direction:"vertical",children:[e.jsx(G,{type:"secondary",children:"邀请码"}),e.jsx(G,{code:!0,copyable:!0,style:{fontSize:20},children:m.sentInvite.code})]})}),e.jsx(ke,{type:"secondary",children:'请告知对方在"通知"中查看并确认加入'}),e.jsx(W,{onClick:b,children:"继续邀请"})]}):e.jsxs(ee,{direction:"vertical",style:{width:"100%"},size:"middle",children:[e.jsx(pe,{message:"定向邀请独立商务",description:"输入独立商务的手机号，发送邀请后对方会收到通知，确认邀请码后即可加入您的品牌。",type:"info",showIcon:!0}),e.jsx(k,{layout:"vertical",children:e.jsx(k.Item,{label:"手机号码",children:e.jsx(he.Search,{placeholder:"请输入独立商务的手机号",prefix:e.jsx(Qt,{}),value:m.phone,onChange:D=>p(O=>({...O,phone:D.target.value})),onSearch:j,loading:m.searching,enterButton:"查找",style:{maxWidth:400}})})}),m.foundUser&&e.jsx(F,{size:"small",style:{maxWidth:400},children:e.jsxs(ee,{direction:"vertical",style:{width:"100%"},children:[e.jsxs("div",{children:[e.jsx(G,{strong:!0,children:"找到用户："}),e.jsx(G,{children:m.foundUser.name})]}),e.jsx("div",{children:e.jsxs(G,{type:"secondary",children:["手机号：",(f=m.foundUser.phone)==null?void 0:f.replace(/(\d{3})\d{4}(\d{4})/,"$1****$2")]})}),e.jsx(W,{type:"primary",icon:e.jsx(Gt,{}),loading:m.sending,onClick:y,block:!0,children:"发送邀请"})]})})]})})};return e.jsx(Me,{title:"邀请商务人员",open:t,onCancel:i,footer:null,width:600,children:e.jsxs(xe,{spinning:n,children:[e.jsx(He,{activeKey:u,onChange:x,items:[{key:"link",label:e.jsxs("span",{children:[e.jsx(Fe,{}),"链接邀请"]}),children:M()},{key:"targeted",label:e.jsxs("span",{children:[e.jsx(it,{}),"定向邀请"]}),children:N()}]}),e.jsx(be,{children:"邀请历史"}),l.length>0?e.jsx(fe,{size:"small",dataSource:l,renderItem:f=>e.jsx(fe.Item,{actions:[f.status==="PENDING"&&!P(f.expiresAt)&&e.jsx(W,{type:"link",size:"small",icon:e.jsx(Xe,{}),onClick:()=>S(f.code),children:"复制"},"copy"),f.status==="PENDING"&&e.jsx(ot,{title:"确定要撤销该邀请吗？",onConfirm:()=>v(f.id),okText:"确定",cancelText:"取消",children:e.jsx(W,{type:"link",size:"small",danger:!0,icon:e.jsx(lt,{}),children:"撤销"})},"revoke")].filter(Boolean),children:e.jsx(fe.Item.Meta,{title:e.jsxs(ee,{children:[e.jsx(G,{code:!0,children:f.code}),I(f.status),f.status==="PENDING"&&P(f.expiresAt)&&e.jsx(te,{color:"red",children:"已过期"}),f.inviteType==="TARGETED"&&e.jsx(te,{color:"purple",children:"定向"})]}),description:e.jsxs(ee,{size:"large",children:[e.jsxs(G,{type:"secondary",children:["创建于 ",new Date(f.createdAt).toLocaleString("zh-CN")]}),f.usedByName&&e.jsxs(G,{children:["已被 ",f.usedByName," 使用"]}),f.targetUserName&&e.jsxs(G,{children:["邀请 ",f.targetUserName]})]})})})}):e.jsx(Yt,{description:"暂无邀请记录"}),d&&u==="link"&&e.jsx("div",{style:{marginTop:16,textAlign:"center"},children:e.jsx(W,{icon:e.jsx(dt,{}),loading:a,onClick:w,children:"生成新的邀请链接"})})]})})},xr=({staffId:t,showTrend:i=!0,showSuggestions:n=!0})=>{const[r,a]=g.useState(!0),[s,l]=g.useState(null),[o,d]=g.useState(null);g.useEffect(()=>{c()},[t]);const c=async()=>{try{a(!0),l(null);const h=await ut.getStaffQualityScore(t);d(h)}catch(h){console.error("获取质量评分失败:",h);const w=h.message||"获取质量评分失败";l(w),T.error(w)}finally{a(!1)}},u=h=>h>=90?"#52c41a":h>=80?"#1890ff":h>=70?"#faad14":h>=60?"#fa8c16":"#f5222d",x=h=>h>=90?"优秀":h>=80?"良好":h>=70?"中等":h>=60?"及格":"待提升",m=h=>h>=80?e.jsx(on,{style:{color:"#52c41a"}}):h>=60?e.jsx(Re,{style:{color:"#faad14"}}):e.jsx(ln,{style:{color:"#f5222d"}});if(r)return e.jsx(F,{children:e.jsxs("div",{style:{textAlign:"center",padding:"40px 0"},children:[e.jsx(xe,{size:"large"}),e.jsx("div",{style:{marginTop:16},children:"加载质量评分数据..."})]})});if(s)return e.jsx(F,{children:e.jsx(pe,{message:"加载失败",description:s,type:"error",showIcon:!0})});if(!o)return e.jsx(F,{children:e.jsx(pe,{message:"暂无数据",description:"该商务暂无质量评分数据",type:"info",showIcon:!0})});const p=[{key:"overview",label:"综合评分",children:e.jsxs("div",{children:[e.jsx(F,{style:{marginBottom:16},children:e.jsxs(Ee,{gutter:16,align:"middle",children:[e.jsx(_,{span:8,style:{textAlign:"center"},children:e.jsx("div",{style:{position:"relative",display:"inline-block"},children:e.jsx(_e,{type:"circle",percent:o.overall,format:h=>e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:32,fontWeight:"bold",color:u(h||0)},children:h}),e.jsx("div",{style:{fontSize:14,color:"#666"},children:x(h||0)})]}),strokeColor:u(o.overall),width:180})})}),e.jsx(_,{span:16,children:e.jsxs(Ee,{gutter:[16,16],children:[e.jsx(_,{span:12,children:e.jsx(F,{size:"small",children:e.jsx(X,{title:e.jsxs("span",{children:[e.jsx(Kt,{})," 跟进频率"]}),value:o.followUpFrequency,suffix:"分",valueStyle:{color:u(o.followUpFrequency)},prefix:m(o.followUpFrequency)})})}),e.jsx(_,{span:12,children:e.jsx(F,{size:"small",children:e.jsx(X,{title:e.jsxs("span",{children:[e.jsx(Re,{})," 转化率"]}),value:o.conversionRate,suffix:"分",valueStyle:{color:u(o.conversionRate)},prefix:m(o.conversionRate)})})}),e.jsx(_,{span:12,children:e.jsx(F,{size:"small",children:e.jsx(X,{title:e.jsxs("span",{children:[e.jsx(ht,{})," ROI 表现"]}),value:o.roi,suffix:"分",valueStyle:{color:u(o.roi)},prefix:m(o.roi)})})}),e.jsx(_,{span:12,children:e.jsx(F,{size:"small",children:e.jsx(X,{title:e.jsxs("span",{children:[e.jsx(qt,{})," 工作效率"]}),value:o.efficiency,suffix:"分",valueStyle:{color:u(o.efficiency)},prefix:m(o.efficiency)})})})]})})]})}),n&&o.suggestions&&o.suggestions.length>0&&e.jsx(F,{title:e.jsxs("span",{children:[e.jsx(Zt,{})," 改进建议"]}),children:e.jsx(fe,{dataSource:o.suggestions,renderItem:(h,w)=>e.jsxs(fe.Item,{children:[e.jsx(te,{color:"blue",children:w+1}),h]})})})]})}];return i&&o.trend&&o.trend.length>0&&p.push({key:"trend",label:"评分趋势",children:e.jsx(F,{children:e.jsx(Jt,{width:"100%",height:400,children:e.jsxs(en,{data:o.trend,children:[e.jsx(tn,{strokeDasharray:"3 3"}),e.jsx(nn,{dataKey:"date"}),e.jsx(rn,{domain:[0,100]}),e.jsx(an,{}),e.jsx(sn,{}),e.jsx(Se,{type:"monotone",dataKey:"overall",stroke:"#1890ff",name:"综合评分",strokeWidth:2}),e.jsx(Se,{type:"monotone",dataKey:"followUpFrequency",stroke:"#52c41a",name:"跟进频率"}),e.jsx(Se,{type:"monotone",dataKey:"conversionRate",stroke:"#faad14",name:"转化率"}),e.jsx(Se,{type:"monotone",dataKey:"roi",stroke:"#f5222d",name:"ROI"}),e.jsx(Se,{type:"monotone",dataKey:"efficiency",stroke:"#722ed1",name:"效率"})]})})})}),e.jsx("div",{children:e.jsx(He,{items:p})})},yr=({staffId:t})=>{var j;const[i,n]=g.useState(!1),[r,a]=g.useState(null),[s,l]=g.useState(null),[o,d]=g.useState(mn()),[c,u]=g.useState([]),[x,m]=g.useState(!1);g.useEffect(()=>{p(o)},[t,o]);const p=async y=>{n(!0),a(null);try{const b=y.format("YYYY-MM"),M=await ut.getStaffCalendar(t,b);l(M)}catch(b){console.error("获取日历数据失败:",b),a(b.message||"获取日历数据失败")}finally{n(!1)}},h=y=>{switch(y){case"deadline":return"error";case"scheduled":return"processing";case"followup":return"success";default:return"default"}},w=y=>{switch(y){case"deadline":return"截止日期";case"scheduled":return"排期日期";case"followup":return"跟进提醒";default:return"其他"}},v=y=>{switch(y){case"high":return"#ff4d4f";case"medium":return"#faad14";case"low":return"#52c41a";default:return"#d9d9d9"}},S=y=>{if(!s)return null;const b=y.format("YYYY-MM-DD"),M=s.events.filter(f=>f.date===b),N=s.workload.find(f=>f.date===b);return e.jsxs("div",{style:{minHeight:"60px"},children:[N&&N.count>0&&e.jsx("div",{style:{position:"absolute",top:2,right:2,width:8,height:8,borderRadius:"50%",backgroundColor:v(N.level)},title:`工作量: ${N.count} 项`}),e.jsxs("ul",{style:{listStyle:"none",padding:0,margin:0},children:[M.slice(0,3).map((f,R)=>e.jsx("li",{style:{marginBottom:2},children:e.jsx(Ae,{status:h(f.type),text:e.jsx("span",{style:{fontSize:"12px",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",display:"block",maxWidth:"100px"},children:f.title})})},R)),M.length>3&&e.jsxs("li",{style:{fontSize:"12px",color:"#999"},children:["+",M.length-3," 更多..."]})]})]})},I=y=>{if(!s)return;const b=y.format("YYYY-MM-DD"),M=s.events.filter(N=>N.date===b);M.length>0&&(u(M),m(!0))},P=y=>{d(y)};return i&&!s?e.jsx("div",{style:{textAlign:"center",padding:"50px"},children:e.jsx(xe,{size:"large",tip:"加载日历数据..."})}):r?e.jsx(pe,{message:"加载失败",description:r,type:"error",showIcon:!0}):s?e.jsxs("div",{children:[e.jsxs(Ee,{gutter:16,style:{marginBottom:16},children:[e.jsx(_,{span:6,children:e.jsx(F,{children:e.jsx(X,{title:"总事件数",value:s.stats.totalEvents,suffix:"项"})})}),e.jsx(_,{span:6,children:e.jsx(F,{children:e.jsx(X,{title:"截止日期",value:s.stats.deadlines,suffix:"个",valueStyle:{color:"#ff4d4f"}})})}),e.jsx(_,{span:6,children:e.jsx(F,{children:e.jsx(X,{title:"排期日期",value:s.stats.scheduled,suffix:"个",valueStyle:{color:"#1890ff"}})})}),e.jsx(_,{span:6,children:e.jsx(F,{children:e.jsx(X,{title:"平均日工作量",value:s.stats.avgDailyWorkload.toFixed(1),suffix:"项",valueStyle:{color:"#52c41a"}})})})]}),e.jsx(F,{size:"small",style:{marginBottom:16},children:e.jsxs("div",{style:{display:"flex",gap:24,flexWrap:"wrap"},children:[e.jsx("div",{children:e.jsx(Ae,{status:"error",text:"截止日期"})}),e.jsx("div",{children:e.jsx(Ae,{status:"processing",text:"排期日期"})}),e.jsx("div",{children:e.jsx(Ae,{status:"success",text:"跟进提醒"})}),e.jsxs("div",{style:{marginLeft:24},children:[e.jsx("span",{style:{marginRight:8},children:"工作负载:"}),e.jsx("span",{style:{display:"inline-block",width:12,height:12,borderRadius:"50%",backgroundColor:"#52c41a",marginRight:4}}),e.jsx("span",{style:{marginRight:12},children:"低"}),e.jsx("span",{style:{display:"inline-block",width:12,height:12,borderRadius:"50%",backgroundColor:"#faad14",marginRight:4}}),e.jsx("span",{style:{marginRight:12},children:"中"}),e.jsx("span",{style:{display:"inline-block",width:12,height:12,borderRadius:"50%",backgroundColor:"#ff4d4f",marginRight:4}}),e.jsx("span",{children:"高"})]})]})}),e.jsx(F,{children:e.jsx(gt,{dateCellRender:S,onSelect:I,onPanelChange:P})}),e.jsx(Me,{title:`${(j=c[0])==null?void 0:j.date} 的工作安排`,open:x,onCancel:()=>m(!1),footer:null,width:600,children:e.jsx(fe,{dataSource:c,renderItem:y=>e.jsx(fe.Item,{children:e.jsx(fe.Item.Meta,{title:e.jsxs("div",{children:[e.jsx(te,{color:h(y.type),children:w(y.type)}),e.jsx("span",{children:y.title})]}),description:e.jsxs("div",{children:[e.jsxs("div",{children:["达人: ",y.influencerName]}),e.jsxs("div",{children:["阶段: ",y.stage]}),e.jsxs("div",{style:{color:"#999",fontSize:"12px"},children:["合作ID: ",y.collaborationId]})]})})})})})]}):null},jr=({visible:t,staffId:i,onCancel:n})=>{const[r,a]=g.useState(!1),[s,l]=g.useState(null);g.useEffect(()=>{t&&i&&o()},[t,i]);const o=async()=>{a(!0);try{const c=await cr(i);l(c)}catch{T.error("获取商务账号详情失败")}finally{a(!1)}},d=c=>`¥${(c/100).toFixed(2)}`;return e.jsx(Me,{title:"商务账号详情",open:t,onCancel:n,footer:null,width:1e3,children:r?e.jsx("div",{style:{textAlign:"center",padding:"40px 0"},children:e.jsx(xe,{size:"large"})}):s?e.jsx(He,{items:[{key:"basic",label:"基本信息",children:e.jsxs("div",{children:[e.jsxs(we,{title:"基本信息",column:2,bordered:!0,children:[e.jsx(we.Item,{label:"姓名",children:s.name}),e.jsx(we.Item,{label:"邮箱",children:s.email}),e.jsx(we.Item,{label:"状态",children:s.status==="ACTIVE"?"正常":"已禁用"}),e.jsx(we.Item,{label:"加入时间",children:new Date(s.createdAt).toLocaleString("zh-CN")})]}),e.jsx(be,{children:"工作统计"}),e.jsxs(Ee,{gutter:[16,16],children:[e.jsx(_,{span:8,children:e.jsx(de,{children:e.jsx(ue,{children:e.jsx(X,{title:"管理的达人数量",value:s.stats.influencerCount,prefix:e.jsx(pn,{}),valueStyle:{color:"#1890ff"}})})})}),e.jsx(_,{span:8,children:e.jsx(de,{children:e.jsx(ue,{children:e.jsx(X,{title:"创建的合作数量",value:s.stats.collaborationCount,prefix:e.jsx(xn,{}),valueStyle:{color:"#52c41a"}})})})}),e.jsx(_,{span:8,children:e.jsx(de,{children:e.jsx(ue,{children:e.jsx(X,{title:"寄样次数",value:s.stats.dispatchCount,prefix:e.jsx(yn,{}),valueStyle:{color:"#faad14"}})})})}),e.jsx(_,{span:8,children:e.jsx(de,{children:e.jsx(ue,{children:e.jsx(X,{title:"成交数量",value:s.stats.closedDeals,prefix:e.jsx(jn,{}),valueStyle:{color:"#722ed1"}})})})}),e.jsx(_,{span:16,children:e.jsx(de,{children:e.jsx(ue,{children:e.jsx(X,{title:"总GMV",value:d(s.stats.totalGmv),prefix:e.jsx(ht,{}),valueStyle:{color:"#eb2f96",fontSize:24}})})})})]})]})},{key:"quality",label:e.jsxs("span",{children:[e.jsx(ir,{})," 质量评分"]}),children:e.jsx(xr,{staffId:i,showTrend:!0,showSuggestions:!0})},{key:"calendar",label:e.jsxs("span",{children:[e.jsx(gn,{})," 工作日历"]}),children:e.jsx(yr,{staffId:i})}]}):e.jsx("div",{style:{textAlign:"center",padding:"40px 0"},children:"暂无数据"})})},{Title:Te,Text:et,Paragraph:Ve}=We,Cr=({visible:t,staffId:i,staffName:n,onCancel:r,onSuccess:a})=>{const[s]=k.useForm(),[l,o]=g.useState(!1),[d,c]=g.useState(!1),[u,x]=g.useState([]),[m,p]=g.useState("basic"),[h,w]=g.useState(null);g.useEffect(()=>{t&&v()},[t,i]);const v=async()=>{o(!0);try{const[j,y]=await Promise.all([gr(),fr(i)]);x(j),w(y.permissions),p(y.template),s.setFieldsValue(y.permissions)}catch{T.error("加载权限数据失败")}finally{o(!1)}},S=j=>{p(j);const y=u.find(b=>b.id===j);y&&(w(y.permissions),s.setFieldsValue(y.permissions))},I=async()=>{try{const j=await s.validateFields();c(!0),await mr(i,j),T.success("权限更新成功"),a()}catch(j){if(j.errorFields)return;T.error(j.message||"权限更新失败")}finally{c(!1)}},P=()=>{const j=s.getFieldsValue(),y=u.find(b=>b.id==="custom"?!1:JSON.stringify(b.permissions)===JSON.stringify(j));p((y==null?void 0:y.id)||"custom")};return e.jsx(Me,{title:`设置权限 - ${n}`,open:t,onCancel:r,onOk:I,confirmLoading:d,width:800,okText:"保存并应用",cancelText:"取消",children:l?e.jsx("div",{style:{textAlign:"center",padding:"40px 0"},children:e.jsx(xe,{size:"large"})}):e.jsxs(e.Fragment,{children:[e.jsx(pe,{message:"权限说明",description:"修改权限后立即生效，商务人员无需重新登录。工厂老板始终拥有所有权限。",type:"info",showIcon:!0,style:{marginBottom:24}}),e.jsxs("div",{style:{marginBottom:24},children:[e.jsx(Te,{level:5,children:"快速选择模板"}),e.jsx(qe.Group,{value:m,onChange:j=>S(j.target.value),style:{width:"100%"},children:e.jsx(ee,{direction:"vertical",style:{width:"100%"},children:u.map(j=>e.jsx(qe,{value:j.id,style:{width:"100%"},children:e.jsxs("div",{children:[e.jsx(et,{strong:!0,children:j.name}),e.jsx("br",{}),e.jsx(et,{type:"secondary",style:{fontSize:12},children:j.description})]})},j.id))})})]}),e.jsx(be,{}),e.jsxs(k,{form:s,layout:"vertical",initialValues:h||void 0,onValuesChange:P,children:[e.jsx(Te,{level:5,children:"数据可见性权限"}),e.jsx(Ve,{type:"secondary",style:{fontSize:12},children:"控制商务可以查看哪些数据"}),e.jsx(k.Item,{name:["dataVisibility","viewOthersInfluencers"],valuePropName:"checked",children:e.jsx(H,{children:"查看其他商务的达人信息"})}),e.jsx(k.Item,{name:["dataVisibility","viewOthersCollaborations"],valuePropName:"checked",children:e.jsx(H,{children:"查看其他商务的合作记录"})}),e.jsx(k.Item,{name:["dataVisibility","viewOthersPerformance"],valuePropName:"checked",children:e.jsx(H,{children:"查看其他商务的业绩数据"})}),e.jsx(k.Item,{name:["dataVisibility","viewTeamData"],valuePropName:"checked",children:e.jsx(H,{children:"查看团队整体数据"})}),e.jsx(k.Item,{name:["dataVisibility","viewRanking"],valuePropName:"checked",children:e.jsx(H,{children:"查看排行榜"})}),e.jsx(be,{}),e.jsx(Te,{level:5,children:"操作权限"}),e.jsx(Ve,{type:"secondary",style:{fontSize:12},children:"控制商务可以执行哪些操作"}),e.jsx(k.Item,{name:["operations","manageInfluencers"],valuePropName:"checked",children:e.jsx(H,{children:"创建/编辑/删除达人"})}),e.jsx(k.Item,{name:["operations","manageSamples"],valuePropName:"checked",children:e.jsx(H,{children:"创建/编辑/删除样品"})}),e.jsx(k.Item,{name:["operations","manageCollaborations"],valuePropName:"checked",children:e.jsx(H,{children:"创建/编辑合作记录"})}),e.jsx(k.Item,{name:["operations","deleteCollaborations"],valuePropName:"checked",children:e.jsx(H,{children:"删除合作记录"})}),e.jsx(k.Item,{name:["operations","exportData"],valuePropName:"checked",children:e.jsx(H,{children:"导出数据"})}),e.jsx(k.Item,{name:["operations","batchOperations"],valuePropName:"checked",children:e.jsx(H,{children:"批量操作"})}),e.jsx(be,{}),e.jsx(Te,{level:5,children:"高级权限"}),e.jsx(Ve,{type:"secondary",style:{fontSize:12},children:"敏感数据和高级功能权限"}),e.jsx(k.Item,{name:["advanced","viewCostData"],valuePropName:"checked",children:e.jsx(H,{children:"查看成本数据"})}),e.jsx(k.Item,{name:["advanced","viewROIData"],valuePropName:"checked",children:e.jsx(H,{children:"查看ROI数据"})}),e.jsx(k.Item,{name:["advanced","modifyOthersData"],valuePropName:"checked",children:e.jsx(H,{children:"修改其他商务的数据"})})]})]})})},{Title:Sr,Text:me}=We,Oa=()=>{const{theme:t}=Ot(),[i,n]=g.useState(!1),[r,a]=g.useState([]),[s,l]=g.useState(0),[o,d]=g.useState({page:1,pageSize:10}),[c,u]=g.useState(null),[x,m]=g.useState(!1),[p,h]=g.useState(!1),[w,v]=g.useState(!1),[S,I]=g.useState(!1),[P,j]=g.useState(null),[y,b]=g.useState(""),M=g.useCallback(async()=>{n(!0);try{const C=await or(o.page,o.pageSize);a(C.data),l(C.total)}catch{T.error("获取商务账号列表失败")}finally{n(!1)}},[o]),N=g.useCallback(async()=>{try{const C=await lr();u(C)}catch(C){console.error("Failed to fetch quota:",C)}},[]);g.useEffect(()=>{M(),N()},[M,N]);const f=C=>{d({page:C.current||1,pageSize:C.pageSize||10})},R=()=>{if(c!=null&&c.staff.isReached){T.warning("已达到商务账号数量上限，请升级套餐");return}m(!0)},D=()=>{m(!1),M(),N(),T.success("商务账号创建成功")},O=C=>{j(C),v(!0)},z=C=>{j(C.id),b(C.name),I(!0)},J=()=>{I(!1),j(null),b(""),T.success("权限更新成功，立即生效"),M()},B=async C=>{const L=C.status==="ACTIVE"?"DISABLED":"ACTIVE",Z=L==="DISABLED"?"禁用":"启用";try{await ur(C.id,L),T.success(`${Z}成功`),M()}catch{T.error(`${Z}失败`)}},oe=async C=>{try{await hr(C),T.success("删除成功"),M(),N()}catch{T.error("删除失败")}},q=[{title:"姓名",dataIndex:"name",key:"name",width:120},{title:"邮箱",dataIndex:"email",key:"email",width:180,render:C=>C!=null&&C.includes("@phone.local")?"-":C},{title:"手机号",dataIndex:"phone",key:"phone",width:130,render:C=>C||"-"},{title:"状态",dataIndex:"status",key:"status",width:100,render:C=>C==="ACTIVE"?e.jsx(te,{color:"success",children:"正常"}):e.jsx(te,{color:"default",children:"已禁用"})},{title:"加入时间",dataIndex:"createdAt",key:"createdAt",width:180,render:C=>new Date(C).toLocaleString("zh-CN")},{title:"操作",key:"action",width:320,render:(C,L)=>e.jsxs(ee,{size:"small",children:[e.jsx(W,{type:"link",size:"small",icon:e.jsx(bn,{}),onClick:()=>O(L.id),children:"查看详情"}),e.jsx(W,{type:"link",size:"small",icon:e.jsx(rr,{}),onClick:()=>z(L),children:"权限设置"}),e.jsx(W,{type:"link",size:"small",icon:L.status==="ACTIVE"?e.jsx(lt,{}):e.jsx(Re,{}),onClick:()=>B(L),children:L.status==="ACTIVE"?"禁用":"启用"}),e.jsx(ot,{title:"确认删除",description:"删除后该商务无法登录，但其创建的达人和合作记录将保留。此操作不可撤销，确定要删除吗？",onConfirm:()=>oe(L.id),okText:"确定",cancelText:"取消",okButtonProps:{danger:!0},children:e.jsx(W,{type:"link",size:"small",danger:!0,icon:e.jsx(Rn,{}),children:"删除"})})]})}];return e.jsx("div",{style:{minHeight:"100vh",background:`linear-gradient(135deg, ${t.colors.background.secondary} 0%, ${t.colors.background.tertiary} 100%)`,position:"relative",padding:"24px",margin:"-24px"},children:e.jsxs("div",{style:{position:"relative",zIndex:1},children:[e.jsx(Sr,{level:2,children:"团队管理"}),c&&e.jsxs(Ee,{gutter:16,style:{marginBottom:24,display:"flex",alignItems:"stretch"},children:[e.jsx(_,{span:12,children:e.jsx(de,{style:{height:"100%"},children:e.jsxs(ue,{children:[e.jsx("div",{style:{marginBottom:16},children:e.jsx(me,{strong:!0,style:{fontSize:16},children:"商务账号配额"})}),e.jsx("div",{style:{marginBottom:8},children:e.jsxs(me,{children:["已开通 ",c.staff.current,"/",c.staff.limit]})}),e.jsx(_e,{percent:Math.round(c.staff.current/c.staff.limit*100),status:c.staff.isReached?"exception":"active",strokeColor:c.staff.isReached?"#ff4d4f":"#1890ff"}),c.staff.isReached&&e.jsx(me,{type:"danger",style:{fontSize:12,marginTop:8,display:"block"},children:"已达上限，请升级套餐"})]})})}),e.jsx(_,{span:12,children:e.jsx(de,{style:{height:"100%"},children:e.jsxs(ue,{children:[e.jsx("div",{style:{marginBottom:16},children:e.jsx(me,{strong:!0,style:{fontSize:16},children:"达人数量配额"})}),e.jsx("div",{style:{marginBottom:8},children:e.jsxs(me,{children:["已添加 ",c.influencer.current,"/",c.influencer.limit]})}),e.jsx(_e,{percent:Math.round(c.influencer.current/c.influencer.limit*100),status:c.influencer.isReached?"exception":"active",strokeColor:c.influencer.isReached?"#ff4d4f":"#1890ff"}),c.influencer.isReached&&e.jsx(me,{type:"danger",style:{fontSize:12,marginTop:8,display:"block"},children:"已达上限，请升级套餐"})]})})})]}),(c==null?void 0:c.staff.isReached)&&e.jsx(pe,{message:"商务账号配额已达上限",description:"您已达到当前套餐的商务账号数量上限，无法添加新的商务账号。请升级套餐以获取更多配额。",type:"warning",icon:e.jsx(Sn,{}),showIcon:!0,closable:!0,style:{marginBottom:16}}),e.jsx(de,{children:e.jsxs(ue,{children:[e.jsxs("div",{style:{marginBottom:16,display:"flex",justifyContent:"space-between"},children:[e.jsx("div",{children:e.jsxs(me,{type:"secondary",children:["共 ",s," 个商务账号",c&&` (配额: ${c.staff.current}/${c.staff.limit})`]})}),e.jsxs(ee,{children:[e.jsx(W,{icon:e.jsx(it,{}),onClick:()=>h(!0),children:"邀请商务"}),e.jsx(W,{type:"primary",icon:e.jsx(wn,{}),onClick:R,disabled:c==null?void 0:c.staff.isReached,children:"添加商务账号"})]})]}),e.jsx(Cn,{columns:q,dataSource:r,rowKey:"id",loading:i,pagination:{current:o.page,pageSize:o.pageSize,total:s,showSizeChanger:!0,showTotal:C=>`共 ${C} 条`},onChange:f})]})}),e.jsx(vr,{visible:x,onCancel:()=>m(!1),onSuccess:D}),e.jsx(pr,{visible:p,onCancel:()=>h(!1)}),P&&e.jsx(jr,{visible:w,staffId:P,onCancel:()=>{v(!1),j(null)}}),P&&e.jsx(Cr,{visible:S,staffId:P,staffName:y,onCancel:()=>{I(!1),j(null),b("")},onSuccess:J})]})})};export{Oa as default};
