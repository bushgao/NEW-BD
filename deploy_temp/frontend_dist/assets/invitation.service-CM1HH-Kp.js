import{r as n}from"./api-W_2ufh2E.js";async function g(){var e;const t=await n("post","/invitations");if(!t.success)throw new Error(((e=t.error)==null?void 0:e.message)||"创建邀请失败");return t.data}async function h(t){var s;const e=await n("get",`/invitations/code/${t}`);if(!e.success)throw new Error(((s=e.error)==null?void 0:s.message)||"获取邀请信息失败");return e.data}async function m(t){var r;const s=await n("get","/invitations",void 0);if(!s.success)throw new Error(((r=s.error)==null?void 0:r.message)||"获取邀请列表失败");return s.data}async function l(t){var s;const e=await n("delete",`/invitations/${t}`);if(!e.success)throw new Error(((s=e.error)==null?void 0:s.message)||"撤销邀请失败")}async function v(t){var s;const e=await n("get","/invitations/search-business",{phone:t});if(!e.success)throw new Error(((s=e.error)==null?void 0:s.message)||"未找到该手机号对应的独立商务");return e.data}async function y(t){var s;const e=await n("post","/invitations/targeted",{targetPhone:t});if(!e.success)throw new Error(((s=e.error)==null?void 0:s.message)||"发送邀请失败");return e.data}async function E(){var e;const t=await n("get","/invitations/received");if(!t.success)throw new Error(((e=t.error)==null?void 0:e.message)||"获取邀请列表失败");return t.data}async function b(t,e=!1){var r;const s=await n("post",`/invitations/targeted/${t}/accept`,{migrateInfluencers:e});if(!s.success)throw new Error(((r=s.error)==null?void 0:r.message)||"接受邀请失败")}async function k(t){var s;const e=await n("delete",`/invitations/targeted/${t}/reject`);if(!e.success)throw new Error(((s=e.error)==null?void 0:s.message)||"拒绝邀请失败")}async function I(){var e;const t=await n("get","/invitations/backup-summary");if(!t.success)throw new Error(((e=t.error)==null?void 0:e.message)||"获取备份汇总失败");return t.data}async function U(){var c,u,w;const t=localStorage.getItem("auth-storage");if(!t)throw new Error("未登录");const e=JSON.parse(t),s=(u=(c=e==null?void 0:e.state)==null?void 0:c.token)==null?void 0:u.accessToken;if(!s)throw new Error("token 无效");const o=await fetch("http://localhost:3000/api/invitations/backup-export",{headers:{Authorization:`Bearer ${s}`}});if(!o.ok)throw new Error("下载失败");const d=await o.blob(),p=decodeURIComponent(((w=o.headers.get("Content-Disposition"))==null?void 0:w.split("filename*=UTF-8''")[1])||`数据备份_${new Date().toISOString().slice(0,10)}.xlsx`),i=URL.createObjectURL(d),a=document.createElement("a");a.href=i,a.download=p,document.body.appendChild(a),a.click(),document.body.removeChild(a),URL.revokeObjectURL(i)}export{I as a,b,l as c,U as d,g as e,y as f,E as g,h,m as l,k as r,v as s};
