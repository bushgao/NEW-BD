# ICS å‰ç«¯å¼€å‘è§„èŒƒï¼ˆä¸­æ–‡å®Œæ•´ç‰ˆ v2.0ï¼‰

> æœ¬æ–‡æ¡£å®šä¹‰äº†è¾¾äººåˆä½œç³»ç»Ÿ(ICS)çš„å®Œæ•´å¼€å‘æ ‡å‡†ï¼Œ**æ¯æ¬¡åˆ›å»ºæˆ–ä¿®æ”¹é¡µé¢å¿…é¡»éµå¾ª**ã€‚
>
> æ›´æ–°æ—¥æœŸ: 2026-01-19

---

## ğŸ“ ä¸€ã€é¡µé¢å¸ƒå±€è§„èŒƒ

### 1.1 å…¨é¡µèƒŒæ™¯å¯¹é½ï¼ˆå¿…é¡»ï¼‰

æ¯ä¸ªé¡µé¢çš„ä¸»å®¹å™¨å¿…é¡»ä½¿ç”¨ä»¥ä¸‹æ ·å¼ï¼Œç¡®ä¿æ¸å˜èƒŒæ™¯å»¶ä¼¸åˆ°è§†çª—è¾¹ç¼˜ï¼š

```tsx
import { useTheme } from '../../theme/ThemeProvider';

const MyPage = () => {
  const { theme } = useTheme();

  return (
    <div style={{
      minHeight: '100vh',
      background: `linear-gradient(135deg, ${theme.colors.background.secondary} 0%, ${theme.colors.background.tertiary} 100%)`,
      position: 'relative',
      padding: '24px',      // âš ï¸ å¿…é¡»æ˜¯24px
      margin: '-24px',      // âš ï¸ å¿…é¡»æ˜¯-24px
    }}>
      <div style={{ position: 'relative', zIndex: 1 }}>
        {/* å†…å®¹ */}
      </div>
    </div>
  );
};
```

| å±æ€§ | å€¼ | ç”¨é€” |
|------|-----|------|
| `padding` | `24px` | å†…å®¹é—´è· |
| `margin` | `-24px` | æ‰©å±•èƒŒæ™¯è¦†ç›–çˆ¶å®¹å™¨çš„padding |
| `minHeight` | `100vh` | ç¡®ä¿å…¨è§†çª—è¦†ç›– |

### 1.2 é—´è·è§„èŒƒï¼ˆGap-4 æ ‡å‡†ï¼‰

**æ‰€æœ‰ä»ªè¡¨ç›˜å¸ƒå±€å¿…é¡»ä½¿ç”¨ `gap-4` (16px)**ï¼š

```tsx
// âœ… æ­£ç¡®
<div className="flex flex-col gap-4">
<div className="grid grid-cols-6 gap-4">

// âŒ é”™è¯¯ - ç¦æ­¢åœ¨ä»ªè¡¨ç›˜ä½¿ç”¨gap-6
<div className="flex flex-col gap-6">
```

| åœºæ™¯ | é—´è· | Tailwindç±» |
|------|------|------------|
| ä»ªè¡¨ç›˜è¡Œé—´è· | 16px | `gap-4` |
| å¡ç‰‡å†…éƒ¨padding | 24px | `p-6` |
| å°å…ƒç´ ç´§å‡‘é—´è· | 8px | `gap-2` |

> âš ï¸ **ç¦æ­¢é™·é˜±**ï¼šä¸è¦åœ¨å·²æœ‰ `gap-X` çš„å®¹å™¨ä¸Šé¢å¤–æ·»åŠ  `pb-X`ï¼ˆåº•éƒ¨paddingï¼‰ï¼Œä¼šå¯¼è‡´é—´è·å åŠ ï¼

### 1.3 6åˆ—åˆ†æ å¸ƒå±€ï¼ˆSplit Sidebarï¼‰

ç”¨äºä¸»ä»ªè¡¨ç›˜çš„"æ§åˆ¶ä¸­å¿ƒ"å¸ƒå±€ï¼š

```tsx
// 6åˆ—åˆ†æ ï¼šå·¦2åˆ—æ“ä½œåŒº + å³4åˆ—åˆ†æåŒº
<div className="grid xl:grid-cols-6 gap-4">
  {/* æ“ä½œåŒº - ä»»åŠ¡åˆ—è¡¨/èµ„æºæ¦‚è§ˆ */}
  <div className="xl:col-span-2">
    <BentoCard>ä»»åŠ¡åˆ—è¡¨</BentoCard>
  </div>
  
  {/* åˆ†æåŒº - KPIç½‘æ ¼ */}
  <div className="xl:col-span-4">
    <div className="grid grid-cols-2 lg:grid-cols-4 gap-4">
      <BentoCard>KPI 1</BentoCard>
      <BentoCard>KPI 2</BentoCard>
      {/* ... */}
    </div>
  </div>
</div>
```

---

## ğŸ¨ äºŒã€è®¾è®¡è§„èŒƒ

### 2.1 åœ†è§’è§„èŒƒï¼ˆ8px æ ‡å‡†ï¼‰

| å…ƒç´  | åœ†è§’ | Tailwindç±» |
|------|------|------------|
| å†…å®¹å¡ç‰‡ | 8px | `rounded-lg` |
| æŒ‰é’®/è¾“å…¥æ¡† | 6px | `rounded-md` |
| å°æ ‡ç­¾ | 4px | `rounded` |
| æ¨¡æ€æ¡† | 10px | `rounded-xl` |

> âš ï¸ **ç¦æ­¢** ä½¿ç”¨ `rounded-2xl` æˆ– `rounded-3xl`ï¼Œè¿™äº›æ˜¯é—ç•™çš„"ç»ç’ƒæ€"æ ·å¼

### 2.2 é¢œè‰²è§„èŒƒ

| ç±»å‹ | è‰²å€¼ | ç”¨é€” |
|------|------|------|
| å“ç‰Œè“ | `#0c8ce9` | ä¸»æŒ‰é’®ã€é“¾æ¥ |
| æˆåŠŸç»¿ | `#34c759` / `#52c41a` | æˆåŠŸçŠ¶æ€ |
| è­¦å‘Šæ©™ | `#ff9f0a` / `#fa8c16` | è­¦å‘Šä¿¡æ¯ |
| é”™è¯¯çº¢ | `#ff3b30` / `#ff4d4f` | é”™è¯¯æç¤º |
| ä¸»æ ‡é¢˜ | `#1a2332` | é¡µé¢æ ‡é¢˜ |
| æ­£æ–‡ | `#3e4c59` | å†…å®¹æ–‡å­— |
| æ¬¡è¦æ–‡å­— | `#7a8a9e` | è¾…åŠ©è¯´æ˜ |
| è¾¹æ¡† | `#f0f0f0` | å¡ç‰‡è¾¹æ¡† |
| èƒŒæ™¯ | `#f5f7fa` | ä¸»èƒŒæ™¯ |

### 2.3 è§’è‰²æ ‡ç­¾é¢œè‰²

| è§’è‰² | Ant Design Color | ä¸­æ–‡æ ‡ç­¾ |
|------|------------------|----------|
| PLATFORM_ADMIN | `purple` | å¹³å°ç®¡ç†å‘˜ |
| BRAND | `blue` | å“ç‰Œ |
| BUSINESS | `green` | å•†åŠ¡ |
| INFLUENCER | `cyan` | è¾¾äºº |
| INDEPENDENT | `default` (gray) | ç‹¬ç«‹ |

### 2.4 è®¢é˜…çŠ¶æ€é¢œè‰²

| çŠ¶æ€ | æ–‡æœ¬è‰² | èƒŒæ™¯è‰² | æ ‡ç­¾ |
|------|--------|--------|------|
| å·²åˆ°æœŸ (â‰¤0å¤©) | `#ff4d4f` | `#fff2f0` | "å·²åˆ°æœŸ" |
| ç´§æ€¥ (â‰¤5å¤©) | `#fa8c16` | `#fff7e6` | "å‰©ä½™ X å¤©" |
| è­¦å‘Š (â‰¤30å¤©) | `#faad14` | `#fffbe6` | "å‰©ä½™ X å¤©" |
| å¥åº· (>30å¤©) | `#52c41a` | `#f6ffed` | "å‰©ä½™ X å¤©" |

---

## ğŸ§© ä¸‰ã€ç»„ä»¶è§„èŒƒ

### 3.1 å¡ç‰‡ç»„ä»¶é€‰æ‹©

| åœºæ™¯ | æ¨èç»„ä»¶ | è¯´æ˜ |
|------|----------|------|
| ä»ªè¡¨ç›˜ç»Ÿè®¡å¡ç‰‡ | `BentoCard` | ç»Ÿä¸€ç™½è‰²èƒŒæ™¯+è¾¹æ¡†æ ·å¼ |
| é€šç”¨å†…å®¹å®¹å™¨ | `Card` | æ”¯æŒ `variant="elevated"` / `variant="outlined"` |
| è¡¨æ ¼/è¡¨å•å®¹å™¨ | `Card` + `CardContent` | åŒ…è£¹Ant Designç»„ä»¶ |

```tsx
// ä»ªè¡¨ç›˜å¸ƒå±€ç¤ºä¾‹
<BentoGrid>
  <BentoCard span={2}>ç»Ÿè®¡1</BentoCard>
  <BentoCard span={4}>ç»Ÿè®¡2</BentoCard>
  <BentoCard span={6}>å…¨å®½å†…å®¹</BentoCard>
</BentoGrid>
```

> âš ï¸ **ç¦æ­¢** ç›´æ¥ä½¿ç”¨ Ant Design åŸç”Ÿ `<Card>`ï¼Œå®ƒçš„åœ†è§’å’Œé˜´å½±ä¸ä¸»é¢˜ä¸ä¸€è‡´

### 3.2 è´§å¸è¾“å…¥è§„èŒƒ

- **å­˜å‚¨æ ¼å¼**: æ‰€æœ‰é‡‘é¢ä»¥ **åˆ†** ä¸ºå•ä½å­˜å‚¨ï¼ˆæ•´æ•°ï¼‰
- **æ˜¾ç¤ºæ ¼å¼**: `Â¥*,***.**`ï¼ˆåƒåˆ†ç¬¦ + ä¸¤ä½å°æ•°ï¼‰
- **è¾“å…¥ç»„ä»¶**: å¿…é¡»ä½¿ç”¨ `<InputNumber>`ï¼Œç¦æ­¢ä½¿ç”¨åŸç”Ÿ `<input type="number">`
- **å·¥å…·å‡½æ•°**: ä½¿ç”¨ `formatMoney()` æˆ– `formatMoneyWithSymbol()` from `utils/money.ts`

### 3.3 è¡¨å•å¸ƒå±€è§„èŒƒ

- ä½¿ç”¨å‚ç›´å¸ƒå±€ (`layout="vertical"`)
- ä½¿ç”¨ `Row` + `Col` å®ç°æ°´å¹³åˆ†ç»„ï¼Œ`gutter={16}`
- å¿…å¡«å­—æ®µä½¿ç”¨ `rules={[{ required: true }]}`

---

## ğŸ”Œ å››ã€èœå•ä¸è·¯ç”±è§„èŒƒ

### 4.1 èœå•æ·»åŠ ä½ç½®

| ç«¯å£ | å¸ƒå±€æ–‡ä»¶ | èœå•æ•°ç»„ |
|------|----------|----------|
| ç®¡ç†ç«¯ | `MainLayout.tsx` | `adminItems` |
| å“ç‰Œç«¯ | `MainLayout.tsx` | `ownerItems` |
| å•†åŠ¡ç«¯ | `MainLayout.tsx` | `businessItems` |
| ç‹¬ç«‹å•†åŠ¡ç«¯ | `MainLayout.tsx` | `independentItems` |
| è¾¾äººç«¯ | `InfluencerPortalLayout.tsx` | `menuItems` |

### 4.2 è·¯ç”±æ·»åŠ ä½ç½®

è·¯ç”±é…ç½®æ–‡ä»¶: `src/routes/index.tsx`

```tsx
// 1. æ·»åŠ æ‡’åŠ è½½å¯¼å…¥
const MyNewPage = lazy(() => import('../pages/MyNewPage'));

// 2. åœ¨å¯¹åº”çš„RouteåŒºå—æ·»åŠ è·¯ç”±
// æ™®é€šç”¨æˆ·è·¯ç”± (éœ€è®¤è¯)
<Route path="my-page" element={
  <RoleRoute allowedRoles={['BRAND', 'BUSINESS']}>
    <MyNewPage />
  </RoleRoute>
} />

// ç®¡ç†å‘˜è·¯ç”±
<Route path="my-admin-page" element={<MyNewPage />} />

// è¾¾äººç«¯å£è·¯ç”±
<Route path="my-influencer-page" element={<MyNewPage />} />
```

---

## ğŸ’¾ äº”ã€åç«¯æ¥å£è§„èŒƒ

### 5.1 å…¨æ ˆåŒæ­¥æ¨¡å¼ï¼ˆFull-Stack Loopï¼‰

å½“æ·»åŠ æ–°å­—æ®µæ—¶ï¼Œå¿…é¡»åŒæ­¥ä»¥ä¸‹æ‰€æœ‰ä½ç½®ï¼š

1. **Prisma Schema** (`prisma/schema.prisma`) - æ·»åŠ å­—æ®µ
2. **åç«¯Serviceç±»å‹** (`services/*.service.ts`) - æ›´æ–°æ¥å£å®šä¹‰
3. **åç«¯Routeæå–** (`routes/*.routes.ts`) - ä» `req.body` è§£æ„æ–°å­—æ®µ
4. **å‰ç«¯Serviceç±»å‹** (`services/*.service.ts`) - æ›´æ–°æ¥å£å®šä¹‰
5. **å‰ç«¯ç»„ä»¶** - ä½¿ç”¨æ–°å­—æ®µ

> âš ï¸ ä»»ä¸€å±‚é—æ¼ä¼šå¯¼è‡´"å¹½çµæ•°æ®"ï¼ˆUIæ˜¾ç¤ºä½†DBæ²¡æœ‰ï¼‰æˆ–"UIç›²åŒº"ï¼ˆDBæœ‰ä½†UIä¸æ˜¾ç¤ºï¼‰

### 5.2 Prisma è¿ç§»æ­¥éª¤ï¼ˆWindowsï¼‰

```bash
# 1. åœæ­¢æ‰€æœ‰æœåŠ¡ï¼ˆé¿å…EPERMé”ï¼‰
taskkill /F /IM node.exe

# 2. åŒæ­¥æ•°æ®åº“
npx prisma db push

# 3. é‡æ–°ç”Ÿæˆå®¢æˆ·ç«¯
npx prisma generate

# 4. é‡å¯æœåŠ¡
npm run dev
```

---

## ğŸ·ï¸ å…­ã€æœ¯è¯­è§„èŒƒ

### 6.1 å“ç‰ŒåŒ–æœ¯è¯­

| æ—§æœ¯è¯­ | æ–°æœ¯è¯­ | ä»£ç ä¿ç•™ |
|--------|--------|----------|
| å·¥å‚ | å“ç‰Œ | `Brand` model |
| è€æ¿ | å“ç‰Œ | `BRAND` role |
| å·¥å‚ç®¡ç† | å“ç‰Œç®¡ç† | - |
| æ‰€å±å·¥å‚ | åˆä½œè¿‡çš„å“ç‰Œ | - |

### 6.2 çŠ¶æ€æ ‡ç­¾

| çŠ¶æ€ | ä¸­æ–‡æ ‡ç­¾ | é¢œè‰² |
|------|----------|------|
| PENDING | å¹³å°å®¡æ ¸ä¸­ | `orange` |
| APPROVED | å·²å®¡æ ¸ | `green` |
| REJECTED | å®¡æ ¸æœªé€šè¿‡ | `red` |
| SUSPENDED | å“ç‰Œå·²æš‚åœ | `red` |

---

## ğŸ” ä¸ƒã€è®¤è¯è§„èŒƒ

### 7.1 è®¤è¯ç³»ç»Ÿåˆ†ç¦»

| ç«¯å£ | Store | LocalStorage Key | ç™»å½•è·¯ç”± |
|------|-------|------------------|----------|
| å“ç‰Œ/å•†åŠ¡ç«¯ | `authStore` | `token` | `/login` |
| ç®¡ç†å‘˜ç«¯ | `adminStore` | `admin_token` | `/admin/login` |
| è¾¾äººç«¯ | `influencerPortalStore` | `influencer_token` | `/influencer-portal/login` |

### 7.2 ç™»å½•é¡µæ ·å¼ï¼ˆv5.9 Split-Screenï¼‰

- **å¸ƒå±€**: å·¦å³åˆ†å± (55% è§†è§‰åŒº / 45% è¡¨å•åŒº)
- **å·¦ä¾§**: æ·±ç´«æ¸å˜èƒŒæ™¯ + Logo + åŠŸèƒ½è¦ç‚¹ + ç¤¾ä¼šè¯æ˜
- **å³ä¾§**: çº¯ç™½èƒŒæ™¯ + Ant Design è¡¨å•ç»„ä»¶
- **æ ¸å¿ƒæ–‡æ¡ˆ**: "è®©åˆä½œæ›´é€æ˜ï¼Œè®© ROI æ›´çœŸå®"

---

## ğŸ“‹ å…«ã€æ£€æŸ¥æ¸…å•

### æ–°é¡µé¢æ£€æŸ¥æ¸…å•

- [ ] ä¸»å®¹å™¨ä½¿ç”¨ `padding: '24px'` + `margin: '-24px'`
- [ ] å¸ƒå±€ä½¿ç”¨ `gap-4` è€Œä¸æ˜¯ `gap-6`
- [ ] ä½¿ç”¨ `Card` æˆ– `BentoCard` ç»„ä»¶
- [ ] å¡ç‰‡åœ†è§’ä¸º 8pxï¼ˆä½¿ç”¨ç»„ä»¶è‡ªåŠ¨å¤„ç†ï¼‰
- [ ] å¯¼å…¥äº† `useTheme` ç”¨äºæ¸å˜èƒŒæ™¯
- [ ] å†…å®¹å±‚è®¾ç½® `position: relative; zIndex: 1`
- [ ] æ²¡æœ‰å¤šä½™çš„ `pb-X` padding
- [ ] èœå•é¡¹å·²æ·»åŠ åˆ°å¯¹åº”çš„ Layout
- [ ] è·¯ç”±å·²æ·»åŠ åˆ° `routes/index.tsx`

### æ–°å­—æ®µæ£€æŸ¥æ¸…å•

- [ ] Prisma schema å·²æ·»åŠ å­—æ®µ
- [ ] åç«¯ Service æ¥å£å·²æ›´æ–°
- [ ] åç«¯ Route å·²è§£æ„æ–°å­—æ®µ
- [ ] å‰ç«¯ Service æ¥å£å·²æ›´æ–°
- [ ] å‰ç«¯ç»„ä»¶å·²ä½¿ç”¨æ–°å­—æ®µ
- [ ] å·²è¿è¡Œ `npx prisma generate`

---

## ğŸ“ ä¹ã€é¡¹ç›®ç»“æ„å‚è€ƒ

```
packages/
â”œâ”€â”€ backend/
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ routes/       # APIè·¯ç”±å®šä¹‰
â”‚   â”‚   â”œâ”€â”€ services/     # ä¸šåŠ¡é€»è¾‘å±‚
â”‚   â”‚   â”œâ”€â”€ middleware/   # è®¤è¯å’ŒéªŒè¯ä¸­é—´ä»¶
â”‚   â”‚   â””â”€â”€ index.ts      # å…¥å£ (Port 3000)
â”‚   â””â”€â”€ prisma/
â”‚       â”œâ”€â”€ schema.prisma # æ•°æ®åº“æ¨¡å‹
â”‚       â””â”€â”€ seed.ts       # ç§å­è„šæœ¬
â”‚
â”œâ”€â”€ frontend/
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ pages/        # é¡µé¢ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ components/   # å…±äº«ç»„ä»¶
â”‚   â”‚   â”‚   â””â”€â”€ ui/       # è®¾è®¡ç³»ç»Ÿç»„ä»¶ (Card, Bento, etc.)
â”‚   â”‚   â”œâ”€â”€ layouts/      # å¸ƒå±€ç»„ä»¶ (MainLayout, InfluencerPortalLayout)
â”‚   â”‚   â”œâ”€â”€ routes/       # è·¯ç”±é…ç½®
â”‚   â”‚   â”œâ”€â”€ services/     # APIæœåŠ¡å±‚
â”‚   â”‚   â”œâ”€â”€ stores/       # ZustandçŠ¶æ€ç®¡ç†
â”‚   â”‚   â””â”€â”€ theme/        # ä¸»é¢˜ç³»ç»Ÿ (tokens.ts, ThemeProvider.tsx)
â”‚   â””â”€â”€ public/
â”‚       â””â”€â”€ downloads/    # å¯ä¸‹è½½èµ„æº (æ’ä»¶ZIPç­‰)
â”‚
â”œâ”€â”€ shared/               # å…±äº«TypeScriptç±»å‹
â”‚
â””â”€â”€ chrome-extension/     # æµè§ˆå™¨æ’ä»¶
    â”œâ”€â”€ manifest.json
    â”œâ”€â”€ background.js
    â”œâ”€â”€ content.js
    â””â”€â”€ popup.html
```

---

## ğŸ”§ åã€å¸¸ç”¨å·¥ä½œæµ

### åˆ›å»ºæ–°é¡µé¢ (`/create-page`)

éµå¾ª `.agent/workflows/create-page.md` å·¥ä½œæµï¼Œç¡®ä¿ï¼š
1. è¯»å–æœ¬è§„èŒƒæ–‡æ¡£
2. ä½¿ç”¨æ ‡å‡†é¡µé¢æ¨¡æ¿
3. æ·»åŠ èœå•å’Œè·¯ç”±
4. éªŒè¯å¸ƒå±€è§„èŒƒ

### è°ƒè¯•ç«¯å£å ç”¨

```bash
# æŸ¥æ‰¾å ç”¨3000ç«¯å£çš„è¿›ç¨‹
netstat -ano | findstr :3000

# å¼ºåˆ¶ç»ˆæ­¢æ‰€æœ‰nodeè¿›ç¨‹
taskkill /F /IM node.exe
```

---

*æ–‡æ¡£ç‰ˆæœ¬: v2.0 | æœ€åæ›´æ–°: 2026-01-19*
