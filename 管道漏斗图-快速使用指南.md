# 管道漏斗图 - 快速使用指南

**功能**: 展示合作从初步接触到发布的各阶段数量和转化情况  
**用户**: 工厂老板  
**位置**: Dashboard 页面

---

## 🚀 快速开始

### 1. 启动服务

```bash
# 终端1: 启动后端
cd packages/backend
npm run dev

# 终端2: 启动前端
cd packages/frontend
npm run dev
```

### 2. 登录系统

- 访问: http://localhost:5173
- 账号: owner@test.com
- 密码: owner123

### 3. 查看漏斗图

登录后自动进入 Dashboard，向下滚动即可看到"合作管道漏斗"图表。

---

## 📊 功能说明

### 总体统计

图表顶部显示三个关键指标：

1. **总合作数**: 所有阶段的合作总数
2. **总转化率**: 从初步接触到已发布的转化率
3. **已发布**: 最终发布的合作数量

### 漏斗图

中间的漏斗图展示6个阶段：

1. **初步接触** (蓝色) - 刚开始联系的达人
2. **寄样阶段** (绿色) - 已经寄出样品
3. **谈判中** (橙色) - 正在商谈合作细节
4. **合作确认** (橙红色) - 合作已确认
5. **内容制作** (红色) - 达人正在制作内容
6. **已发布** (紫色) - 内容已发布

每个阶段显示：
- 阶段名称
- 合作数量
- 转化率（相对于上一阶段）

### 阶段详情

底部的列表详细展示每个阶段的：
- 颜色标识
- 阶段名称和数量
- 转化率（绿色）
- 流失率（红色）

---

## 🎯 使用场景

### 场景1: 快速了解管道健康状况

**操作**: 查看漏斗图的形状

**判断**:
- ✅ 理想状态：漏斗形状均匀，每个阶段都有合理的转化
- ⚠️ 需要关注：某个阶段突然变窄，说明该阶段转化率低
- ❌ 有问题：漏斗顶部很宽，底部很窄，说明整体转化率低

### 场景2: 识别转化瓶颈

**操作**: 查看阶段详情列表中的转化率

**判断**:
- 转化率 > 70%：该阶段转化良好 ✅
- 转化率 50-70%：该阶段转化一般 ⚠️
- 转化率 < 50%：该阶段转化较差，需要优化 ❌

**示例**:
```
初步接触 → 寄样阶段: 80% ✅ (很好)
寄样阶段 → 谈判中: 45% ❌ (需要优化)
```

说明：寄样后很多达人没有进入谈判，可能是样品不合适或跟进不及时。

### 场景3: 查看具体合作

**操作**: 点击漏斗图中的某个阶段或阶段详情列表

**结果**: 自动跳转到合作管道页面，并筛选出该阶段的所有合作

**用途**: 快速查看和处理特定阶段的合作

---

## 💡 数据解读技巧

### 1. 总转化率

**计算方式**: 已发布数量 / 初步接触数量 × 100%

**参考标准**:
- 20% 以上：优秀 ✅
- 10-20%：良好 👍
- 5-10%：一般 ⚠️
- 5% 以下：需要改进 ❌

### 2. 各阶段转化率

**初步接触 → 寄样阶段**:
- 目标：60-80%
- 低于50%：可能是达人筛选不够精准

**寄样阶段 → 谈判中**:
- 目标：70-90%
- 低于60%：可能是样品不合适或跟进不及时

**谈判中 → 合作确认**:
- 目标：60-80%
- 低于50%：可能是报价不合理或条件谈不拢

**合作确认 → 内容制作**:
- 目标：80-95%
- 低于70%：可能是达人反悔或沟通不畅

**内容制作 → 已发布**:
- 目标：85-100%
- 低于80%：可能是内容审核不通过或达人拖延

### 3. 流失率

**流失率 = 100% - 转化率**

流失率高的阶段需要重点关注：
- 分析流失原因
- 优化该阶段的流程
- 加强商务培训

---

## 🔍 常见问题

### Q1: 为什么第一阶段没有转化率？

**A**: 第一阶段（初步接触）是起点，没有上一阶段，所以转化率为0。

### Q2: 为什么某个阶段的数量比上一阶段多？

**A**: 这种情况不应该出现。如果出现，可能是：
1. 数据录入错误
2. 阶段定义有问题
3. 合作状态更新不及时

建议检查数据并修正。

### Q3: 总转化率很低怎么办？

**A**: 分析每个阶段的转化率，找出最低的几个阶段：
1. 针对性优化流程
2. 加强商务培训
3. 改进样品质量
4. 优化报价策略

### Q4: 如何提高转化率？

**A**: 根据不同阶段采取不同措施：

**初步接触 → 寄样**:
- 精准筛选达人
- 提高首次沟通质量
- 快速响应达人需求

**寄样 → 谈判**:
- 提供优质样品
- 及时跟进反馈
- 主动推进合作

**谈判 → 确认**:
- 合理报价
- 灵活谈判
- 建立信任

**确认 → 制作**:
- 清晰的合作协议
- 及时提供支持
- 保持沟通

**制作 → 发布**:
- 内容审核及时
- 解决达人问题
- 督促按时发布

---

## 📈 最佳实践

### 1. 定期查看

**建议频率**: 每周查看一次

**关注点**:
- 总转化率是否提升
- 各阶段转化率是否改善
- 是否有新的瓶颈出现

### 2. 对比分析

**横向对比**: 对比不同商务的漏斗图（未来功能）
**纵向对比**: 对比不同时间段的漏斗图（未来功能）

### 3. 及时行动

发现问题后立即采取行动：
1. 点击问题阶段查看具体合作
2. 分析流失原因
3. 制定改进措施
4. 跟踪改进效果

---

## 🧪 测试验证

### 1. 运行测试脚本

```bash
node test-pipeline-funnel.js
```

**验证内容**:
- API 端点正常
- 数据结构正确
- 转化率计算准确
- 数据完整性

### 2. 浏览器测试

**测试步骤**:
1. 登录系统
2. 查看漏斗图是否显示
3. 验证数据是否正确
4. 点击阶段测试跳转
5. 检查 Tooltip 显示

**预期结果**:
- ✅ 漏斗图正常显示
- ✅ 数据准确无误
- ✅ 点击跳转正常
- ✅ 交互流畅

---

## 📞 技术支持

如有问题，请查看：
- 完成报告: `Day1-管道漏斗图功能完成报告.md`
- 测试脚本: `test-pipeline-funnel.js`
- 设计文档: `.kiro/specs/business-end-optimization/design.md`

---

**文档版本**: 1.0  
**更新时间**: 2026年1月6日  
**适用角色**: 工厂老板
