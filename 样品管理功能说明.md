# ТаитЊЂу«АуљєтіЪУЃйУ»┤Тўј

## РюЁ жЄЇУдЂТЏ┤ТГБ

### уІгуФІтЋєтіАС╣ЪжюђУдЂТаитЊЂу«АуљєтіЪУЃй

**тјЪтЏа**№╝џ
- тЋєтіАжюђУдЂУ«░тйЋу╗ЎУЙЙС║║т»ёС║єС╗ђС╣ѕТаитЊЂ
- жюђУдЂУ┐йУИфТаитЊЂТѕљТюг
- жюђУдЂу╗ЪУ«АТаитЊЂСй┐ућеТЋѕујЄ№╝ѕСИіУйдујЄ№╝Ѕ

**у╗ЊУ«║**№╝џуІгуФІтЋєтіАтњїтиЦтјѓтЋєтіАжЃйТюЅт«їТЋ┤уџёТаитЊЂу«АуљєтіЪУЃй

---

## ­ЪЊд ТаитЊЂу«АуљєтіЪУЃйт»╣Т»ћ

### уІгуФІтЋєтіАуџёТаитЊЂу«Ауљє

**тіЪУЃй**№╝џ
- РюЁ тѕЏт╗║ТаитЊЂ№╝ѕSKUсђЂтљЇуД░сђЂТѕљТюгсђЂтЏЙуЅЄ№╝Ѕ
- РюЁ у╝ќУЙЉ/тѕажЎцТаитЊЂ
- РюЁ У«░тйЋт»ёТаи№╝ѕу╗ЎтЊфСИфУЙЙС║║сђЂт»ёС║єС╗ђС╣ѕсђЂТЋ░жЄЈсђЂт┐ФжђњтЇЋтЈи№╝Ѕ
- РюЁ ТЪЦуюІт»ёТаиУ«░тйЋ
- РюЁ у╗ЪУ«АТаитЊЂСй┐ућеТЃЁтєх№╝ѕт»ёТаиТгАТЋ░сђЂСИіУйдујЄ№╝Ѕ
- РюЁ ТаитЊЂТѕљТюгу╗ЪУ«А

**ТЋ░ТЇ«жџћуд╗**№╝џ
- тЈфУЃйуюІтѕ░УЄфти▒тѕЏт╗║уџёТаитЊЂ
- тЈфУЃйуюІтѕ░УЄфти▒уџёт»ёТаиУ«░тйЋ
- ТаитЊЂт║Њт«їтЁеуІгуФІ

**Сй┐ућетю║ТЎ»**№╝џ
```
уІгуФІтЋєтіАт╝аСИЅ№╝џ
- тѕЏт╗║ТаитЊЂ№╝џтЈБу║б A№╝ѕТѕљТюг 50 тЁЃ№╝Ѕ
- т»ёТаиу╗ЎУЙЙС║║ТЮјтЏЏ№╝џтЈБу║б A ├Ќ 2
- У«░тйЋт┐ФжђњтЇЋтЈи№╝џSF123456
- УЙЙС║║уА«У«цТћХУ┤Д
- у╗ЪУ«А№╝џтЈБу║б A т»ёТаи 5 ТгА№╝їСИіУйд 3 ТгА№╝їСИіУйдујЄ 60%
```

### тиЦтјѓтЋєтіАуџёТаитЊЂу«Ауљє

**тіЪУЃй**№╝џ
- РюЁ ТЅђТюЅуІгуФІтЋєтіАуџётіЪУЃй
- РюЁ ТЪЦуюІтиЦтјѓуџёТЅђТюЅТаитЊЂ№╝ѕтЏбжўЪтЁ▒С║Ф№╝Ѕ
- РюЁ Сй┐ућетиЦтјѓуџёТаитЊЂт»ёТаи
- РюЁ ТЪЦуюІтЏбжўЪуџёт»ёТаиУ«░тйЋ
- РюЁ у╗ЪУ«АтиЦтјѓТЋ┤СйЊТаитЊЂСй┐ућеТЃЁтєх

**ТЋ░ТЇ«тЁ▒С║Ф**№╝џ
- тиЦтјѓтєЁТЅђТюЅтЋєтіАтЁ▒С║ФТаитЊЂт║Њ
- С╗╗СйЋтЋєтіАжЃйтЈ»С╗ЦСй┐ућетиЦтјѓуџёТаитЊЂ
- тиЦтјѓУђЂТЮ┐тЈ»С╗ЦТЪЦуюІТЅђТюЅт»ёТаиУ«░тйЋ

**Сй┐ућетю║ТЎ»**№╝џ
```
ABC тиЦтјѓ№╝џ
- тиЦтјѓУђЂТЮ┐тѕЏт╗║ТаитЊЂ№╝џтЈБу║б A№╝ѕТѕљТюг 50 тЁЃ№╝Ѕ
- тЋєтіАт╝аСИЅт»ёТаи№╝џтЈБу║б A ├Ќ 2 у╗ЎУЙЙС║║ТЮјтЏЏ
- тЋєтіАујІС║ћт»ёТаи№╝џтЈБу║б A ├Ќ 1 у╗ЎУЙЙС║║УххтЁГ
- тиЦтјѓУђЂТЮ┐ТЪЦуюІ№╝џтЈБу║б A тЁ▒т»ёТаи 3 ТгА
```

---

## ­Ъћё тіатЁЦтиЦтјѓТЌХуџёТаитЊЂТЋ░ТЇ«У┐ЂуД╗

### У┐ЂуД╗жђ╗УЙЉ

тйЊуІгуФІтЋєтіАтіатЁЦтиЦтјѓТЌХ№╝џ

**ТаитЊЂТЋ░ТЇ«**№╝џ
```
уІгуФІтЋєтіАуџёТаитЊЂ Рєњ У┐ЂуД╗тѕ░тиЦтјѓТаитЊЂт║Њ
- ТаитЊЂуџё ownerId С╗јтЋєтіАСИфС║║ Рєњ Тћ╣СИ║тиЦтјѓ
- ТаитЊЂтЈўТѕљтиЦтјѓтЁ▒С║ФУхёТ║љ
- тЁХС╗ќтЋєтіАС╣ЪтЈ»С╗ЦСй┐ућеУ┐ЎС║ЏТаитЊЂ
```

**т»ёТаиУ«░тйЋ**№╝џ
```
уІгуФІтЋєтіАуџёт»ёТаиУ«░тйЋ Рєњ тйњт▒ътѕ░тиЦтјѓ
- У«░тйЋуџё factoryId ТЏ┤Тќ░СИ║тиЦтјѓ ID
- тиЦтјѓУђЂТЮ┐тЈ»С╗ЦТЪЦуюІУ┐ЎС║ЏУ«░тйЋ
- у╗ЪУ«АТЋ░ТЇ«тљѕт╣Хтѕ░тиЦтјѓу╗ЪУ«АСИГ
```

### ТЈљуц║ућеТѕи

тіатЁЦтиЦтјѓтЅЇуџёуА«У«цТЈљуц║№╝џ
```
Рџа№ИЈ тіатЁЦтиЦтјѓтљјуџётЈўтїќ№╝џ

РюЁ ТѓеуџёТаитЊЂт░єтіатЁЦтиЦтјѓТаитЊЂт║Њ№╝їтЏбжўЪТѕљтЉўтЈ»С╗ЦСй┐уће
РюЁ Тѓеуџёт»ёТаиУ«░тйЋт░єСИјтиЦтјѓтЏбжўЪтЁ▒С║Ф
РюЁ ТѓетЈ»С╗ЦСй┐ућетиЦтјѓуџёТЅђТюЅТаитЊЂ

РЮї ТГцТЊЇСйюСИЇтЈ»Тњцжћђ
РЮї ТаитЊЂТЋ░ТЇ«т░єТЌаТ│ЋТЂбтцЇСИ║СИфС║║уІгуФІуіХТђЂ

уА«т«џУдЂтіатЁЦ"ABC тиЦтјѓ"тљЌ№╝Ъ
[тЈќТХѕ] [уА«У«цтіатЁЦ]
```

---

## ­ЪЌё№ИЈ ТЋ░ТЇ«т║Њ Schema У░ЃТЋ┤

### Sample УАе

```prisma
model Sample {
  id          String   @id @default(uuid()) @db.Uuid
  sku         String
  name        String
  description String?
  cost        Decimal  @db.Decimal(10, 2)
  imageUrl    String?
  
  // тйњт▒ътЁ│у│╗№╝ѕС║їжђЅСИђ№╝Ѕ
  factoryId   String?  @db.Uuid  // тиЦтјѓТаитЊЂ
  ownerId     String?  @db.Uuid  // СИфС║║ТаитЊЂ№╝ѕуІгуФІтЋєтіА№╝Ѕ
  
  factory     Factory? @relation(fields: [factoryId], references: [id])
  owner       User?    @relation(fields: [ownerId], references: [id])
  
  // т»ёТаиУ«░тйЋ
  dispatches  SampleDispatch[]
  
  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt
  
  @@index([factoryId])
  @@index([ownerId])
}
```

### SampleDispatch УАе

```prisma
model SampleDispatch {
  id              String   @id @default(uuid()) @db.Uuid
  sampleId        String   @db.Uuid
  sample          Sample   @relation(fields: [sampleId], references: [id])
  
  influencerId    String   @db.Uuid
  influencer      Influencer @relation(fields: [influencerId], references: [id])
  
  collaborationId String?  @db.Uuid
  collaboration   Collaboration? @relation(fields: [collaborationId], references: [id])
  
  // тйњт▒ътЁ│у│╗№╝ѕС║їжђЅСИђ№╝Ѕ
  factoryId       String?  @db.Uuid  // тиЦтјѓт»ёТаи
  dispatchedBy    String   @db.Uuid  // т»ёТаиС║║№╝ѕтЋєтіА№╝Ѕ
  
  factory         Factory? @relation(fields: [factoryId], references: [id])
  dispatcher      User     @relation(fields: [dispatchedBy], references: [id])
  
  quantity        Int
  trackingNumber  String?
  status          String   @default("PENDING") // PENDING, SHIPPED, RECEIVED
  
  shippedAt       DateTime?
  receivedAt      DateTime?
  
  createdAt       DateTime @default(now())
  updatedAt       DateTime @updatedAt
  
  @@index([factoryId])
  @@index([dispatchedBy])
  @@index([sampleId])
  @@index([influencerId])
}
```

---

## ­Ъј» ТЮЃжЎљТјДтѕХжђ╗УЙЉ

### ТЪЦУ»бТаитЊЂТЌХуџёТЮЃжЎљ

```typescript
// уІгуФІтЋєтіА№╝џтЈфУЃйуюІтѕ░УЄфти▒уџёТаитЊЂ
if (user.role === 'BUSINESS_STAFF' && !user.factoryId) {
  where.ownerId = user.id;
}

// тиЦтјѓтЋєтіА№╝џтЈ»С╗ЦуюІтѕ░тиЦтјѓуџёТЅђТюЅТаитЊЂ
if (user.role === 'BUSINESS_STAFF' && user.factoryId) {
  where.factoryId = user.factoryId;
}

// тиЦтјѓУђЂТЮ┐№╝џтЈ»С╗ЦуюІтѕ░тиЦтјѓуџёТЅђТюЅТаитЊЂ
if (user.role === 'FACTORY_OWNER') {
  where.factoryId = user.factoryId;
}
```

### тѕЏт╗║ТаитЊЂТЌХуџётйњт▒ъ

```typescript
// уІгуФІтЋєтіА№╝џТаитЊЂтйњт▒ъСИфС║║
if (user.role === 'BUSINESS_STAFF' && !user.factoryId) {
  sampleData.ownerId = user.id;
  sampleData.factoryId = null;
}

// тиЦтјѓтЋєтіА/УђЂТЮ┐№╝џТаитЊЂтйњт▒ътиЦтјѓ
if (user.factoryId) {
  sampleData.factoryId = user.factoryId;
  sampleData.ownerId = null;
}
```

---

## ­ЪЊі у╗ЪУ«АТЋ░ТЇ«уџётї║тѕФ

### уІгуФІтЋєтіАуџёТаитЊЂу╗ЪУ«А

```
ТѕЉуџёТаитЊЂт║Њ№╝џ
- тЈБу║б A№╝џт»ёТаи 5 ТгА№╝їСИіУйд 3 ТгА№╝їСИіУйдујЄ 60%
- ую╝тй▒ B№╝џт»ёТаи 3 ТгА№╝їСИіУйд 1 ТгА№╝їСИіУйдујЄ 33%

Тђ╗ТѕљТюг№╝џ┬Ц400
Тђ╗т»ёТаиТгАТЋ░№╝џ8 ТгА
т╣│тЮЄСИіУйдујЄ№╝џ46.5%
```

### тиЦтјѓуџёТаитЊЂу╗ЪУ«А

```
тиЦтјѓТаитЊЂт║Њ№╝џ
- тЈБу║б A№╝џт»ёТаи 15 ТгА№╝ѕт╝аСИЅ 5 ТгА№╝їТЮјтЏЏ 6 ТгА№╝їујІС║ћ 4 ТгА№╝Ѕ
- ую╝тй▒ B№╝џт»ёТаи 10 ТгА№╝ѕт╝аСИЅ 3 ТгА№╝їТЮјтЏЏ 7 ТгА№╝Ѕ

Тђ╗ТѕљТюг№╝џ┬Ц1,200
Тђ╗т»ёТаиТгАТЋ░№╝џ25 ТгА
т╣│тЮЄСИіУйдујЄ№╝џ52%

тЋєтіАТјњУАї№╝џ
1. ТЮјтЏЏ№╝џт»ёТаи 13 ТгА№╝їСИіУйдујЄ 61%
2. т╝аСИЅ№╝џт»ёТаи 8 ТгА№╝їСИіУйдујЄ 50%
3. ујІС║ћ№╝џт»ёТаи 4 ТгА№╝їСИіУйдујЄ 25%
```

---

## РюЁ Тюђу╗ѕуА«У«ц

### уІгуФІтЋєтіАуџёТаитЊЂу«Ауљє

- РюЁ ТІЦТюЅт«їТЋ┤уџёТаитЊЂу«АуљєтіЪУЃй
- РюЁ тЈ»С╗ЦтѕЏт╗║ТаитЊЂсђЂУ«░тйЋт»ёТаи
- РюЁ тЈ»С╗ЦТЪЦуюІУЄфти▒уџёТаитЊЂу╗ЪУ«А
- РюЁ ТаитЊЂТЋ░ТЇ«т«їтЁеуІгуФІ
- РюЁ тіатЁЦтиЦтјѓтљјТаитЊЂУ┐ЂуД╗тѕ░тиЦтјѓ

### тіЪУЃйт»╣уГЅТђД

```
уІгуФІтЋєтіА = тиЦтјѓтЋєтіА№╝ѕтіЪУЃйт▒ѓжЮб№╝Ѕ
тї║тѕФС╗ЁтюеС║ј№╝џ
- ТЋ░ТЇ«жџћуд╗ vs ТЋ░ТЇ«тЁ▒С║Ф
- тЇЋС║║Сй┐уће vs тЏбжўЪтЇЈСйю
```

У┐ЎТаиУ«ЙУ«АуџётЦйтцё№╝џ
1. уІгуФІтЋєтіАТюЅт«їТЋ┤тіЪУЃй№╝їСИЇС╝џтЏаСИ║у╝║т░ЉТаитЊЂу«АуљєУђїТхЂтц▒
2. тіатЁЦтиЦтјѓтљјТЌау╝ЮУАћТјЦ№╝їТЋ░ТЇ«УЄфтіеУ┐ЂуД╗
3. тиЦтјѓтЈ»С╗ЦуюІтѕ░т«їТЋ┤уџётЏбжўЪТЋ░ТЇ«
