# 平台管理端 - 下一步工作计划

**创建时间**: 2026年1月6日  
**状态**: 📋 规划中

---

## 🎯 核心目标

1. **优化左侧菜单结构** - 让平台管理员有更清晰的导航
2. **增强工厂管理详情** - 显示每个工厂的商务账号和数据关联
3. **完善数据溯源** - 所有数据都能追溯到源头

---

## 📊 优先级1：拆分左侧菜单

### 当前问题
- 左侧菜单只有一个"平台管理"入口
- 所有功能都在标签页里，不够直观
- 导航层级不清晰

### 改进方案

**新的菜单结构**：
```
平台管理员菜单：
├── 📊 数据概览
├── 🏭 工厂管理
├── 👥 达人管理  
├── 👔 用户管理（新增）
└── ⚙️ 系统设置（新增）
```

### 实施步骤
1. 修改 `MainLayout.tsx` 的菜单配置
2. 创建独立的路由页面
3. 更新路由配置 `routes/index.tsx`

---

## 🏭 优先级2：增强工厂管理详情

### 当前显示
```
工厂列表：
- 工厂名称
- 老板信息
- 商务数量: 2（只是数字）
- 达人数量: 10
- 合作数量: 5
```

### 需要增强

#### 2.1 工厂详情弹窗 - 商务账号列表

**新增标签页**：
```
工厂详情弹窗：
├── 基本信息
├── 商务团队（新增）✨
│   ├── 商务列表表格
│   │   ├── 姓名
│   │   ├── 邮箱
│   │   ├── 状态（启用/禁用）
│   │   ├── 添加时间
│   │   ├── 最后登录
│   │   └── 操作（查看详情）
│   └── 统计卡片
│       ├── 总商务数
│       ├── 活跃商务
│       └── 本月新增
├── 达人数据
└── 合作数据
```

#### 2.2 商务详情弹窗

**点击商务后显示**：
```
商务详情：
├── 基本信息
│   ├── 姓名、邮箱
│   ├── 所属工厂
│   ├── 账号状态
│   └── 注册时间
├── 工作数据
│   ├── 添加达人数: 15
│   ├── 创建合作数: 8
│   ├── 完成合作数: 5
│   └── 合作成功率: 62.5%
├── 达人列表（该商务添加的）
│   └── 表格显示
└── 合作列表（该商务负责的）
    └── 表格显示
```

#### 2.3 数据关联溯源

**完整的数据链路**：
```
工厂 → 商务 → 达人 → 合作 → 结果

示例：
1. 点击工厂"示例工厂"
2. 查看商务列表，看到"李商务"
3. 点击"李商务"，看到他添加的15个达人
4. 点击某个达人，看到该达人的所有合作
5. 点击某个合作，看到合作结果和ROI
```

---

## 👔 优先级3：新增用户管理功能

### 功能需求

#### 3.1 用户列表
- 显示所有用户（工厂老板 + 商务人员）
- 按工厂筛选
- 按角色筛选
- 按状态筛选（启用/禁用）
- 搜索（姓名、邮箱）

#### 3.2 用户详情
- 基本信息
- 所属工厂
- 工作数据
- 操作日志
- 登录历史

#### 3.3 用户操作
- 禁用/启用账号
- 重置密码
- 查看操作日志
- 导出用户列表

---

## 📋 数据库需求

### 需要的数据

#### 已有数据（可直接使用）
- ✅ User 表（用户信息）
- ✅ Factory 表（工厂信息）
- ✅ Influencer 表（达人信息，含 createdBy）
- ✅ Collaboration 表（合作信息）
- ✅ Result 表（合作结果）

#### 需要新增的字段
```prisma
model User {
  // 现有字段...
  
  // 新增字段
  lastLoginAt    DateTime?   // 最后登录时间
  loginCount     Int @default(0)  // 登录次数
  isActive       Boolean @default(true)  // 账号是否启用
  disabledAt     DateTime?   // 禁用时间
  disabledBy     String?     // 禁用操作人
}
```

---

## 🚀 实施计划

### 阶段1：拆分左侧菜单（0.5天）
- [x] 修改 MainLayout.tsx 菜单配置
- [x] 创建独立路由页面
- [x] 更新路由配置
- [ ] 测试导航功能

### 阶段2：增强工厂管理（2天）
- [x] 后端API：获取工厂的商务列表
- [x] 后端API：获取商务详情和工作数据
- [x] 前端：工厂详情弹窗 - 商务团队标签页
- [x] 前端：商务详情弹窗
- [ ] 测试数据关联

### 阶段3：用户管理功能（2-3天）
- [ ] 数据库字段新增
- [ ] 后端API：用户列表、详情、操作
- [ ] 前端：用户管理页面
- [ ] 前端：用户详情弹窗
- [ ] 测试功能

### 阶段4：测试和优化（1天）
- [ ] 功能测试
- [ ] 数据准确性测试
- [ ] 性能优化
- [ ] 用户体验优化

**预计总时间**: 5.5-6.5 天

---

## ✅ 验收标准

### 菜单导航
- [ ] 左侧菜单结构清晰
- [ ] 导航切换流畅
- [ ] 当前页面高亮正确

### 工厂管理
- [ ] 能查看工厂的所有商务账号
- [ ] 能查看每个商务的工作数据
- [ ] 能追溯数据关联（工厂→商务→达人→合作）
- [ ] 数据统计准确

### 用户管理
- [ ] 能查看所有用户列表
- [ ] 能筛选和搜索用户
- [ ] 能查看用户详情和工作数据
- [ ] 能禁用/启用账号

---

## 🎨 界面设计参考

### 工厂详情 - 商务团队标签页
```
┌─────────────────────────────────────────────────────────┐
│ 工厂详情 - 示例工厂                          [关闭]     │
├─────────────────────────────────────────────────────────┤
│ [基本信息] [商务团队] [达人数据] [合作数据]            │
├─────────────────────────────────────────────────────────┤
│ 商务团队统计:                                           │
│ ┌──────────┬──────────┬──────────┐                     │
│ │ 总商务数  │ 活跃商务  │ 本月新增  │                     │
│ │    3     │    2     │    1     │                     │
│ └──────────┴──────────┴──────────┘                     │
├─────────────────────────────────────────────────────────┤
│ 商务列表:                                               │
│ ┌───────┬─────────────┬────────┬──────────┬─────────┐ │
│ │ 姓名   │ 邮箱         │ 状态   │ 添加时间  │ 操作    │ │
│ ├───────┼─────────────┼────────┼──────────┼─────────┤ │
│ │ 李商务 │ li@demo.com │ 启用   │ 2025-12  │ [详情]  │ │
│ │ 王商务 │ wang@...    │ 启用   │ 2025-11  │ [详情]  │ │
│ │ 张商务 │ zhang@...   │ 禁用   │ 2025-10  │ [详情]  │ │
│ └───────┴─────────────┴────────┴──────────┴─────────┘ │
└─────────────────────────────────────────────────────────┘
```

### 商务详情弹窗
```
┌─────────────────────────────────────────────────────────┐
│ 商务详情 - 李商务                            [关闭]     │
├─────────────────────────────────────────────────────────┤
│ [基本信息] [工作数据] [达人列表] [合作列表]            │
├─────────────────────────────────────────────────────────┤
│ 工作数据:                                               │
│ ┌──────────┬──────────┬──────────┬──────────┐         │
│ │ 添加达人  │ 创建合作  │ 完成合作  │ 成功率   │         │
│ │   15个   │   8个    │   5个    │  62.5%  │         │
│ └──────────┴──────────┴──────────┴──────────┘         │
├─────────────────────────────────────────────────────────┤
│ 本月工作量:                                             │
│ - 新增达人: 3个                                         │
│ - 新增合作: 2个                                         │
│ - 完成合作: 1个                                         │
└─────────────────────────────────────────────────────────┘
```

---

**文档状态**: ✅ 已创建  
**下一步**: 等待用户确认，然后开始实施
