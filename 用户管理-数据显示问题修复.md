# 用户管理 - 数据显示问题修复

## 问题描述
用户管理页面显示"暂无数据"，但后端API实际返回了7个用户。

## 问题原因
前后端数据结构不匹配：

**后端返回结构**:
```json
{
  "success": true,
  "data": {
    "data": [...],      // 用户数组
    "total": 7,
    "page": 1,
    "pageSize": 10,
    "totalPages": 1
  }
}
```

**前端期望结构**:
```typescript
{
  users: UserListItem[],  // 期望 users 字段
  total: number,
  page: number,
  pageSize: number
}
```

## 修复方案
修改前端服务层 `packages/frontend/src/services/platform.service.ts` 中的 `listAllUsers` 方法，将后端的 `PaginatedResult` 结构转换为前端期望的 `UserListResponse` 结构：

```typescript
export async function listAllUsers(filter: UserListFilter = {}): Promise<UserListResponse> {
  const response = await request<PaginatedResult<UserListItem>>(
    'get',
    '/platform/users',
    filter
  );

  if (!response.success || !response.data) {
    throw new Error(response.error?.message || '获取用户列表失败');
  }

  // 转换 PaginatedResult 到 UserListResponse
  return {
    users: response.data.data,  // 从 data.data 提取用户数组
    total: response.data.total,
    page: response.data.page,
    pageSize: response.data.pageSize,
  };
}
```

## 修复状态
✅ 已修复

## 测试验证
1. 刷新浏览器页面（F5）
2. 应该能看到7个用户的列表
3. 包括：平台管理员、工厂老板、商务人员

## 测试脚本
运行以下命令查看API返回的完整数据结构：
```bash
node test-user-api-structure.js
```

## 下一步
刷新浏览器页面，验证用户列表正常显示。
