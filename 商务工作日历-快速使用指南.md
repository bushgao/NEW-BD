# 商务工作日历 - 快速使用指南

## 📍 访问位置

### 前端地址
```
http://localhost:5173
```

### 功能入口
**工厂老板端** → **团队管理** → **商务详情** → **工作日历标签页**

---

## 🚀 快速查看步骤

### 1. 登录系统
打开浏览器访问：`http://localhost:5173`

使用工厂老板账号登录：
- **邮箱**: `owner@demo.com`
- **密码**: `owner123`

### 2. 进入团队管理
登录后，点击左侧菜单的 **"团队管理"** 或 **"Team"**

### 3. 查看商务详情
在商务列表中，点击任意商务账号的 **"查看详情"** 按钮

### 4. 切换到工作日历
在弹出的详情弹窗中，点击 **"工作日历"** 标签页（带日历图标 📅）

---

## 📊 功能说明

### 日历视图
- **日历格式**: 月度日历视图
- **事件标注**: 
  - 🔴 红色徽章 = 截止日期
  - 🔵 蓝色徽章 = 发布排期
  - 🟢 绿色徽章 = 跟进记录
- **工作负载**: 右上角圆点显示当天工作量
  - 🟢 绿色 = 低负载（< 3个事件）
  - 🟡 黄色 = 中负载（3-4个事件）
  - 🔴 红色 = 高负载（≥ 5个事件）

### 统计卡片
日历上方显示4个统计卡片：
- **总事件数**: 本月所有事件总数
- **截止日期**: 本月截止日期数量
- **排期日期**: 本月发布排期数量
- **平均日工作量**: 平均每天的事件数

### 交互功能
- **点击日期**: 查看当天的详细事件列表
- **切换月份**: 使用日历顶部的月份选择器
- **查看详情**: 在事件弹窗中查看达人名称、合作阶段等信息

---

## 🎯 使用场景

### 1. 查看商务工作安排
了解商务人员本月的工作日程，包括：
- 哪些合作即将到期（截止日期）
- 哪些内容即将发布（排期日期）
- 最近的跟进活动（跟进记录）

### 2. 识别工作负载
通过工作负载热力图，快速识别：
- 哪些日期工作量较大
- 工作分配是否均衡
- 是否需要调整工作安排

### 3. 跟踪重要节点
清晰标注重要日期，避免遗漏：
- 合作截止日期提醒
- 内容发布计划跟踪
- 沟通频率监控

---

## 📸 界面预览

```
┌─────────────────────────────────────────────────────────┐
│  商务账号详情                                    [X]      │
├─────────────────────────────────────────────────────────┤
│  [基本信息] [质量评分] [工作日历] ← 点击这里             │
├─────────────────────────────────────────────────────────┤
│                                                           │
│  ┌──────┐ ┌──────┐ ┌──────┐ ┌──────┐                   │
│  │总事件│ │截止  │ │排期  │ │平均  │  ← 统计卡片        │
│  │ 15项│ │ 5个 │ │ 3个 │ │0.5项│                      │
│  └──────┘ └──────┘ └──────┘ └──────┘                   │
│                                                           │
│  图例: 🔴 截止日期  🔵 排期日期  🟢 跟进记录            │
│        工作负载: 🟢 低  🟡 中  🔴 高                    │
│                                                           │
│  ┌─────────────────────────────────────────────────┐   │
│  │          2026年1月                    [<] [>]   │   │
│  ├─────────────────────────────────────────────────┤   │
│  │ 日  一  二  三  四  五  六                      │   │
│  ├─────────────────────────────────────────────────┤   │
│  │          1🟢  2    3🔴  4                       │   │
│  │  5    6    7🟡  8    9   10   11               │   │
│  │ 12   13   14   15🔴 16   17   18               │   │
│  │ 19   20🟢 21   22   23   24   25               │   │
│  │ 26   27   28   29   30   31                    │   │
│  └─────────────────────────────────────────────────┘   │
│                                                           │
│  点击日期查看详细事件 →                                  │
└─────────────────────────────────────────────────────────┘
```

---

## 🔧 技术信息

### API 端点
```
GET /api/reports/staff/:staffId/calendar?month=YYYY-MM
```

### 权限要求
- 仅工厂老板和平台管理员可访问
- 需要有效的登录 Token

### 数据来源
- **截止日期**: 来自合作记录的 deadline 字段
- **发布排期**: 来自合作结果的 publishedAt 字段
- **跟进记录**: 来自跟进记录的 createdAt 字段

---

## 💡 使用技巧

### 1. 快速定位问题
- 查看红色高负载日期，了解工作压力
- 关注截止日期密集的时段
- 检查跟进频率是否合理

### 2. 优化工作安排
- 识别工作分配不均的情况
- 调整合作截止日期避免集中
- 平衡每日工作量

### 3. 跟踪工作进度
- 对比不同月份的工作量
- 分析工作模式和规律
- 评估商务人员的工作效率

---

## ❓ 常见问题

### Q: 为什么日历上没有显示事件？
A: 可能的原因：
1. 该商务本月确实没有相关活动
2. 合作记录没有设置截止日期
3. 没有发布的内容（没有 publishedAt 数据）
4. 本月没有跟进记录

### Q: 如何查看其他月份的数据？
A: 使用日历顶部的月份选择器，点击左右箭头切换月份

### Q: 工作负载是如何计算的？
A: 根据每天的事件数量：
- 低负载：< 3个事件
- 中负载：3-4个事件
- 高负载：≥ 5个事件

### Q: 可以导出日历数据吗？
A: 当前版本暂不支持导出，后续版本会添加此功能

---

## 🎉 快速测试

如果您想快速测试功能，可以运行测试脚本：

```bash
node test-staff-calendar.js
```

测试脚本会：
1. 自动登录
2. 获取商务列表
3. 查询工作日历数据
4. 验证数据结构
5. 显示统计信息

---

## 📞 需要帮助？

如果遇到问题，请检查：
1. ✅ 前端服务是否运行（http://localhost:5173）
2. ✅ 后端服务是否运行（http://localhost:3000）
3. ✅ 数据库是否连接正常
4. ✅ 使用正确的登录账号（工厂老板）

---

**最后更新**: 2026年1月7日  
**功能状态**: ✅ 已完成并测试通过
