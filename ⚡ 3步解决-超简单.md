# ⚡ 3步解决 Dashboard 400错误

## 🎯 问题

浏览器中存储了**旧Token**（没有factoryId），导致Dashboard显示400错误。

后端已修复，但需要清除浏览器缓存。

---

## ✅ 解决方案（3步，30秒）

### 步骤1：打开诊断工具

```
双击打开文件: 🔍 详细诊断-请打开此文件.html
```

### 步骤2：点击"清除Token"按钮

工具会：
- ✅ 自动检测Token问题
- ✅ 一键清除旧Token
- ✅ 自动跳转到登录页

### 步骤3：重新登录

```
邮箱: pinpai001@gmail.com
密码: password123
```

---

## 🎉 完成！

Dashboard应该正常显示，不再有400错误。

---

## 🔍 为什么会这样？

```
问题流程：
1. 之前登录 → 生成旧Token（没有factoryId）
2. 代码修复 → 后端已正常
3. 但浏览器 → 还在用旧Token ❌

解决流程：
1. 清除旧Token
2. 重新登录
3. 获取新Token（有factoryId）✅
```

---

## ❓ 如果还有问题

1. **打开浏览器开发者工具** (按F12)
2. **查看Console标签** 的错误信息
3. **截图发给我**

---

## 📊 技术细节

### 旧Token（问题）
```json
{
  "userId": "xxx",
  "email": "pinpai001@gmail.com",
  "role": "BRAND",
  "factoryId": null  ← ❌ 缺失！
}
```

### 新Token（正常）
```json
{
  "userId": "xxx",
  "email": "pinpai001@gmail.com",
  "role": "BRAND",
  "factoryId": "5e51a9ad-6903-4c48-a635-3399e89ff9a4"  ← ✅ 正确！
}
```

---

## ✅ 已完成的修复

- ✅ 后端代码已修复（角色名 `BRAND`）
- ✅ 数据库关系已修复
- ✅ 测试数据已创建
- ✅ 后端服务已重启
- ❌ 浏览器缓存需要清除 ← **这是唯一剩下的步骤**

---

**只需清除浏览器缓存，重新登录即可！**

**工具已准备好：`🔍 详细诊断-请打开此文件.html`**
