# ç²‰ä¸æ•°æå–ä¿®å¤

## é—®é¢˜
ä¹‹å‰çš„ç²‰ä¸æ•°æå–é€»è¾‘æ— æ³•æ­£ç¡®æå–åˆ°ç²‰ä¸æ•°å€¼ã€‚

## åŸå› 
æŠ–éŸ³ç²¾é€‰è”ç›Ÿé¡µé¢çš„ç²‰ä¸æ•°æ˜¾ç¤ºåœ¨ä¸€ä¸ªç‰¹æ®Šçš„ `span` å…ƒç´ ä¸­ï¼š
```html
<span elementtiming="element-timing">2ä¸‡</span>
```

ä¹‹å‰çš„é€‰æ‹©å™¨ `[class*="detail-data-num"]` æ— æ³•åŒ¹é…åˆ°è¿™ä¸ªå…ƒç´ ã€‚

## è§£å†³æ–¹æ¡ˆ

### 1. æ›´æ–° content.js æå–é€»è¾‘

æ·»åŠ äº†ä¸‰ç§æå–æ–¹æ³•ï¼ˆæŒ‰ä¼˜å…ˆçº§ï¼‰ï¼š

**æ–¹æ³•1ï¼ˆæœ€ä¼˜å…ˆï¼‰**ï¼šæŸ¥æ‰¾å¸¦æœ‰ `elementtiming="element-timing"` å±æ€§çš„ span å…ƒç´ 
```javascript
const timingSpans = document.querySelectorAll('span[elementtiming="element-timing"]');
for (const span of timingSpans) {
  const text = span.textContent.trim();
  if (/^[\d.]+[ä¸‡wW]?$/.test(text) && text.length < 10) {
    info.followers = text;
    break;
  }
}
```

**æ–¹æ³•2ï¼ˆå¤‡ç”¨ï¼‰**ï¼šæŸ¥æ‰¾ class åŒ…å« "detail-data-num" çš„å…ƒç´ 
```javascript
const dataNumElements = document.querySelectorAll('[class*="detail-data-num"]');
```

**æ–¹æ³•3ï¼ˆå…œåº•ï¼‰**ï¼šä»é¡µé¢æ–‡æœ¬ä¸­åŒ¹é…æ•°å­—+ä¸‡çš„æ ¼å¼
```javascript
const matches = allText.match(/(\d+\.?\d*[ä¸‡wW])/g);
```

### 2. æ›´æ–° background.js è§£æé€»è¾‘

å¢å¼ºäº† `parseFollowers` å‡½æ•°çš„æ³¨é‡Šå’Œé€»è¾‘ï¼š
```javascript
// è§£æç²‰ä¸æ•°ï¼ˆæ”¯æŒ 1.2w, 123.4ä¸‡, 2ä¸‡ ç­‰æ ¼å¼ï¼‰
function parseFollowers(followersStr) {
  if (!followersStr) return '';
  
  // ç§»é™¤é€—å·ã€ç©ºæ ¼ç­‰
  const str = followersStr.replace(/[,ï¼Œ\s]/g, '');
  
  // åŒ¹é…æ•°å­—å’Œå•ä½ï¼š2ä¸‡ã€1.2ä¸‡ã€123.4ä¸‡ã€5000 ç­‰
  const match = str.match(/([\d.]+)([wWä¸‡])?/);
  if (!match) return followersStr;
  
  const num = parseFloat(match[1]);
  const unit = match[2];
  
  // å¦‚æœæœ‰"ä¸‡"æˆ–"w"å•ä½ï¼Œè½¬æ¢ä¸ºå®é™…æ•°å­—
  if (unit && (unit === 'w' || unit === 'W' || unit === 'ä¸‡')) {
    return Math.round(num * 10000).toString();
  }
  
  // å¦‚æœæ²¡æœ‰å•ä½ï¼Œç›´æ¥è¿”å›æ•°å­—
  return Math.round(num).toString();
}
```

## æ”¯æŒçš„æ ¼å¼

| è¾“å…¥æ ¼å¼ | è§£æç»“æœ | è¯´æ˜ |
|---------|---------|------|
| "2ä¸‡"   | "20000" | æ•´æ•°ä¸‡ |
| "1.2ä¸‡" | "12000" | å°æ•°ä¸‡ |
| "123.4ä¸‡" | "1234000" | å¤§æ•°ä¸‡ |
| "5000"  | "5000"  | çº¯æ•°å­— |
| "42.47" | "42"    | å°æ•°ï¼ˆæ— å•ä½ï¼‰ |

## æµ‹è¯•æ­¥éª¤

1. **é‡æ–°åŠ è½½æ’ä»¶**
   - æ‰“å¼€ `chrome://extensions/`
   - æ‰¾åˆ°"Zilo è¾¾äººé‡‡é›†åŠ©æ‰‹"
   - ç‚¹å‡»åˆ·æ–°æŒ‰é’® ğŸ”„

2. **æµ‹è¯•æå–é€»è¾‘**
   - è®¿é—®æŠ–éŸ³ç²¾é€‰è”ç›Ÿè¾¾äººè¯¦æƒ…é¡µ
   - æ‰“å¼€æ§åˆ¶å°ï¼ˆF12ï¼‰
   - å¤åˆ¶å¹¶è¿è¡Œ `chrome-extension/æµ‹è¯•ç²‰ä¸æ•°æå–-ç®€åŒ–ç‰ˆ.js` ä¸­çš„ä»£ç 
   - æŸ¥çœ‹è¾“å‡ºï¼Œç¡®è®¤èƒ½æ‰¾åˆ°ç²‰ä¸æ•°

3. **æµ‹è¯•å®Œæ•´é‡‡é›†**
   - åœ¨è¾¾äººè¯¦æƒ…é¡µç‚¹å‡»"æ·»åŠ åˆ° Zilo"æŒ‰é’®
   - æŸ¥çœ‹æ§åˆ¶å°æ—¥å¿—ï¼Œç¡®è®¤ç²‰ä¸æ•°è¢«æ­£ç¡®æå–
   - åœ¨ Zilo ç³»ç»Ÿçš„è¾¾äººåˆ—è¡¨ä¸­æŸ¥çœ‹ï¼Œç¡®è®¤ç²‰ä¸æ•°æ­£ç¡®æ˜¾ç¤º

## é¢„æœŸç»“æœ

### æ§åˆ¶å°æ—¥å¿—
```
[Zilo] æ‰¾åˆ°ç²‰ä¸æ•° (æ–¹æ³•1-timing): 2ä¸‡
[Zilo] æå–çš„è¾¾äººä¿¡æ¯: {
  nickname: "å“’å“’åƒå¾—é¥±ğŸ§¸",
  followers: "2ä¸‡",
  ...
}
[Zilo Background] å‡†å¤‡å‘é€è¯·æ±‚: {
  nickname: "å“’å“’åƒå¾—é¥±ğŸ§¸",
  followers: "20000",
  ...
}
```

### æ•°æ®åº“å­˜å‚¨
```
followers: "20000"
```

### å‰ç«¯æ˜¾ç¤º
```
ç²‰ä¸æ•°åˆ—: "2.0ä¸‡"
```

## æ–‡ä»¶ä¿®æ”¹æ¸…å•

- âœ… `chrome-extension/content.js` - æ›´æ–°ç²‰ä¸æ•°æå–é€»è¾‘
- âœ… `chrome-extension/background.js` - å¢å¼ºè§£æå‡½æ•°æ³¨é‡Š
- âœ… `chrome-extension/æµ‹è¯•ç²‰ä¸æ•°æå–-ç®€åŒ–ç‰ˆ.js` - æ–°å¢æµ‹è¯•è„šæœ¬

## æ³¨æ„äº‹é¡¹

1. **å¤šç§æå–æ–¹æ³•**ï¼šä½¿ç”¨äº†ä¸‰ç§æ–¹æ³•ç¡®ä¿åœ¨ä¸åŒé¡µé¢ç»“æ„ä¸‹éƒ½èƒ½æå–åˆ°ç²‰ä¸æ•°
2. **æ ¼å¼å…¼å®¹æ€§**ï¼šæ”¯æŒå¤šç§ç²‰ä¸æ•°æ ¼å¼ï¼ˆä¸‡ã€wã€çº¯æ•°å­—ç­‰ï¼‰
3. **é”™è¯¯å¤„ç†**ï¼šå¦‚æœæå–å¤±è´¥ï¼Œä¸ä¼šå½±å“å…¶ä»–å­—æ®µçš„é‡‡é›†
4. **æ—¥å¿—è¾“å‡º**ï¼šæ¯ç§æ–¹æ³•éƒ½æœ‰è¯¦ç»†çš„æ—¥å¿—ï¼Œæ–¹ä¾¿è°ƒè¯•

## ä¸‹ä¸€æ­¥

æµ‹è¯•é€šè¿‡åï¼Œå¯ä»¥ï¼š
1. é‡‡é›†æ›´å¤šè¾¾äººï¼ŒéªŒè¯ä¸åŒç²‰ä¸æ•°é‡çº§çš„æ˜¾ç¤º
2. æ£€æŸ¥æ•°æ®åº“ä¸­çš„å­˜å‚¨æ ¼å¼æ˜¯å¦æ­£ç¡®
3. éªŒè¯å‰ç«¯åˆ—è¡¨çš„æ ¼å¼åŒ–æ˜¾ç¤ºæ˜¯å¦ç¬¦åˆé¢„æœŸ

---

**ä¿®å¤å®Œæˆæ—¶é—´**: 2026-01-06
**ä¿®å¤çŠ¶æ€**: âœ… å·²å®Œæˆï¼Œå¾…æµ‹è¯•éªŒè¯
