# 🚀 Chrome 插件快速测试步骤

## ⚡ 5 分钟完成测试

### 步骤 1：重新加载插件（必须！）

刚才修改了代码，需要重新加载：

1. 打开 `chrome://extensions/`
2. 找到"Zilo 达人采集助手"
3. 点击刷新图标 🔄

### 步骤 2：配置插件

**2.1 获取 Token**

```bash
# 1. 确保后端服务运行
cd packages/backend
npm run dev

# 2. 确保前端服务运行（新终端）
cd packages/frontend
npm run dev
```

然后：
1. 打开 http://localhost:5173
2. 登录（`owner/owner123` 或 `staff/staff123`）
3. 按 `F12` > `Application` > `Local Storage` > `http://localhost:5173`
4. 复制 `token` 的值

**2.2 配置插件**

1. 点击 Chrome 工具栏的 Zilo 插件图标
2. 点击"⚙️ 配置设置"
3. 填写：
   - API 地址：`http://localhost:3000/api`
   - 登录令牌：粘贴刚才的 token
4. 点击"💾 保存配置"
5. 确认显示"✓ 已连接"

### 步骤 3：测试采集

1. **打开测试页面**
   - 在 Chrome 中打开文件：`chrome-extension/test-page.html`
   - 或者直接拖拽 `test-page.html` 到 Chrome 窗口

2. **查看按钮**
   - 页面右上角应该出现"添加到 Zilo"按钮（紫色渐变）
   - 如果没出现，按 `F12` 查看控制台错误

3. **点击采集**
   - 点击"添加到 Zilo"按钮
   - 按钮变为"采集中..."
   - 1-2 秒后应该显示"✓ 已添加"
   - 右上角出现绿色通知："达人采集成功！"

4. **验证结果**
   - 返回 Zilo 系统：http://localhost:5173
   - 进入"达人管理"页面
   - 刷新页面
   - 应该看到"美食达人小王"

### 步骤 4：查看统计

1. 点击插件图标
2. 查看"已采集"数量（应该是 1）

---

## 🐛 如果出现问题

### 问题 1：按钮没出现

**解决方法：**
```bash
# 1. 检查插件是否重新加载
chrome://extensions/ > 找到插件 > 点击刷新

# 2. 检查控制台
F12 > Console > 查找 [Zilo] 日志

# 3. 刷新测试页面
Ctrl+R 或 F5
```

### 问题 2：点击按钮无反应

**解决方法：**
```bash
# 1. 检查 Token 是否配置
点击插件图标 > 查看连接状态

# 2. 检查后端服务
浏览器访问：http://localhost:3000/health
应该看到：{"status":"ok"}

# 3. 查看 Background Script 日志
chrome://extensions/ > 插件详情 > 检查视图：Service Worker
```

### 问题 3：提示"采集失败"

**查看错误详情：**
1. 按 `F12` 打开控制台
2. 查看红色错误信息
3. 检查 Network 标签的请求

**常见错误：**
- "请先配置登录令牌" → 重新配置 Token
- "网络错误" → 检查后端服务是否运行
- "401 Unauthorized" → Token 过期，重新获取
- "达人平台账号ID已存在" → 这个达人已经添加过了（正常）

---

## ✅ 测试成功的标志

- ✅ 按钮正常显示
- ✅ 点击后显示"✓ 已添加"
- ✅ 出现绿色成功通知
- ✅ Zilo 系统中能看到新达人
- ✅ 插件统计数量增加

---

## 📊 测试数据

测试页面会采集以下信息：

```json
{
  "nickname": "美食达人小王",
  "platform": "DOUYIN",
  "platformId": "123456789",
  "categories": ["生鲜"],
  "tags": ["LV3"],
  "notes": "粉丝数: 125000\n通过浏览器插件采集于 2026-01-05"
}
```

---

## 🎯 下一步

测试成功后，你可以：

1. **在真实环境测试**
   - 访问抖音精选联盟：https://buyin.jinritemai.com
   - 进入达人详情页
   - 使用插件采集真实达人

2. **调整选择器**
   - 如果真实页面采集失败
   - 需要更新 `content.js` 中的 CSS 选择器
   - 根据实际页面结构调整

3. **批量采集**
   - 打开多个达人详情页
   - 依次点击采集按钮
   - 提高工作效率

---

**祝测试顺利！** 🎉
